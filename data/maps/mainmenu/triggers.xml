<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

	<trigger Name="GlobalVar" active="1">
		<event	timeout="0"	eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("Fade", 1)
			SetVar("Track", 0)
			SetVar("LastTrack", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Trigger_start" active="1">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>

			PlayCustomMusic("mainmenu")
			SetVar("Track", 179)
			TActivate("MusicTimer")

			local coordarr = {
					CVector(936.669, 242.476, 397.737),
					CVector(1231.490, 247.083, 451.674),
					CVector(1651.560, 245.386, 622.529),
					CVector(1829.943, 229.109, 1177.645),
					CVector(1671.518, 232.329, 1497.765),
					CVector(1239.933, 261.625, 1828.776),
					CVector(453.285, 261.846, 1609.741),
					CVector(334.209, 262.108, 1261.142),
					CVector(137.696, 233.980, 498.779)}
			
			local rotarr={
					Quaternion(-0.029, 0.679, -0.021, 0.734),
					Quaternion(0.001, 0.626, 0.002, 0.780),
					Quaternion(-0.001, 0.558, -0.001, 0.830),
					Quaternion(-0.029, -0.025, 0.005, 0.999),
					Quaternion(-0.001, -0.346, 0.001, 0.938),
					Quaternion(-0.001, -0.724, -0.000, 0.690),
					Quaternion(-0.025, -0.992, -0.005, 0.125),
					Quaternion(0.002, -0.914, -0.001, 0.405),
					Quaternion(-0.003, -1.000, -0.006, -0.015)}

			local listmodel = {"Scout01", "Fighter01", "Hunter02", "Bug01", "Molokovoz01", "Ural01", "Belaz01", "Mirotvorec01", "Cruiser01"}
			local model = listmodel[random(8)]
			local Z = random(9)

			local scout_cab = {"scoutCab01", "scoutCab02", "scoutCab02"}
			local scout_cab_r = getn(scout_cab)

			local fight_cab = {"fighterCab01", "fighterCab02"}
			local fight_cab_r = getn(fight_cab)

			local bug_cab = {"bugCab01", "bugCab02", "bugCab03"}
			local bug_cab_r = getn(bug_cab)
			local bug_cargo = {"bugCargo01", "bugCargo02", "bugCargo03"}
			local bug_cargo_r = getn(bug_cargo)

			local mol_cab = {"molokovozCab01", "molokovozCab02" ,"molokovozCab03"}
			local mol_cab_r = getn(mol_cab)
			local mol_cargo = {"molokovozCargo01", "molokovozCargo02", "molokovozCargo03"}
			local mol_cargo_r = getn(mol_cargo)

			local ural_cab = {"uralCab01", "uralCab02", "uralCab03", "uralCab04", "uralCab05"}
			local ural_cab_r = getn(ural_cab)
			local ural_cargo = {"uralCargo01", "uralCargo02", "uralCargo03", "uralCargo04", "uralCargo05"}
			local ural_cargo_r = getn(ural_cargo)

			local bel_cab = {"belazCab01", "belazCab02", "belazCab03", "belazCab04", "belazCab05"}
			local bel_cab_r = getn(bel_cab)
			local bel_cargo = {"belazCargo01", "belazCargo02", "belazCargo03", "belazCargo04", "belazCargo05"}
			local bel_cargo_r = getn(bel_cargo)

			local mir_cab = {"mirotvorecCab01", "mirotvorecCab02", "mirotvorecCab03", "mirotvorecCab04", "mirotvorecCab05"}
			local mir_cab_r = getn(mir_cab)
			local mir_cargo = {"mirotvorecCargo01", "mirotvorecCargo02", "mirotvorecCargo03", "mirotvorecCargo04", "mirotvorecCargo05"}
			local mir_cargo_r = getn(mir_cargo)

			local cru_cab = {"cruiserCab01", "cruiserCab02"}
			local cru_cab_r = getn(cru_cab)
			local cru_cargo = {"cruiserCargo01", "cruiserCargo02"}
			local cru_cargo_r = getn(cru_cargo)

			local startloc = "Zone0"..Z.."_loc"

			local veh = CreateVehicleEx(model,"PlayerCar",coordarr[Z])

			if veh then
				veh:SetGamePositionOnGround(coordarr[Z])
				veh:SetRotation(rotarr[Z])
				g_Player:AddChild(veh)
			end

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
				if model == "Scout01" then
					vehPlayer:SetNewPart("CABIN",scout_cab[random(scout_cab_r)])
				elseif model == "Fighter01" then
					vehPlayer:SetNewPart("CABIN",fight_cab[random(fight_cab_r)])
				elseif model == "Bug01" then
					vehPlayer:SetNewPart("CABIN",bug_cab[random(bug_cab_r)])
					vehPlayer:SetNewPart("BASKET",bug_cargo[random(bug_cargo_r)])
				elseif model == "Molokovoz01" then
					vehPlayer:SetNewPart("CABIN",mol_cab[random(mol_cab_r)])
					vehPlayer:SetNewPart("BASKET",mol_cargo[random(mol_cargo_r)])
				elseif model == "Ural01" then
					vehPlayer:SetNewPart("CABIN",ural_cab[random(ural_cab_r)])
					vehPlayer:SetNewPart("BASKET",ural_cargo[random(ural_cargo_r)])
				elseif model == "Belaz01" then
					vehPlayer:SetNewPart("CABIN",bel_cab[random(bel_cab_r)])
					vehPlayer:SetNewPart("BASKET",bel_cargo[random(bel_cargo_r)])
				elseif model == "Mirotvorec01" then
					vehPlayer:SetNewPart("CABIN",mir_cab[random(mir_cab_r)])
					vehPlayer:SetNewPart("BASKET",mir_cargo[random(mir_cargo_r)])
				elseif model == "Cruiser01" then
					vehPlayer:SetNewPart("CABIN",cru_cab[random(cru_cab_r)])
					vehPlayer:SetNewPart("BASKET",cru_cargo[random(cru_cargo_r)])
				end
				vehPlayer:SetRandomSkin()
				vehPlayer:SetMaxSpeed(5)
				GiveGunsForVehicle(vehPlayer, 1)
			end

			CreateNewDummyObject( "cargo", "CamTochka", -1, -1, CVector(358.551, 264.511, 1423.320), Quaternion(0, 0, 0, 0), 0)
			CreateNewDummyObject( "cargo", "CamTochkaCentr", -1, -1, CVector(955.502, 280.000, 1151.172), Quaternion(0, 0, 0, 0), 0)

			TActivate("Speed")

		</script>
	</trigger>

	<trigger Name="Trigger_zone01" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone01_loc" />
		<script>
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)
			
			local listmodel = {"Scout01", "Fighter01", "Hunter02", "Bug01", "Molokovoz01", "Ural01", "Belaz01", "Mirotvorec01", "Cruiser01"}
			local listmodel_r = getn(listmodel)
			local model = listmodel[random(listmodel_r)]

			local scout_cab = {"scoutCab01", "scoutCab02", "scoutCab02"}
			local scout_cab_r = getn(scout_cab)

			local fight_cab = {"fighterCab01", "fighterCab02"}
			local fight_cab_r = getn(fight_cab)

			local bug_cab = {"bugCab01", "bugCab02", "bugCab03"}
			local bug_cab_r = getn(bug_cab)
			local bug_cargo = {"bugCargo01", "bugCargo02", "bugCargo03"}
			local bug_cargo_r = getn(bug_cargo)

			local mol_cab = {"molokovozCab01", "molokovozCab02" ,"molokovozCab03"}
			local mol_cab_r = getn(mol_cab)
			local mol_cargo = {"molokovozCargo01", "molokovozCargo02", "molokovozCargo03"}
			local mol_cargo_r = getn(mol_cargo)

			local ural_cab = {"uralCab01", "uralCab02", "uralCab03", "uralCab04", "uralCab05"}
			local ural_cab_r = getn(ural_cab)
			local ural_cargo = {"uralCargo01", "uralCargo02", "uralCargo03", "uralCargo04", "uralCargo05"}
			local ural_cargo_r = getn(ural_cargo)

			local bel_cab = {"belazCab01", "belazCab02", "belazCab03", "belazCab04", "belazCab05"}
			local bel_cab_r = getn(bel_cab)
			local bel_cargo = {"belazCargo01", "belazCargo02", "belazCargo03", "belazCargo04", "belazCargo05"}
			local bel_cargo_r = getn(bel_cargo)

			local mir_cab = {"mirotvorecCab01", "mirotvorecCab02", "mirotvorecCab03", "mirotvorecCab04", "mirotvorecCab05"}
			local mir_cab_r = getn(mir_cab)
			local mir_cargo = {"mirotvorecCargo01", "mirotvorecCargo02", "mirotvorecCargo03", "mirotvorecCargo04", "mirotvorecCargo05"}
			local mir_cargo_r = getn(mir_cargo)

			local cru_cab = {"cruiserCab01", "cruiserCab02"}
			local cru_cab_r = getn(cru_cab)
			local cru_cargo = {"cruiserCargo01", "cruiserCargo02"}
			local cru_cargo_r = getn(cru_cargo)

			AddPlayerNewVehicle(model)

			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetRotation(Quaternion(-0.029, 0.679, -0.021, 0.734))
				vehPlayer:SetExternalPathByName("Zone01_path")
				vehPlayer:SetThrottle( 1 )
				vehPlayer:SetCustomLinearVelocity( 5 )
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
				if model == "Scout01" then
					vehPlayer:SetNewPart("CABIN",scout_cab[random(scout_cab_r)])
				elseif model == "Fighter01" then
					vehPlayer:SetNewPart("CABIN",fight_cab[random(fight_cab_r)])
				elseif model == "Bug01" then
					vehPlayer:SetNewPart("CABIN",bug_cab[random(bug_cab_r)])
					vehPlayer:SetNewPart("BASKET",bug_cargo[random(bug_cargo_r)])
				elseif model == "Molokovoz01" then
					vehPlayer:SetNewPart("CABIN",mol_cab[random(mol_cab_r)])
					vehPlayer:SetNewPart("BASKET",mol_cargo[random(mol_cargo_r)])
				elseif model == "Ural01" then
					vehPlayer:SetNewPart("CABIN",ural_cab[random(ural_cab_r)])
					vehPlayer:SetNewPart("BASKET",ural_cargo[random(ural_cargo_r)])
				elseif model == "Belaz01" then
					vehPlayer:SetNewPart("CABIN",bel_cab[random(bel_cab_r)])
					vehPlayer:SetNewPart("BASKET",bel_cargo[random(bel_cargo_r)])
				elseif model == "Mirotvorec01" then
					vehPlayer:SetNewPart("CABIN",mir_cab[random(mir_cab_r)])
					vehPlayer:SetNewPart("BASKET",mir_cargo[random(mir_cargo_r)])
				elseif model == "Cruiser01" then
					vehPlayer:SetNewPart("CABIN",cru_cab[random(cru_cab_r)])
					vehPlayer:SetNewPart("BASKET",cru_cargo[random(cru_cargo_r)])
				end
				vehPlayer:SetRandomSkin()
				vehPlayer:AddModifier("maxfuel", "+ 1000")
				vehPlayer:AddModifier("fuel", "+ 1000")
				vehPlayer:SetMaxSpeed(5)
				GiveGunsForVehicle(vehPlayer, 1)
			end

			Fly("cam_Zone01", CINEMATIC_NO_AIM, 0, 30, Fade, 0, false, true, nil )
			StartCinematic()
			
			if Fade == 1 then
				UpdateCinematic( 1 )
			end

			TActivate("Speed")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Trigger_zone02" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone02_loc" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone02_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()
			FlyLinked("cam_Zone02", idn01, 30, Fade, 0, idn01, false, nil, true, nil )
			StartCinematic()

			if Fade == 1 then
				UpdateCinematic( 1 )
			end
			
		</script>
	</trigger>

	<trigger Name="Trigger_zone03" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone03_loc" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone03_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()

			FlyLinked("cam_Zone0", idn01, 30, Fade, 0, nil, false, true, true, nil )
			StartCinematic()

			if Fade == 1 then
				UpdateCinematic( 1 )
			end
			
		</script>
	</trigger>

	<trigger Name="Trigger_zone04" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone04_loc" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone04_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()

			if Fade == 1 then
				FlyLinked("cam_Zone0", idn01, 30, Fade, 0, nil, false, true, true, nil )
				StartCinematic()
				UpdateCinematic( 1 )
			end

		</script>
	</trigger>

	<trigger Name="Trigger_zone05" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone05_loc" />
		<script>
			RuleConsole("cinematic_spring_coeff 0.3")
			local idn01 = GetPlayerVehicleId()
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone05_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			FlyLinked("cam_Zone05", idn01, 30, Fade, 0, idn01, false, nil, true, nil )
			StartCinematic()

			if Fade == 1 then
				UpdateCinematic( 1 )
			end
			
		</script>
	</trigger>

	<trigger Name="Trigger_zone06" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone06_loc" />
		<script>
			RuleConsole("cinematic_spring_coeff 1.7")
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone06_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()
			FlyLinked("cam_Zone06", idn01, 30, Fade, 0, nil, false, true, true, nil )
			StartCinematic()

			if Fade == 1 then
				UpdateCinematic( 1 )
			end

		</script>
	</trigger>

	<trigger Name="Trigger_zone07" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone07_loc" />
		<script>
			RuleConsole("cinematic_spring_coeff 10.3")
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone07_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()
			local CToch = GetEntityByName("CamTochka")
			local CTochID = CToch:GetId()
			FlyLinked("cam_Zone07", CTochID, 30, Fade, 0, idn01, false, nil, true, nil )
			StartCinematic()
			
			if Fade == 1 then
				UpdateCinematic( 1 )
			end

		</script>
	</trigger>

	<trigger Name="Trigger_zone08" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone08_loc" />
		<script>

			RuleConsole("cinematic_spring_coeff 1.7")
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)
	
			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone08_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()
			if CToch then CToch:Remove() end
			FlyLinked("cam_Zone0", idn01, 30, Fade, 0, nil, false, true, true, nil )
			StartCinematic()

			if Fade == 1 then
				UpdateCinematic( 1 )
			end

		</script>
	</trigger>

	<trigger Name="Trigger_zone09" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Zone09_loc" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			local Fade = GetVar("Fade").AsInt
			SetVar("Fade", 0)

			if vehPlayer then
				vehPlayer:SetCustomControlEnabled( true )
				vehPlayer:SetExternalPathByName("Zone09_path")
				vehPlayer:SetCustomControlEnabled( false )
				vehPlayer:setImmortalMode(1)
			end

			local idn01 = GetPlayerVehicleId()

			if Fade == 1 then
				FlyLinked("cam_Zone0", idn01, 30, Fade, 0, nil, false, true, true, nil )
				StartCinematic()
				UpdateCinematic( 1 )
			end

			TActivate("Trigger_zone01")
		</script>
	</trigger>
	
	<trigger Name="Music" active="0">
		<event	timeout="0"	eventid="GE_TIME_PERIOD" />
		<script>
	
			local list = {"music01", "music02", "music03", "music04", "music05", "music06", "music07", "music08", "music09", "music10", "music11", "music12"}
			local music = list[random(12)]

			if music == GetVar("LastTrack").AsString then
				return
			end

			SetVar("LastTrack", music)

			if music == "music01" then SetVar("Track", 257) end
			if music == "music02" then SetVar("Track", 358) end
			if music == "music03" then SetVar("Track", 232) end
			if music == "music04" then SetVar("Track", 244) end
			if music == "music05" then SetVar("Track", 228) end
			if music == "music06" then SetVar("Track", 218) end
			if music == "music07" then SetVar("Track", 329) end
			if music == "music08" then SetVar("Track", 177) end
			if music == "music09" then SetVar("Track", 203) end
			if music == "music10" then SetVar("Track", 236) end
			if music == "music11" then SetVar("Track", 230) end
			if music == "music12" then SetVar("Track", 262) end

			PlayCustomMusic(music)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="MusicTimer" active="0">
		<event	timeout="1"		eventid="GE_TIME_PERIOD" />
		<script>
			
			local time = GetVar("Track").AsInt

			if GetVar("Track").AsInt > 0 then
				time = time - 1
				SetVar("Track", time)
			else
				TActivate("Music")
			end

		</script>
	</trigger>

	<trigger Name="Speed" active="0">
		<event 	timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
		
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetMaxSpeed(16)
			end

			trigger:Deactivate()    
		</script>
	</trigger>


</triggers>
