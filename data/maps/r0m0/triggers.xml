<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- Назначение дефолтных значений переменных -->
	<trigger Name="GlobalVar" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			SetVar("PetrolStationBuild_fuel_nil_use", 0)
			SetVar("PetrolStationBuild_fuel_full_use", 0)
			SetVar("PetrolStationBuild_item_bolts", 0)
			SetVar("PetrolStationBuild_item_nuts", 0)
			SetVar("PetrolStationBuild_item_thermometer", 0)
			SetVar("PetrolStationBuild_item_parts", 0)
			SetVar("PetrolStationBuild_item_lump", 0)
			SetVar("PetrolStationBuild_item_fullmaster", 0)
			SetVar("PetrolStationBuild_Builden", 0)
			SetVar("PetrolStation_FuelTime", 0)
			SetVar("PetrolStation_Refill", 0)
			SetVar("PetrolStation_Refill_Process", 0)
			SetVar("RegenPlayerFuel_Timer", 0)

			SetVar("Inventory_lvl_2_item_drill", 0)
			SetVar("Inventory_lvl_2_item_screws", 0)
			SetVar("Inventory_lvl_2_item_nails", 0)
			SetVar("Inventory_lvl_2_item_screw", 0)
			SetVar("Inventory_lvl_2_item_roulet", 0)
			SetVar("Inventory_lvl_2_item_pena", 0)
			SetVar("Inventory_lvl_2_Builden", 0)

			SetVar("ChestScavs_electronics", 0)
			SetVar("ChestScavs_machinery", 0)
			SetVar("ChestScavs_books", 0)
			SetVar("ChestScavs_bottles", 0)
			SetVar("ChestScavs_details", 0)
			SetVar("ChestScavs_item_ananaga", 0)
			SetVar("ChestScavs_item_rolex", 0)
			SetVar("ChestScavs_item_chain_gold", 0)
			SetVar("ChestScavs_item_skullring", 0)
			SetVar("ChestScavs_item_fitanyashka", 0)
			SetVar("ChestScavs_Builden", 0)
			SetVar("ChestScavs_Search", 0)
			SetVar("ChestScavs_time_hour", 0)
			SetVar("ChestScavs_time_minute", 0)
			SetVar("ChestScavs_time_second", 0)
			SetVar("ChestScavs_time_msg", "0")
			SetVar("Scav_Move", 0)
			SetVar("ChestScavs_Loot", 0)

			SetVar("Tunel_item_vitalik", 0)
			SetVar("Tunel_item_handrill", 0)
			SetVar("Tunel_item_metalscissors", 0)
			SetVar("Tunel_item_toolset", 0)
			SetVar("Tunel_item_hose", 0)
			SetVar("Tunel_item_kek", 0)
			SetVar("Tunel_item_electronics_components", 0)
			SetVar("Tunel_item_wires", 0)
			SetVar("Tunel_item_nippers", 0)
			SetVar("Tunel_item_pliers_round", 0)
			SetVar("Tunel_Builden", 0)

			SetVar("Generator_lvl", 0)
			SetVar("Generator_time_work_hour", 0)
			SetVar("Generator_time_work_minute", 0)
			SetVar("Generator_time_work_second", 0)
			SetVar("Generator_time_work_msg", "0")
			SetVar("Generator_on", 0)
			SetVar("Generator_dlg", 0)

			SetVar("Generator_lvl_1_item_svech", 0)
			SetVar("Generator_lvl_1_item_engine", 0)
			SetVar("Generator_lvl_1_doski", 0)
			SetVar("Generator_lvl_1_fuel", 0)
			SetVar("Generator_lvl_1_oil", 0)
			SetVar("Generator_lvl_1_money", 0)
			SetVar("Generator_lvl_2_item_fuel_full", 0)
			SetVar("Generator_lvl_2_item_rele", 0)
			SetVar("Generator_lvl_2_item_wires", 0)
			SetVar("Generator_lvl_2_item_buldex", 0)
			SetVar("Generator_lvl_3_item_bp", 0)
			SetVar("Generator_lvl_3_item_parts", 0)
			SetVar("Generator_lvl_3_item_military_cable", 0)
			SetVar("Generator_lvl_3_item_plate", 0)
			SetVar("Generator_lvl_3_item_converter", 0)
			SetVar("Generator_lvl_3_item_lcd", 0)

			SetVar("Lampposts_item_energo_lump", 0)
			SetVar("Lampposts_item_wires", 0)
			SetVar("Lampposts_item_kondesators", 0)
			SetVar("Lampposts_money", 0)
			SetVar("Lampposts_Builden", 0)

			SetVar("Garage_item_bolts", 0)
			SetVar("Garage_item_nuts", 0)
			SetVar("Garage_item_pena", 0)
			SetVar("Garage_item_insulation", 0)
			SetVar("Garage_item_lump", 0)
			SetVar("Garage_item_cable", 0)
			SetVar("Garage_item_tplug", 0)
			SetVar("Garage_item_roulet", 0)
			SetVar("Garage_item_pipe_wrench", 0)
			SetVar("Garage_item_tb", 0)
			SetVar("Garage_item_fitanyashka", 0)
			SetVar("Garage_item_kaktus", 0)
			SetVar("Garage_Builden", 0)
			SetVar("RegenPlayerHP_Timer", 0)

			SetVar("CountRaids", 0)

			SetVar("OpenGate_1", 0)
			SetVar("OpenGate_2", 0)

			SetVar("DialogSelectMap", 0)

			SetVar("WatchCredits", 0)

			SetVar("EFA_Version", "0")
			SetVar("EFA_Build", "0")

		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="QuestGlobalVar" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("q_testing_mission_hornet", 0)
			SetVar("q_fuel1_item_fuel", 0)
			SetVar("q_fuel2_item_fuel", 0)
			SetVar("q_fuel2_can_be_given", 0)
			SetVar("q_rebuild_item_svech", 0)
			SetVar("q_test_drive1_can_be_given", 0)
			SetVar("q_bitok1_item_cable", 0)
			SetVar("q_bitok1_item_tplug", 0)
			SetVar("q_bitok1_item_bp", 0)
			SetVar("q_bitok2_can_be_given", 0)
			SetVar("q_bitok2_item_cpu", 0)
			SetVar("q_bitok2_item_cooler", 0)
			SetVar("q_bitok2_item_plate", 0)
			SetVar("q_bitok3_can_be_given", 0)
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Старт/перезаход на локацию -->
	<trigger Name="StartMap" active="1">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>

		--ящик диких
			if CHESTSCAVS_TIMER_HOUR_GLOBAL then SetVar("ChestScavs_time_hour", CHESTSCAVS_TIMER_HOUR_GLOBAL) end
			if CHESTSCAVS_TIMER_MINUTE_GLOBAL then SetVar("ChestScavs_time_minute", CHESTSCAVS_TIMER_MINUTE_GLOBAL) end
			if CHESTSCAVS_TIMER_SECOND_GLOBAL then SetVar("ChestScavs_time_second", CHESTSCAVS_TIMER_SECOND_GLOBAL) end
			if CHESTSCAVS_SEARCH_GLOBAL then SetVar("ChestScavs_Search", CHESTSCAVS_SEARCH_GLOBAL) end

			if GetVar("ChestScavs_Builden").AsInt == 1 then
				if GetVar("ChestScavs_Search").AsInt > 0 and GetVar("ChestScavs_time_hour").AsInt == 0 and GetVar("ChestScavs_time_minute").AsInt == 0 and GetVar("ChestScavs_time_second").AsInt == 0 then
					if GetVar("ChestScavs_Loot").AsInt == 0 then
						TActivate("ChestScavs_CreateLoot")
					end
				elseif GetVar("ChestScavs_Search").AsInt > 0 then
					if GetVar("ChestScavs_time_hour").AsInt > 0 or GetVar("ChestScavs_time_minute").AsInt > 0 or GetVar("ChestScavs_time_second").AsInt > 0 then
						TActivate("ChestScavs_Timer")
						TActivate("ChestScavsTimeMsgActivate")
					end
				end 
			end

		--генератор
			if GENERATOR_TIMER_HOUR_GLOBAL then SetVar("Generator_time_work_hour", GENERATOR_TIMER_HOUR_GLOBAL) end
			if GENERATOR_TIMER_MINUTE_GLOBAL then SetVar("Generator_time_work_minute", GENERATOR_TIMER_MINUTE_GLOBAL) end
			if GENERATOR_TIMER_SECOND_GLOBAL then SetVar("Generator_time_work_second", GENERATOR_TIMER_SECOND_GLOBAL) end
			if GENERATOR_ON_GLOBAL then SetVar("Generator_on", GENERATOR_ON_GLOBAL) end

			if GetVar("Generator_lvl").AsInt == 1 or GetVar("Generator_lvl").AsInt == 2 then
				if GetVar("Generator_time_work_second").AsInt > 0 or GetVar("Generator_time_work_minute").AsInt > 0 or GetVar("Generator_time_work_hour").AsInt > 0 then
					if GetVar("Generator_on").AsInt == 1 then
						if GetVar("Generator_lvl").AsInt == 1 then
							getObj("gen_2_lvl_1"):SetNodeAction(AT_MOVE1)
						end
						TActivate("Generator_timer")
						TActivate("IfGenerator_On")
					end
				else
					SetVar("Generator_on", 0)
					TActivate("Generator_Stop")
					SetVar("Generator_time_work_msg", "0")
				end
			end

			if COUNT_RAIDS then SetVar("CountRaids", COUNT_RAIDS) end
			
			local pl = GetPlayerVehicle()
			if pl then
				if not(R0M1_exit == 1) then
					pl:SetGamePositionOnGround(CVector(893.077, 255.493, 987.899))
					pl:SetRotation(Quaternion(-0.009, -0.005, -0.000, 1.000))
					R0M1_exit = 0
				else
					R0M1_exit = 0
				end
				pl:setImmortalMode(1)
			end

			TActivate("trCreateVehicleMove")
		
			AllowSave(true)

			SetVar("ToMap", "0")

			TActivate("VehiclesForSale")
		
		--туннель
			if GetVar("Tunel_Builden").AsInt == 3 then
				local g = GetEntityByName("tunel_gate")
				if g then g:SetNodeAction(AT_STAND2) end

				for i=1,2 do
					local s = GetEntityByName("sound_gate"..i)
					if s then s:Remove() end
				end

				local fx = GetEntityByName("fx")
				if fx then fx:Remove() end
			end
		
		--гараж
			if GetVar("Garage_Builden").AsInt == 1 then
				TActivate("PlayerHP")
			end
		
		--заправка
			if GetVar("PetrolStationBuild_Builden").AsInt == 1 then
				TActivate("PlayerFuel")
			end

			TActivate("QuestCanBeGiven")

		--версия
			if EFA_VERSION then SetVar("EFA_Version", EFA_VERSION) end
			if EFA_BUILD then SetVar("EFA_Build", EFA_BUILD) end

			TActivate("CheckLoadSaveTimer")
		
			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>

<!-- Машины в продажу -->
	<trigger Name="VehiclesForSale" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local Workshop = GetEntityByName("Town_r0m0_Workshop")
			local Vehicles = Workshop:GetRepositoryByTypename("Vehicles")
			local CabAndBasket = Workshop:GetRepositoryByTypename("CabinsAndBaskets")
			
			local Shop = GetEntityByName("Town_r0m0_Shop")
			local GunAndGadget = Shop:GetRepositoryByTypename("GunsAndGadgets")
	
			if Workshop and Vehicles then
				Vehicles:AddItems("BugForSale", 1)
				if IsQuestComplete("q_rebuild") then Vehicles:AddItems("MolokovozForSale", 1) end
				if IsQuestComplete("q_test_drive5") then Vehicles:AddItems("UralForSale", 1) end
			end

			if Workshop and CabAndBasket then
				CabAndBasket:AddItems("bugCab01", 1)
				if IsQuestComplete("q_explore_r1m1") then CabAndBasket:AddItems("bugCab02", 1) end
				if IsQuestComplete("q_fuel1") then CabAndBasket:AddItems("bugCab03", 1) end
				CabAndBasket:AddItems("bugCargo01_4x5", 1)
				CabAndBasket:AddItems("bugCargo02_4x6", 1)
				if IsQuestComplete("q_clearing_r1m1") then CabAndBasket:AddItems("bugCargo03_5x7", 1) end
				CabAndBasket:AddItems("molokovozCab01", 1)
				if IsQuestComplete("q_rebuild") then CabAndBasket:AddItems("molokovozCab02", 1) end
				if IsQuestComplete("q_test_drive1") then CabAndBasket:AddItems("molokovozCab03", 1) end
				CabAndBasket:AddItems("molokovozCargo01_5x8", 1)
				if IsQuestComplete("q_test_drive2") then CabAndBasket:AddItems("molokovozCargo02_6x9", 1) end
				if IsQuestComplete("q_test_drive3") then CabAndBasket:AddItems("molokovozCargo03_6x8", 1) end
				CabAndBasket:AddItems("uralCab01", 1)
				if IsQuestComplete("q_test_drive5") then CabAndBasket:AddItems("uralCab02", 1) end
				CabAndBasket:AddItems("uralCargo01_6x9", 1)
				CabAndBasket:AddItems("belazCab01", 1)
				CabAndBasket:AddItems("belazCargo01_6x12", 1)
				CabAndBasket:AddItems("mirotvorecCab01", 1)
				CabAndBasket:AddItems("mirotvorecCargo01_7x9", 1)
				CabAndBasket:AddItems("cruiserCab01", 1)
				CabAndBasket:AddItems("cruiserCargo01_8x11", 1)
			end

			if Shop and GunAndGadget then
				GunAndGadget:AddItems("cooling_system_guns", 1)
				GunAndGadget:AddItems("firing_rate_guns", 1)
				GunAndGadget:AddItems("grouping_angle_guns", 1)
				GunAndGadget:AddItems("add_damage_guns", 1)
				GunAndGadget:AddItems("firing_range_guns", 1)
				GunAndGadget:AddItems("additional_fuel_tank", 1)
				GunAndGadget:AddItems("additional_torque", 1)
				GunAndGadget:AddItems("additional_durability", 1)
				GunAndGadget:AddItems("additional_stability", 1)
				GunAndGadget:AddItems("ammo_chest_machinegunForSale", 1)
				GunAndGadget:AddItems("ammo_chest_shotgunForSale", 1)
				GunAndGadget:AddItems("hornet01", random(0,2))
				if IsQuestComplete("q_clearing_r1m1") then GunAndGadget:AddItems("ammo_chest_machinegunForSale", 1) end
				if IsQuestComplete("q_kill_scavs") then GunAndGadget:AddItems("pkt01", 1) end
				if IsQuestComplete("q_fuel2") then GunAndGadget:AddItems("kord01", 1) end
				if IsQuestComplete("q_base_scavs") then GunAndGadget:AddItems("pkt01", 1) GunAndGadget:AddItems("kord01", 1) end
				if IsQuestComplete("q_test_drive2") then GunAndGadget:AddItems("kpvt01", 1) end
				if IsQuestComplete("q_test_drive3") then GunAndGadget:AddItems("ammo_chest_shotgunForSale", 1) end
				if IsQuestComplete("q_test_drive4") then GunAndGadget:AddItems("ammo_chest_heavygunForSale", 1) end
				if IsQuestComplete("q_test_drive4") then GunAndGadget:AddItems("rapier01", 1) end
				if IsQuestComplete("q_test_drive6") then GunAndGadget:AddItems("ammo_chest_machinegunForSale", 1) end
				if IsQuestComplete("q_test_drive6") then GunAndGadget:AddItems("kpvt01", 1) end
				if IsQuestComplete("q_bitok2") then GunAndGadget:AddItems("cooling_system_guns2", 1) end
			end

		    trigger:Deactivate()
		</script>
	</trigger>
	
<!-- Создание ворот -->
	<trigger Name="CreateGate" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("agro_gate", "gate_1", -1, -1, CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("agro_gate", "gate_2", -1, -1, CVector(868.318, 255, 885.281), Quaternion(0, 1, 0, 0))
			TActivate("OpenGate_1")
			TActivate("OpenGate_2")
		    trigger:Deactivate()
		</script>
	</trigger>
	
<!-- Открытие/закрытие ворот 1 -->
	<trigger Name="OpenGate_1" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_1_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_1_1_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_1_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_1_2_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_1_3_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_1_3_loc" />
		<script>
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do 
				local car = getObj(trigger:GetTriggeredObjectID(i))
				if car then 
					car:SetThrottle(0)
					car:SetCustomLinearVelocity(0)
				end 
			end

			if GetVar("OpenGate_1").AsInt == 0 then
				getObj("gate_1"):SetNodeAction(AT_RESERVED4)
				CreateEffectTTLed( "ET_PS_OPENING_GATE", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1400)
				TActivate("OpennedGate_1")
				SetVar("OpenGate_1", 1)
			end

		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="OpennedGate_1" active="0">
		<event timeout="1.4" eventid="GE_TIME_PERIOD" />
		<script>
			local g = GetEntityByName("gate_1")
			if g then g:SetPosition(CVector(899, 245, 1097)) end

			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1500)
			TActivate("CloseGate_1")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CloseGate_1" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_1_1_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_1_2_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_1_3_loc" />
		<script>
			local g = GetEntityByName("gate_1")
			if GetVar("OpenGate_1").AsInt == 1 then
				if g then 
					g:SetPosition(CVector(868.318, 255, 1094.083)) 
					g:SetNodeAction(AT_RESERVED3)
				end
				CreateEffectTTLed( "ET_PS_CLOSED_GATE", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1400)
				TActivate("ClosedGate_1")
				SetVar("OpenGate_1", 0)
				TActivate("OpenGate_1")
			end
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ClosedGate_1" active="0">
		<event timeout="1.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1500)
		    trigger:Deactivate()
		</script>
	</trigger>
	
<!-- Открытие/закрытие ворот 2 -->
	<trigger Name="OpenGate_2" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_2_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_2_1_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_2_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_2_2_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Gate_2_3_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="Gate_2_3_loc" />
		<script>
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do 
				local car = getObj(trigger:GetTriggeredObjectID(i))
				if car then 
					car:SetThrottle(0)
					car:SetCustomLinearVelocity(0)
				end 
			end

			if GetVar("OpenGate_2").AsInt == 0 then
				getObj("gate_2"):SetNodeAction(AT_RESERVED4)
				CreateEffectTTLed( "ET_PS_OPENING_GATE", CVector(868.318, 255, 885.281), Quaternion(0, 0, 0, 1), 1400)
				TActivate("OpennedGate_2")
				SetVar("OpenGate_2", 1)
			end

		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="OpennedGate_2" active="0">
		<event timeout="1.4" eventid="GE_TIME_PERIOD" />
		<script>
			local g = GetEntityByName("gate_2")
			if g then g:SetPosition(CVector(839, 245, 878)) end

			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(868.318, 255, 885.281), Quaternion(0, 0, 0, 1), 1500)
			TActivate("CloseGate_2")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CloseGate_2" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_2_1_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_2_2_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Gate_2_3_loc" />
		<script>
			local g = GetEntityByName("gate_2")
			if GetVar("OpenGate_2").AsInt == 1 then
				if g then 
					g:SetPosition(CVector(868.318, 255, 885.281)) 
					g:SetNodeAction(AT_RESERVED3)
				end
				CreateEffectTTLed( "ET_PS_CLOSED_GATE", CVector(868.318, 255, 885.281), Quaternion(0, 0, 0, 1), 1400)
				TActivate("ClosedGate_2")
				SetVar("OpenGate_2", 0)
				TActivate("OpenGate_2")
			end
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ClosedGate_2" active="0">
		<event timeout="1.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(868.318, 255, 885.281), Quaternion(0, 0, 0, 1), 1500)
		    trigger:Deactivate()
		</script>
	</trigger>

<!-- Создание разрушенной заправки -->
	<trigger Name="CreatePetrolStation_Broken" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("light_dots_brocken2", "ps_broken_1", -1, -1, CVector(919.240, 255, 1062.167), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("ruins3", "ps_broken_2", -1, -1, CVector(918.965, 255, 1052.739), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("light_dots_brocken2", "ps_broken_3", -1, -1, CVector(920.557, 255, 1015.550), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("ruins4", "ps_broken_4", -1, -1, CVector(921.418, 255, 1026.600), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("ruins6", "ps_broken_5", -1, -1, CVector(904.399, 255, 1014.341), Quaternion(-0.2340, 0.6754, -0.2205, 0.6637))
			CreateNewDummyObject("waste2", "ps_broken_6", -1, -1, CVector(914.539, 255, 1015.899), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("waste3", "ps_broken_7", -1, -1, CVector(896.741, 255, 1014.595), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("lamppost3", "ps_broken_8", -1, -1, CVector(913.270, 255, 1020.167), Quaternion(-0.5282, 0.1231, -0.0270, 0.8397))
			CreateNewDummyObject("kanistr", "ps_broken_9", -1, -1, CVector(915.667, 255.893, 1030.964), Quaternion(0.0373, -0.4233, -0.0881, 0.9009))
			CreateNewDummyObject("petrolstation", "ps_broken_10", -1, -1, CVector(911.771, 255, 1040.334), Quaternion(-0.0374, 0.6984, 0.0366, 0.7138))

			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "ps_broken_11", -1, -1, CVector(906.613, 254.846, 1025.954), Quaternion(0, 0, 0, 0), 0.1)
			CreateNewDummyObject("factory_box", "ps_broken_12", -1, -1, CVector(909.802, 255, 1022.392), Quaternion(0.0000, -0.2714, 0.0000, 0.9625))
			CreateNewDummyObject("factory_box", "ps_broken_13", -1, -1, CVector(909.648, 255, 1029.650), Quaternion(0.0000, -0.9719, 0.0000, 0.2356))

			local town = GetEntityByName ("PetrolStationTown1")
			if town then town:SetRuined(true) end
			TActivate("PetrolStation_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PetrolStation_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="PetrolStation_Build_loc" />
		<script>
			if not(GetVar("PetrolStationBuild_fuel_full_use").AsInt == 2) or not(GetVar("PetrolStationBuild_item_bolts").AsInt == 2) or not(GetVar("PetrolStationBuild_item_nuts").AsInt == 2) or not(GetVar("PetrolStationBuild_item_parts").AsInt == 1) or not(GetVar("PetrolStationBuild_item_lump").AsInt == 2) or not(GetVar("PetrolStationBuild_item_fullmaster").AsInt == 1) then
				local item_1, item_2, item_3, item_4, item_6, item_6 = "", "", "", "", "", ""
			
				if GetVar("PetrolStationBuild_fuel_full_use").AsInt ~= 2 then item_1 = "Горючее - x"..(2 - GetVar("PetrolStationBuild_fuel_full_use").AsInt).."|" end
				if GetVar("PetrolStationBuild_item_bolts").AsInt ~= 2 then item_2 = "Болты - x"..(2 - GetVar("PetrolStationBuild_item_bolts").AsInt).."|" end
				if GetVar("PetrolStationBuild_item_nuts").AsInt ~= 2 then item_3 = "Гайки - x"..(2 - GetVar("PetrolStationBuild_item_nuts").AsInt).."|" end
				if GetVar("PetrolStationBuild_item_parts").AsInt ~= 1 then item_4 = "Металлические запчасти - x1|" end
				if GetVar("PetrolStationBuild_item_lump").AsInt ~= 2 then item_5 = "Лампа накаливания - x"..(2 - GetVar("PetrolStationBuild_item_lump").AsInt).."|" end
				if GetVar("PetrolStationBuild_item_fullmaster").AsInt ~= 1 then item_6 = "Набор напильников «FullMaster» - x1" end

				local msg = item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

<!-- Создание построенной заправки -->
	<trigger Name="CreatePetrolStation" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,13 do 
				local ps = GetEntityByName("ps_broken_"..i)
				if ps then ps:Remove() end
			end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(919, 255, 1021), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(903, 255, 1016), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(918, 255, 1057), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(907, 255, 1025), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			CreateNewDummyObject("transformator2", "ps_1", -1, -1, CVector(916.621, 255, 1060.253), Quaternion(0.0009, -1.0000, 0.0000, 0.0000))
			CreateNewDummyObject("transformator1", "ps_2", -1, -1, CVector(916.807, 255, 1052.056), Quaternion(0.0000, 0.9999, -0.0022, 0.0131))
			CreateNewDummyObject("transformator2", "ps_3", -1, -1, CVector(897.391, 255, 1016.854), Quaternion(-0.0014, 0.7208, -0.0016, -0.6931))
			CreateNewDummyObject("petrolhouse3", "ps_4", -1, -1, CVector(921.690, 255, 1015.835), Quaternion(0.0000, -0.0109, 0.0000, 0.9999))
			CreateNewDummyObject("petrolhouse1", "ps_5", -1, -1, CVector(920.868, 255, 1025.625), Quaternion(0.0000, 0.6962, 0.0000, 0.7178))
			CreateNewDummyObject("petrolhouse1", "ps_6", -1, -1, CVector(908.745, 255, 1015.647), Quaternion(0.0000, -1.0000, 0.0000, -0.0087))
			CreateNewDummyObject("petrolstation", "ps_7", -1, -1, CVector(911.771, 255, 1040.334), Quaternion(0.0000, 0.6962, 0.0000, 0.7178))
			CreateNewDummyObject("lamppost3", "ps_8", -1, -1, CVector(913.649, 255, 1021.364), Quaternion(0, 0, 0, 0))
			CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_10", -1, -1, CVector(911.771, 255, 1040.334), Quaternion(0, 0, 0, 1))

			local town = GetEntityByName ("PetrolStationTown1")
			if town then town:SetRuined(false) end

			if GetVar("Generator_on").AsInt == 1 then
				TActivate("IfGenerator_On")
			end

			SetVar("PetrolStationBuild_Builden", 1)
			TDeactivate("PetrolStation_BuildInfo")
			TActivate("PlayerFuel")
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PlayerFuel" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local fuel = GetPlayerFuel() 
			local maxfuel = GetPlayerMaxFuel()
			if not(fuel == maxfuel) then
				TActivate("RegenetationPlayerFuel_Timer")
				SetVar("RegenPlayerFuel_Timer", 15)
				trigger:Deactivate()
			end
		</script>
	</trigger>

	<trigger Name="RegenetationPlayerFuel_Timer" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local t = GetVar("RegenPlayerFuel_Timer").AsInt - 1
			SetVar("RegenPlayerFuel_Timer", t)
			if 1 > GetVar("RegenPlayerFuel_Timer").AsInt then
				GetPlayerVehicle():AddModifier("fuel", "+ 1")
				SetVar("RegenPlayerFuel_Timer", 0)
				TActivate("PlayerFuel")
			else
				TActivate("rpft")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="rpft" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("RegenetationPlayerFuel_Timer")
			trigger:Deactivate()
		</script>
	</trigger>
	
<!-- Заправляем канистры -->
	<trigger Name="UseFuelNil_InPetrolStation01" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation_loc" />
		<script>
			if HasPlayerAmountOfItems("fuel_nil_use", 1) then
				local b = SpawnMessageBox( "90001" )
				if b == 1 then
					if GetPlayerMoney() >= 18500 then
						AddPlayerMoney(- 18500)
						CreateEffectTTLed( "ET_PS_FUEL_PETROL_START", CVector(906.852, 255, 1040.380), Quaternion(0, 0, 0, 1), 800)
						AddFadingMsgByStrIdFormatted("fm_fuel_petrol_start")
						SoundFadingMsg()
						RemoveItemsFromPlayerRepository("fuel_nil_use", 1)
						TActivate("SoundPetrolProcess_InPertolStation01")
						GetPlayerVehicle():SetThrottle( 0 )
						GetPlayerVehicle():SetCustomLinearVelocity( 0 )
						local town = GetEntityByName ("PetrolStationTown1")
						if town then town:SetOpenGateToPlayer(false) end
						local town1 = GetEntityByName ("Town_r0m0")
						if town1 then town1:SetOpenGateToPlayer(false) end
						SetVar("PetrolStation_Refill", 1)
						SetVar("PetrolStation_Refill_Process", 1)
						SetVar("PetrolStation_FuelTime", 20)
						trigger:Deactivate()
					else
						AddFadingMsgByStrIdFormatted("fm_player_not_money")
						SoundFadingMsg()
					end
				end
			end
		</script>
	</trigger>

	<trigger Name="SoundPetrolProcess_InPertolStation01" active="0">
		<event timeout="0.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewSgNodeObject("ET_PS_FUEL_PETROL_PROCESS", "SFPP_01", -1, -1, CVector(906.852, 255, 1040.380), Quaternion(0, 0, 0, 1), 0)
			local pl01 = GetEntityByName("LIGHTWORK01")
			if pl01 then pl01:Remove() end
			CreateNewSgNodeObject("ET_PS_LENS_D6", "PetrolLightProcess01", -1, -1, CVector(913.161, 267.300, 1033.075), Quaternion(0, 0, 0, 1), 0.6)
			TActivate("FuelFull_Timer")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="FuelFull_Timer" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local t = GetVar("PetrolStation_FuelTime").AsInt - 1
			SetVar("PetrolStation_FuelTime", t)

			if t == 0 then
				TActivate("FuelFull_InPetrolStation01")
			else
				TActivate("fft")
			end
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="fft" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("FuelFull_Timer")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="FuelFull_InPetrolStation01" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local Chest = CreateNewObject{prototypeName = "fuelChest", objName = "FuelBox"..random(10000)}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(912.560, 256, 1036.056))

			local fuel = CreateNewObject{prototypeName = "fuel_full_use", objName = "FuelItem"..random(10000), belong = 1100 }
			local fuelId = GetEntityByID(fuel)

			local ChestPos = ChestId:GetPosition()
			ChestPos.y = ChestPos.y + 1
			ChestId:SetPosition(ChestPos)

			if ChestId and fuelId then
				ChestId:AddChild(fuelId)
			end

			local sd01 = GetEntityByName("SFPP_01")
			if sd01 then sd01:Remove() end

			local pl01 = GetEntityByName("PetrolLightProcess01")
			if pl01 then pl01:Remove() end

			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK01", -1, -1, CVector(913.161, 267.300, 1033.075), Quaternion(0, 0, 0, 1), 0.6)
			CreateEffectTTLed( "ET_PS_FUEL_PETROL_END", CVector(906.852, 255, 1040.380), Quaternion(0, 0, 0, 1), 1000)
			AddFadingMsgByStrIdFormatted("fm_fuel_petrol_end")
			SoundFadingMsg()

			local town = GetEntityByName ("PetrolStationTown1")
			if town then town:SetOpenGateToPlayer(true) end

			local town1 = GetEntityByName ("Town_r0m0")
			if town1 then town1:SetOpenGateToPlayer(true) end

			TActivate("UseFuelNil_InPetrolStation01")
			TDeactivate("FuelFull_Timer")
			TDeactivate("fft")
			SetVar("PetrolStation_Refill", 0)
			SetVar("PetrolStation_Refill_Process", 0)
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Инвентарь игрока 1 лвл -->
	<trigger Name="CreateInventory_lvl_1" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("conteiner", "cont_1_lvl_1", -1, -1, CVector(904.558, 256.342, 986.595), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_2_lvl_1", -1, -1, CVector(904.558, 256.342, 989.367), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_3_lvl_1", -1, -1, CVector(904.558, 259.006, 988.140), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_4_lvl_1", -1, -1, CVector(901.777, 258.173, 986.036), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_5_lvl_1", -1, -1, CVector(904.434, 258.173, 986.036), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_6_lvl_1", -1, -1, CVector(907.212, 258.173, 986.036), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_7_lvl_1", -1, -1, CVector(901.712, 258.173, 990.186), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_8_lvl_1", -1, -1, CVector(904.369, 258.173, 990.186), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("cargo", "cont_9_lvl_1", -1, -1, CVector(907.147, 258.173, 990.186), Quaternion(0, 0, 0, 0))

			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "cont_1_build_lvl_2", -1, -1, CVector(927.950, 254.691, 988.440), Quaternion(0, 0, 0, 0), 0.1)
			CreateNewDummyObject("conteiner", "cont_2_build_lvl_2", -1, -1, CVector(919.387, 256.310, 990.120), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_3_build_lvl_2", -1, -1, CVector(919.581, 257.954, 993.320), Quaternion(0.1741, 0.6853, 0.1741, 0.6853))
			CreateNewDummyObject("metal_plate1", "cont_4_build_lvl_2", -1, -1, CVector(918.269, 257.231, 987.745), Quaternion(-0.4208, -0.0040, -0.0038, 0.9071))

			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "chestScavs_point", -1, -1, CVector(945.013, 254.586, 982.992), Quaternion(0, 0, 0, 0), 0.1)

			local Chest = CreateNewObject{prototypeName = "opacityChest", objName = "PlayerInventory_Lvl_1"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(903.080, 255, 988.017))

			local start_items = {"item_opacity", "hornet01", "specter01", "specter01", "specter01", "pkt01", "vector01", "vulcan01", "scrap_metal_use", "scrap_metal_use", "scrap_metal_use", "scrap_metal_use", "scrap_metal_use", "machinery_use", "machinery_use", "machinery_use", "oil_use", "fuel_nil_use", "fuel_nil_use", "ammo_chest_machinegun", "ammo_chest_machinegun", "ammo_chest_shotgun"}
			local items = getn(start_items)

			for i=1,items do
				local Item = CreateNewObject{prototypeName = start_items[i], objName = "StartItem"..random(10000), belong = 1100}
				local ItemId = GetEntityByID(Item)
				if ChestId and ItemId then
					ChestId:AddChild(ItemId)
				end
			end	

			TActivate("Inventory_lvl_2_BuildInfo")
			TActivate("ChestScavs_BuildInfo")
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Inventory_lvl_2_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Inventory_Build_lvl_2_loc" />
		<script>
			if not(GetVar("Inventory_lvl_2_item_drill").AsInt == 1) or not(GetVar("Inventory_lvl_2_item_screws").AsInt == 2) or not(GetVar("Inventory_lvl_2_item_nails").AsInt == 2) or not(GetVar("Inventory_lvl_2_item_screw").AsInt == 1) or not(GetVar("Inventory_lvl_2_item_roulet").AsInt == 1) or not(GetVar("Inventory_lvl_2_item_pena").AsInt == 1) then
				local item_1, item_2, item_3, item_4, item_5, item_6 = "", "", "", "", "", ""
			
				if GetVar("Inventory_lvl_2_item_drill").AsInt ~= 1 then item_1 = "Дрель - x1|" end
				if GetVar("Inventory_lvl_2_item_screws").AsInt ~= 2 then item_2 = "Саморезы - x"..(2 - GetVar("Inventory_lvl_2_item_screws").AsInt).."|" end
				if GetVar("Inventory_lvl_2_item_nails").AsInt ~= 2 then item_3 = "Гвозди - x"..(2 - GetVar("Inventory_lvl_2_item_nails").AsInt).."|" end
				if GetVar("Inventory_lvl_2_item_screw").AsInt ~= 1 then item_4 = "Отвертка - x1|" end
				if GetVar("Inventory_lvl_2_item_roulet").AsInt ~= 1 then item_5 = "Рулетка - x1|" end
				if GetVar("Inventory_lvl_2_item_pena").AsInt ~= 1 then item_6 = "Монтажная пена - x1" end

				local msg = item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

<!-- Инвентарь игрока 2 лвл -->
	<trigger Name="CreateInventory_lvl_2" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,4 do 
				local cont = GetEntityByName("cont_"..i.."_build_lvl_2")
				if cont then cont:Remove() end
			end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(920, 255, 989), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			CreateNewDummyObject("conteiner", "cont_1_lvl_2", -1, -1, CVector(919.893, 256.310, 985.711), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_2_lvl_2", -1, -1, CVector(919.893, 256.310, 988.527), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_3_lvl_2", -1, -1, CVector(919.893, 256.310, 991.383), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("conteiner", "cont_4_lvl_2", -1, -1, CVector(921.150, 258.963, 988.286), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("conteiner", "cont_5_lvl_2", -1, -1, CVector(918.500, 258.963, 988.286), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_6_lvl_2", -1, -1, CVector(923.139, 258.173, 985.820), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_7_lvl_2", -1, -1, CVector(923.139, 258.173, 988.566), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_8_lvl_2", -1, -1, CVector(923.139, 258.173, 991.369), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_9_lvl_2", -1, -1, CVector(916.561, 258.173, 985.803), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_10_lvl_2", -1, -1, CVector(916.561, 258.173, 988.549), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("cargo", "cont_11_lvl_2", -1, -1, CVector(916.561, 258.173, 991.352), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))

			local Chest = CreateNewObject{prototypeName = "opacityChest", objName = "PlayerInventory_Lvl_2"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(919, 255, 987))

			local Item = CreateNewObject{prototypeName = "item_opacity", objName = "ItemOpacity_PlayerInventory_Lvl_2", belong = 1100}
			local ItemId = GetEntityByID(Item)
			if ChestId and ItemId then
				ChestId:AddChild(ItemId)
			end
			
			SetVar("Inventory_lvl_2_Builden", 1)
			TDeactivate("Inventory_lvl_2_BuildInfo")
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="ChestScavs_Build_loc" />
		<script>
			if not(GetVar("ChestScavs_electronics").AsInt == 2) or not(GetVar("ChestScavs_machinery").AsInt == 1) or not(GetVar("ChestScavs_books").AsInt == 1) or not(GetVar("ChestScavs_bottles").AsInt == 1) or not(GetVar("ChestScavs_details").AsInt == 1) or not(GetVar("ChestScavs_item_ananaga").AsInt == 1) or not(GetVar("ChestScavs_item_rolex").AsInt == 1) or not(GetVar("ChestScavs_item_chain_gold").AsInt == 3) or not(GetVar("ChestScavs_item_skullring").AsInt == 2) then
				local item_1, item_2, item_3, item_4, item_5, item_6, item_7, item_8, item_9 = "", "", "", "", "", "", "", "", ""
		
				if GetVar("ChestScavs_electronics").AsInt ~= 2 then item_1 = "Электроника - x"..(2 - GetVar("ChestScavs_electronics").AsInt).."|" end
				if GetVar("ChestScavs_machinery").AsInt ~= 1 then item_2 = "Рабочее оборудование - x1|" end
				if GetVar("ChestScavs_books").AsInt ~= 1 then item_3 = "Книги - x1|" end
				if GetVar("ChestScavs_bottles").AsInt ~= 1 then item_4 = "Бутылки - x1|" end
				if GetVar("ChestScavs_details").AsInt ~= 1 then item_5 = "Детали - x1|" end
				if GetVar("ChestScavs_item_ananaga").AsInt ~= 1 then item_6 = "Ананага - x1|" end
				if GetVar("ChestScavs_item_rolex").AsInt ~= 1 then item_7 = "Золотые часы - x1|" end
				if GetVar("ChestScavs_item_chain_gold").AsInt ~= 3 then item_8 = "Золотая цепочка - x"..(3 - GetVar("ChestScavs_item_chain_gold").AsInt).."|" end
				if GetVar("ChestScavs_item_skullring").AsInt ~= 2 then item_9 = "Золотое кольцо с черепом - x"..(2 - GetVar("ChestScavs_item_skullring").AsInt) end
	
				local msg = item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6..""..item_7..""..item_8..""..item_9

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

<!-- Создание ящика диких -->
	<trigger Name="CreateChestScavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local p = GetEntityByName("chestScavs_point")
			if p then p:Remove() end
			
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(952, 255, 983), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			CreateNewDummyObject("conteiner", "chestScavs_1", -1, -1, CVector(953.069, 258.984, 983.179), Quaternion(0.0000, 0.7071, 0.0000, 0.7072))
			CreateNewDummyObject("conteiner", "chestScavs_2", -1, -1, CVector(950.305, 256.313, 983.094), Quaternion(0.0000, 0.7071, 0.0000, 0.7072))
			CreateNewDummyObject("conteiner", "chestScavs_3", -1, -1, CVector(953.068, 256.313, 983.179), Quaternion(0.0000, 0.7071, 0.0000, 0.7072))
			CreateNewDummyObject("mikro", "chestScavs_4", -1, -1, CVector(950.613, 257.643, 979.958), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("rabochee_oborudovanie", "chestScavs_5", -1, -1, CVector(951.093, 257.803, 981.900), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("mikro", "chestScavs_6", -1, -1, CVector(949.831, 257.723, 981.059), Quaternion(0.0247, 0.7067, 0.0247, 0.7067))
			CreateNewDummyObject("books", "chestScavs_7", -1, -1, CVector(950.852, 258.207, 984.052), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("bottles", "chestScavs_8", -1, -1, CVector(950.304, 258.293, 986.024), Quaternion(0, 0, 0, 0))
			CreateNewSgNodeObject("detail", "chestScavs_9", -1, -1, CVector(949.501, 257.863, 984.121), Quaternion(0.0129, 0.0119, 0.7131, 0.7008), 0.2)

			SetVar("ChestScavs_Builden", 1)
			TDeactivate("ChestScavs_BuildInfo")
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_Start" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("ChestScavs_Search").AsInt == 1 then SetVar("ChestScavs_time_hour", 0) SetVar("ChestScavs_time_minute", 15) SetVar("ChestScavs_time_second", 0) end
			if GetVar("ChestScavs_Search").AsInt == 2 then SetVar("ChestScavs_time_hour", 0) SetVar("ChestScavs_time_minute", 30) SetVar("ChestScavs_time_second", 0) end
			if GetVar("ChestScavs_Search").AsInt == 3 then SetVar("ChestScavs_time_hour", 0) SetVar("ChestScavs_time_minute", 45) SetVar("ChestScavs_time_second", 0) end
			if GetVar("ChestScavs_Search").AsInt == 4 then SetVar("ChestScavs_time_hour", 0) SetVar("ChestScavs_time_minute", 25) SetVar("ChestScavs_time_second", 0) end
			if GetVar("ChestScavs_Search").AsInt == 5 then SetVar("ChestScavs_time_hour", 0) SetVar("ChestScavs_time_minute", 50) SetVar("ChestScavs_time_second", 0) end
			if GetVar("ChestScavs_Search").AsInt == 6 then SetVar("ChestScavs_time_hour", 1) SetVar("ChestScavs_time_minute", 0) SetVar("ChestScavs_time_second", 0) end

			TActivate("ChestScavs_Timer")

			AddFadingMsgByStrIdFormatted("fm_chest_scavs_start")
			SoundFadingMsg()
			TActivate("ChestScavs_StartSound")
			TActivate("ChestScavsTimeMsgActivate")
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_StartSound" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectInsertedInRemove("ET_S_CHEST_SCAVS_START", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_Timer" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local hour = GetVar("ChestScavs_time_hour").AsInt
			local min = GetVar("ChestScavs_time_minute").AsInt
			local sec = GetVar("ChestScavs_time_second").AsInt
			
			local nulH, nulM, nulS = "", "", ""

			if 10 > hour then nulH = 0 end
			if 10 > min then nulM = 0 end
			if 10 > sec then nulS = 0 end

			local Msg = nulH..hour..":"..nulM..min..":"..nulS..sec
			SetVar("ChestScavs_time_msg", Msg)

			if not(0 > hour) and not(0 > min) then
				sec = sec - 1
				SetVar("ChestScavs_time_second", sec)
				if 0 > sec then
					SetVar("ChestScavs_time_second", 59)
					min = min - 1
					SetVar("ChestScavs_time_minute", min)
				end
				if 0 > min then
					SetVar("ChestScavs_time_minute", 59)
					hour = hour - 1
					SetVar("ChestScavs_time_hour", hour)
				end
			end

			if 0 > hour and 0 > min and 0 > sec then
				SetVar("ChestScavs_time_hour", 0)
				SetVar("ChestScavs_time_minute", 0)
				SetVar("ChestScavs_time_second", 0)
				SetVar("ChestScavs_time_msg", "0")
				TActivate("CreateScavMove")
				TDeactivate("ChestScavs_Time")
			else
				TActivate("cst")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="cst" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("ChestScavs_Timer")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavsTimeMsgActivate" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("ChestScavs_Time")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_Time" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="ChestScavs_Build_loc" />
		<script>
			if not(GetVar("ChestScavs_time_msg").AsString == "0") then
				AddFadingMsgByStrIdFormatted("fm_chest_scavs_timer", GetVar("ChestScavs_time_msg").AsString)
			end
		</script>
	</trigger>

	<trigger Name="CreateScavMove" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local pos = {CVector(1879, 255, 1370), CVector(200, 255, 388)}
			local rot = {Quaternion(-0.014, -0.506, 0.003, 0.862), Quaternion(-0.009, 0.703, 0.005, 0.711)}
			local r = random(2)
			SetVar("Scav_Move", r)

			local list = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local model = list[random(getn(list))]

			CreateVehicleEx(model, "ScavMoveToChest", pos[r], 1090)

			local veh = GetEntityByName("ScavMoveToChest")
			if veh then
				GiveGunsForVehicle(veh, 1)
				veh:SetExternalPathByName("veh_paths_to_gate_"..r)
				veh:SetCruisingSpeed(30)
				veh:SetRotation(rot[r])
				veh:SetRandomSkin()
				veh:setGodMode(1)
			end

			AddFadingMsgByStrIdFormatted("fm_chest_scavs_scav_move")
			SoundFadingMsg()

			TActivate("ScavMoveReached")
			TActivate("ChestScavs_EntersLoc")
			TDeactivate("ChestScavs_Timer")
			TDeactivate("cst")
			TDeactivate("ChestScavs_Time")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavMoveReached" active="0">
		<event eventid="GE_TARGET_REACHED" ObjName="ScavMoveToChest"/>
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			println(count)

			local veh = GetEntityByName("ScavMoveToChest")
			if veh then
				if count == 1 then
					veh:SetExternalPathByName("veh_paths_to_inventory_"..GetVar("Scav_Move").AsInt)
					veh:SetCruisingSpeed(22)
				elseif count == 2 then
						veh:SetExternalPathByName("veh_paths_to_inventory")
						veh:SetCruisingSpeed(8)
				elseif count == 3 then
					if GetVar("Scav_Move").AsInt == 1 then
						veh:SetExternalPathByName("veh_paths_to_gate_2_from_inventory")
					else
						veh:SetExternalPathByName("veh_paths_to_gate_1_from_inventory")
					end
					veh:SetCruisingSpeed(3)
					TActivate("ScavMoveSpeed")
				elseif count == 4 then
					if GetVar("Scav_Move").AsInt == 1 then
						veh:SetExternalPathByName("veh_paths_to_gate_2_from_inventory_2_2")
					else
						veh:SetExternalPathByName("veh_paths_to_gate_1_from_inventory_1_1")
					end
					veh:SetCruisingSpeed(22)
				elseif count == 5 then
					veh:SetExternalPathByName("veh_paths_to_end_"..GetVar("Scav_Move").AsInt)
					veh:SetCruisingSpeed(30)
				elseif count == 6 then 
					SetVar("Scav_Move", 0)
					veh:Remove()
					trigger:Deactivate()
				end
			end
		</script>
	</trigger>

	<trigger Name="ScavMoveSpeed" active="0">
		<event timeout="15" eventid="GE_TIME_PERIOD" />
		<script>
			local sv = GetEntityByName("ScavMoveToChest")
			if sv then sv:SetCruisingSpeed(8) end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_EntersLoc" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ChestScavs_loc" />
		<script>
			TActivate("ChestScavs_CreateLoot")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ChestScavs_CreateLoot" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local lootlist
			local loot_count

			if GetVar("ChestScavs_Search").AsInt == 0 then SetVar("ChestScavs_Search", 1) end
			
			if GetVar("ChestScavs_Search").AsInt == 1 then
				lootlist = {"potato", "wirewood", 
							"fuel_nil_use", 
							"item_insulation", "item_nails", "item_nuts", "item_scotch", 
							"item_tplug", "item_usb", "item_wires",
							"item_battery_aa", 
							"item_hunter_spich", "item_lighter", "item_spich", "item_wd40_100", 
							"item_salt", "item_soap", "item_tb", 
							"item_medical_tools", 
							"item_zapal", 
							"hornet01", "american_hornet01", 
							"cooling_system_explosion", "firing_rate_guns", "firing_rate_energy", "grouping_angle_guns", "add_damage_explosion", "firing_range_guns", "additional_fuel_tank", "additional_torque", "additional_stability"}
				loot_count = random(3)
			elseif GetVar("ChestScavs_Search").AsInt == 2 then
				lootlist = {"scrap_metal", "oil", "bottle", "fuel", "machinery", "book", "tobacco", "doski", "details", "shkatulka",
							"scrap_metal_use", "machinery_use", "oil_use", "fuel_full_use",
							"item_key_gate_thetown",
							"item_bolts", "item_hose", "item_kek", "item_parts", "item_poheram", "item_tube", "item_plex",
							"item_cable", "item_cooler", "item_cpu", "item_electronics_components", "item_energo_lump", "item_gazan", "item_geiger", "item_hdd", "item_helix", "item_phone", "item_plate", "item_svech", "item_ultra_lump",
							"item_accum", "item_powerbank",
							"item_survl", "item_wd40_400", "item_gunpowder",
							"item_alkani", "item_hlor", "item_paper",
							"item_disk", "item_flashdrive", "item_manual", 
							"item_aquapeps", "item_c6h8o6", "item_suringe",
							"item_vodka", "item_monolit", "item_kaktus", "item_carsen",
							"item_awl", "item_leatherman", "item_metalscissors", "item_nippers", "item_pliers_round", "item_screw_flat_long", "item_toolset",
							"item_chain",
							"specter01", "pkt01", "kord01", "storm01", "vector01", "vulcan01", "bumblebee01", "someTurboAccelerationPusher",
							"ammo_chest_machinegun", "ammo_chest_shotgun",
							"cooling_system_guns", "cooling_system_energy", "add_damage_guns", "add_damage_energy", "cooling_system_guns2", "firing_rate_guns2", "additional_durability", "additional_fuel_tank2"}
				loot_count = random(2,4)
			elseif GetVar("ChestScavs_Search").AsInt == 3 then
				lootlist = {"electronics", "electronics_use", 
							"item_datchik", "item_military_tube", "item_pena", "item_thermometer",
							"item_bp", "item_drill", "item_engine", "item_iridiym", "item_lcd", "item_military_cable", "item_tetris",
							"item_car_battery", "item_cyclon", "item_green_battery",
							"item_dry", "item_prisadka", "item_propan", "item_termit", "item_trotile", "item_gunpowder",
							"item_diary", "item_diary_s", "item_disk_exmachina", "item_flashdrive", "item_manual", "item_sas", "item_ssd",
							"item_oftalmaskop", "item_aquapeps",
							"item_emre_kara", "item_filter", "item_fitanyashka", "item_pants40grn", "item_paracord", "item_vitalik", "item_waterfilter", "item_monolit", "item_kaktus", "item_keqing", "item_carsen", "item_metallodetector",
							"item_awl", "item_buldex", "item_fullmaster", "item_handrill", "item_pipe_wrench", "item_ratchet_wrench", "item_sewing_kit", 
							"item_cat", "item_chain_gold", "item_chiken", "item_ex", "item_rolex", "item_skullring", "item_teapon", "item_woodclock",
							"someTurboAccelerationPusher", "maxim01", "fagot01", "flag01", "rainmetal01", "elephant01", "omega01", "cyclops01", "octopus01", "marsSideGun", "hunterSideGun", "hammer01",
							"ammo_chest_artillerygun", "ammo_chest_heavygun", "ammo_chest_machinegun", "ammo_chest_rocketgun", "ammo_chest_shotgun", "ammo_ballon_lasergun", "ammo_ballon_plasmagun", 
							"cooling_system_guns_and_firing_rate_guns", "cooling_system_energy_and_firing_rate_energy", "cooling_system_explosion_and_firing_rate_explosion", "firing_rate_guns_and_add_damage_guns", "firing_rate_energy_and_add_damage_energy", "firing_rate_explosion_and_add_damage_explosion", "add_damage_guns_and_grouping_angle_guns", "add_damage_energy_and_firing_rate_energy", "add_damage_explosion_firing_rate_explosion", "additional_durability2", "add_speed_and_torque", "add_stability_and_speed", "add_torque_and_stability", "additional_fuel_tank2_add_damage_guns"}
				loot_count = random(3,5)
			elseif GetVar("ChestScavs_Search").AsInt == 4 then
				lootlist = {"scrap_metal", "oil", "bottle", "fuel", "tobacco", "doski", "details",
							"scrap_metal_use", "oil_use",
							"item_key_gate_thetown",
							"item_bolts", "item_hose", "item_kek", "item_parts", "item_poheram", "item_tube", "item_plex",
							"item_cable", "item_cooler", "item_cpu", "item_dvd", "item_electronics_components", "item_energo_lump", "item_gazan", "item_geiger", "item_kondesators", "item_magnet", "item_ram", "item_rele", "item_helix", "item_phone", "item_plate", "item_svech", "item_ultra_lump",
							"item_accum",
							"item_survl", "item_wd40_400", "item_zibbo", "item_gunpowder",
							"item_alkani", "item_hlor", "item_paper", "item_soda", "item_toothpaste",
							"item_h2o2", "item_naci", "item_suringe",
							"item_vodka", "item_monolit", "item_carsen",
							"item_metalscissors", "item_nippers", "item_pliers", "item_screw_flat",
							"item_chain",
							"specter01", "pkt01", "storm01", "vector01", "vulcan01", "bumblebee01",
							"ammo_chest_machinegun", "ammo_chest_shotgun",
							"cooling_system_guns", "cooling_system_energy", "add_damage_guns", "add_damage_energy", "additional_durability"}
				loot_count = random(2,4)
			elseif GetVar("ChestScavs_Search").AsInt == 5 or GetVar("ChestScavs_Search").AsInt == 6 then
				lootlist = {"item_datchik", "item_pena", "item_thermometer",
							"item_converter", "item_engine", "item_iridiym", "item_tetris", "item_virtex", "item_vpx",
							"item_cyclon", "item_car_battery",
							"item_prisadka", "item_termit", "item_gunpowder",
							"item_disk_exmachina", "item_rozvidka", "item_sas", "item_ssd", "item_ananaga",
							"item_oftalmaskop", 
							"item_airfilter", "item_fitanyashka", "item_paracord", "item_vitalik", "item_waterfilter", "item_metallodetector",
							"item_buldex", "item_handrill", "item_pipe_wrench", "item_ratchet_wrench", 
							"item_cat", "item_chain_gold", "item_chiken", "item_lion", "item_rolex", "item_skullring", "item_woodclock", 
							"fagot01", "flag01", "rainmetal01", "elephant01", "odin01", "omega01", "cyclops01", "octopus01", "marsSideGun", "hunterSideGun", "hammer01", "hailSideGun", "zeusSideGun", "ammo_ballon_lasergun", "ammo_ballon_plasmagun",
							"cooling_system_guns_and_firing_rate_guns", "cooling_system_energy_and_firing_rate_energy", "cooling_system_explosion_and_firing_rate_explosion", "firing_rate_guns_and_add_damage_guns", "firing_rate_energy_and_add_damage_energy", "firing_rate_explosion_and_add_damage_explosion", "add_damage_guns_and_grouping_angle_guns", "add_damage_energy_and_firing_rate_energy", "add_damage_explosion_firing_rate_explosion", "add_speed_and_torque", "add_stability_and_speed", "add_torque_and_stability", "additional_fuel_tank2_add_damage_guns"}
				if GetVar("ChestScavs_Search").AsInt == 5 then loot_count = random(3,6) end 
				if GetVar("ChestScavs_Search").AsInt == 6 then loot_count = random(4,6) end 
			end
	
			local loot = getn(lootlist)

			local Chest = CreateNewObject{prototypeName = "opacityChest", objName = "ChestScavsForLoot"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(950, 255, 982))

			for i=1,loot_count do
				local Item = CreateNewObject{prototypeName = lootlist[random(loot)], objName = "ChestScavsItem"..random(10000), belong = 1100}
				local ItemId = GetEntityByID(Item)
				if ChestId and ItemId then
					ChestId:AddChild(ItemId)
				end
			end 

			SetVar("ChestScavs_Loot", 1)

			AddFadingMsgByStrIdFormatted("fm_chest_scavs_loot")
			SoundFadingMsg()
			CreateEffectInsertedInRemove("ET_S_CHEST_SCAVS_END", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			TActivate("RemoveLootOrNot")
			TDeactivate("ChestScavs_Timer")
			TDeactivate("cst")
			TDeactivate("ChestScavs_Time")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RemoveLootOrNot" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ChestScavs_Build_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="ChestScavs_Build_loc" />
		<script>
			local l = GetEntityByName("ChestScavsForLoot")
			if not(l) then
				SetVar("ChestScavs_Search", 0)
				SetVar("ChestScavs_Loot", 0)
				trigger:Deactivate()
			end
		</script>
	</trigger>

<!-- Туннель -->
	<trigger Name="CreateZavalTunel_1" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("big_crag_6", "tun_zaval_1", -1, -1, CVector(820.647, 253.415, 1056.661), Quaternion(0.0018, -0.6772, -0.0013, 0.7358))
			CreateNewDummyObject("big_stone1", "tun_zaval_2", -1, -1, CVector(824.516, 255, 1048.920), Quaternion(0.0000, 0.4656, 0.0000, 0.8850))
			CreateNewDummyObject("boulder_stone1", "tun_zaval_3", -1, -1, CVector(827.759, 255, 1059.563), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("big_crag_12", "tun_zaval_4", -1, -1, CVector(799.706, 261.391, 1052.242), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("r2_crag_copped_8", "tun_zaval_5", -1, -1, CVector(810.797, 256.010, 1052.835), Quaternion(0.0000, -0.6756, 0.0000, 0.7373))
			CreateNewDummyObject("r2_crag_copped_8", "tun_zaval_6", -1, -1, CVector(812.783, 255, 1059.407), Quaternion(-0.0020, 0.0698, -0.0085, 0.9975))
			CreateNewDummyObject("big_stone2", "tun_zaval_7", -1, -1, CVector(818.173, 256.995, 1047.592), Quaternion(0, 0, 0, 0))
			TActivate("Tunel_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateZavalTunel_2" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,7 do
				local s = GetEntityByName("tun_zaval_"..i)
				if s then s:Remove() end
			end

			CreateEffectTTLed( "ET_PS_BRIDGE_EXP_MAIN", CVector(814, 256, 1053), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_VEH_EXP2_MED", CVector(814, 256, 1053), Quaternion(0, 0, 0, 1), 6000)

			CreateNewDummyObject("sml_stone3", "tun_stone_1", -1, -1, CVector(817.248, 256.689, 1059.013), Quaternion(0.0000, -0.2122, 0.0000, 0.9772))
			CreateNewDummyObject("big_stone5", "tun_stone_2", -1, -1, CVector(814.797, 256.485, 1049.719), Quaternion(0.0000, 0.4027, 0.0000, 0.9153))
			CreateNewDummyObject("big_stone2", "tun_stone_3", -1, -1, CVector(806.348, 256.890, 1059.297), Quaternion(0.0281, -0.6507, -0.0241, 0.7585))
			CreateNewDummyObject("metal_plate3", "tun_stone_4", -1, -1, CVector(799.657, 257.704, 1055.945), Quaternion(-0.0132, -0.7021, -0.0043, 0.7119))
			CreateNewDummyObject("r2_crag_copped_7", "tun_stone_5", -1, -1, CVector(780.398, 253.335, 1055.853), Quaternion(0.0000, 0.0175, 0.0000, 0.9998))
			CreateNewDummyObject("boulder_stone1", "tun_stone_6", -1, -1, CVector(803.465, 257.102, 1048.430), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("big_stone2", "tun_stone_7", -1, -1, CVector(799.237, 257.973, 1050.459), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("boulder_stone2", "tun_stone_8", -1, -1, CVector(797.746, 257.481, 1059.265), Quaternion(-0.0850, 0.0000, 0.0000, 0.9964))
			CreateNewDummyObject("boulder_stone2", "tun_stone_9", -1, -1, CVector(808.775, 256.744, 1049.625), Quaternion(0.0000, -0.2567, 0.0000, 0.9665))
			CreateNewDummyObject("boulder_stone4", "tun_stone_10", -1, -1, CVector(810.512, 256.861, 1056.990), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("sml_stone3", "tun_stone_11", -1, -1, CVector(809.551, 256.930, 1060.032), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("boulder_stone2", "tun_stone_12", -1, -1, CVector(813.500, 256.750, 1060.253), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("boulder_stone1", "tun_stone_13", -1, -1, CVector(814.457, 256.599, 1054.568), Quaternion(0.0000, 0.2250, 0.0000, 0.9744))
			SetVar("Tunel_Builden", 1)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="RemoveZavalTunel_2" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,13 do
				local s = GetEntityByName("tun_stone_"..i)
				if s then s:Remove() end
			end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(807, 256, 1054), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(778, 256, 1054), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_VEH_EXP2_MED", CVector(810, 256, 1054), Quaternion(0, 0, 0, 1), 6000)
			SetVar("Tunel_Builden", 2)
		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Tunel_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Tunel_Build_loc" />
		<script>
			if not(GetVar("Tunel_item_vitalik").AsInt == 1) or not(GetVar("Tunel_item_handrill").AsInt == 1) or not(GetVar("Tunel_item_metalscissors").AsInt == 1) or not(GetVar("Tunel_item_hose").AsInt == 1) or not(GetVar("Tunel_item_kek").AsInt == 1) or not(GetVar("Tunel_item_toolset").AsInt == 1) or not(GetVar("Tunel_item_electronics_components").AsInt == 2) or not(GetVar("Tunel_item_wires").AsInt == 1) or not(GetVar("Tunel_item_nippers").AsInt == 1) or not(GetVar("Tunel_item_pliers_round").AsInt == 1) then
				local item_1, item_2, item_3, item_4, item_5, item_6, item_7 = "", "", "", "", "", "", ""

				if GetVar("Tunel_Builden").AsInt == 0 then
					if GetVar("Tunel_item_vitalik").AsInt ~= 1 then item_1 = "Кувалда «Vitalik» - x1|" end
				elseif GetVar("Tunel_Builden").AsInt == 1 then
					if GetVar("Tunel_item_handrill").AsInt ~= 1 then item_1 = "Ручная дрель - x1|" end
					if GetVar("Tunel_item_metalscissors").AsInt~= 1 then item_2 = "Ножницы для резки металла - x1|" end
				elseif GetVar("Tunel_Builden").AsInt == 2 then
					if GetVar("Tunel_item_hose").AsInt ~= 1 then item_1 = "Гофрированный шланг - x1|" end
					if GetVar("Tunel_item_kek").AsInt ~= 1 then item_2 = "Лента «KEK» - x1|" end
					if GetVar("Tunel_item_toolset").AsInt ~= 1 then item_3 = "Набор инструментов - x1|" end
					if GetVar("Tunel_item_electronics_components").AsInt ~= 2 then item_4 = "Компоненты электроники - x"..(2 - GetVar("Tunel_item_electronics_components").AsInt).."|" end
					if GetVar("Tunel_item_wires").AsInt ~= 1 then item_5 = "Провода - x1|" end
					if GetVar("Tunel_item_nippers").AsInt ~= 1 then item_6 = "Кусачки - x1|" end
					if GetVar("Tunel_item_pliers_round").AsInt ~= 1 then item_7 = "Круглогубцы - x1" end
				end

				local msg = item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6..""..item_7

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

	<trigger Name="CreateGateTunel" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(805, 256, 1054), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			CreateNewDummyObject("factorytunnelgate", "tunel_gate", -1, -1, CVector(815.136, 259.615, 1054.424), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
		    getObj("tunel_gate"):SetNodeAction(AT_STAND2)
			SetVar("Tunel_Builden", 3)
			TDeactivate("Tunel_BuildInfo")
			TActivate("Tunel")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Tunel" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="FromTunel" />
		<script>
			local maxhp = GetPlayerMaxHealth()
			local hp = GetPlayerHealth() 

			if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
				local Plf = GetPlayerVehicle()
				if Plf then
					Plf:SetThrottle(0)
					Plf:SetCustomLinearVelocity(0)
				end
				if maxhp > hp then
					SpawnMessageBox("90003")
				else
					local b = SpawnMessageBox("90002")
					if b == 1 then
						TActivate("ExitMap")
						TActivate("cutEntersToTunnel")
					end
				end
			end
		</script>
	</trigger>

<!-- Генератор -->
	<trigger Name="CreateGeneratorPoint" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "generator_point", -1, -1, CVector(824.307, 253.500, 999.765), Quaternion(0, 0, 0, 0), 0.15)
			CreateNewDummyObject("ore_mine_tower", "mine_tower", -1, -1, CVector(776.134, 255, 1005.534), Quaternion(0.0000, -0.0112, 0.0037, 0.9999))
			TActivate("Generator_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Generator_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Generator_Build_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Generator_Build_lvl_2_loc" />
		<script>
			local item_0, item_1, item_2, item_3, item_4, item_5, item_6 = "", "", "", "", "", "", ""
			local t = trigger:GetCallObjName()

			if GetVar("Generator_lvl").AsInt == 0 and t == "Generator_Build_loc" or GetVar("Generator_lvl").AsInt == 1 and t == "Generator_Build_loc" or GetVar("Generator_lvl").AsInt == 2 and t == "Generator_Build_lvl_2_loc" then
				if GetVar("Generator_lvl").AsInt == 0 then
					if GetVar("Generator_lvl_1_item_svech").AsInt ~= 1 then item_1 = "Свеча зажигания - x1|" end
					if GetVar("Generator_lvl_1_item_engine").AsInt ~= 1 then item_2 = "Двигатель - x1|" end
					if GetVar("Generator_lvl_1_doski").AsInt ~= 1 then item_3 = "Доски - x1|" end
					if GetVar("Generator_lvl_1_oil").AsInt ~= 2 then item_4 = "Нефть - x"..(2 - GetVar("Generator_lvl_1_oil").AsInt) end
				elseif GetVar("Generator_lvl").AsInt == 1 then
					if GetVar("Generator_time_work_second").AsInt == 0 and GetVar("Generator_time_work_minute").AsInt == 0 and GetVar("Generator_time_work_hour").AsInt == 0 then
						if GetVar("Generator_lvl_2_item_fuel_full").AsInt ~= 1 then item_0 = "Канистра топлива - x1|" end
					end
					if GetVar("Generator_lvl_1_item_svech").AsInt ~= 3 then item_1 = "Свеча зажигания - x"..(3 - GetVar("Generator_lvl_1_item_svech").AsInt).."|" end
					if GetVar("Generator_lvl_1_item_engine").AsInt ~= 2 then item_2 = "Двигатель - x1|" end
					if GetVar("Generator_lvl_2_item_rele").AsInt ~= 2 then item_3 = "Реле - x"..(2 - GetVar("Generator_lvl_2_item_rele").AsInt).."|" end
					if GetVar("Generator_lvl_2_item_wires").AsInt ~= 4 then item_4 = "Провода - x"..(4 - GetVar("Generator_lvl_2_item_wires").AsInt).."|" end
					if GetVar("Generator_lvl_2_item_buldex").AsInt ~= 1 then item_5 = "Кабелерез «Bulbex» - x1" end
				elseif GetVar("Generator_lvl").AsInt == 2 and t == "Generator_Build_lvl_2_loc" then
					if GetVar("Generator_lvl_3_item_bp").AsInt ~= 2 then item_1 = "Блок питания - x"..(2 - GetVar("Generator_lvl_3_item_bp").AsInt).."|" end
					if GetVar("Generator_lvl_2_item_rele").AsInt ~= 4 then item_2 = "Реле - x"..(4 - GetVar("Generator_lvl_2_item_rele").AsInt).."|" end
					if GetVar("Generator_lvl_3_item_parts").AsInt ~= 3 then item_3 = "Металлические запчасти - x"..(3 - GetVar("Generator_lvl_3_item_parts").AsInt).."|" end
					if GetVar("Generator_lvl_3_item_military_cable").AsInt ~= 1 then item_4 = "Военный кабель - x1|" end
					if GetVar("Generator_lvl_3_item_plate").AsInt ~= 1 then item_5 = "Плата - x1|" end
					if GetVar("Generator_lvl_3_item_converter").AsInt ~= 1 then item_6 = "Передовой преобразователь тока - x1" end
				end

				local msg = item_0..""..item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6

				if not(GetVar("Generator_lvl_1_item_svech").AsInt == 4) or not(GetVar("Generator_lvl_1_item_engine").AsInt == 2) or not(GetVar("Generator_lvl_1_doski").AsInt == 1) or not(GetVar("Generator_lvl_1_oil").AsInt == 2) or not(GetVar("Generator_lvl_1_money").AsInt == 2) or not(GetVar("Generator_lvl_2_item_rele").AsInt == 4) or not(GetVar("Generator_lvl_2_item_wires").AsInt == 4) or not(GetVar("Generator_lvl_2_item_buldex").AsInt == 1) or not(GetVar("Generator_lvl_3_item_bp").AsInt == 2) or not(GetVar("Generator_lvl_3_item_parts").AsInt == 3) or not(GetVar("Generator_lvl_3_item_military_cable").AsInt == 1) or not(GetVar("Generator_lvl_3_item_plate").AsInt == 1) or not(GetVar("Generator_lvl_3_item_converter").AsInt == 1) then
					AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
				end
			end
		</script>
	</trigger>

	<trigger Name="GeneratorTimeWork" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Generator_Build_loc" />
		<script>
			if GetVar("Generator_on").AsInt == 1 then
				if not(GetVar("Generator_time_work_msg").AsString == "0") then
					AddFadingMsgByStrIdFormatted("fm_generator_time_work", GetVar("Generator_time_work_msg").AsString)
				end
			end
		</script>
	</trigger>

	<trigger Name="GeneratorTimeWork_2" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="Generator_Build_lvl_2_loc" />
		<script>
			if GetVar("Generator_on").AsInt == 1 then
				if not(GetVar("Generator_time_work_msg").AsString == "0") then
					AddFadingMsgByStrIdFormatted("fm_generator_time_work", GetVar("Generator_time_work_msg").AsString)
				end
			end
		</script>
	</trigger>

	<trigger Name="CreateGenerator_lvl_1" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local p = GetEntityByName("generator_point")
			if p then p:Remove() end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(808, 255, 999), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(806, 255, 1002), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			CreateNewDummyObject("r2_substation_barrel", "gen_1_lvl_1", -1, -1, CVector(807.966, 253.215, 1005.037), Quaternion(0.0000, 0.7025, 0.0000, 0.7117))
		    CreateNewDummyObject("generator_motor", "gen_2_lvl_1", -1, -1, CVector(810.740, 255, 999.550), Quaternion(0, 0, 0, 0))
			SetVar("Generator_lvl", 1)
			TDeactivate("Generator_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateGenerator_lvl_2" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,2 do
				local g = GetEntityByName("gen_"..i.."_lvl_1")
				if g then g:Remove() end
			end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(810, 255, 993), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

		    CreateNewDummyObject("generator", "gen_1_lvl_2", -1, -1, CVector(810, 255, 993), Quaternion(0, 1, 0, 1))

			if GetVar("Generator_time_work_second").AsInt > 0 or GetVar("Generator_time_work_minute").AsInt > 0 or GetVar("Generator_time_work_hour").AsInt > 0 then
				SetVar("Generator_time_work_second", 0)
				SetVar("Generator_time_work_minute", 0)
				SetVar("Generator_time_work_hour", 2)
			end
		
			SetVar("Generator_lvl", 2)
			TDeactivate("Generator_BuildInfo")
			TDeactivate("GeneratorTimeWork")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateGenerator_lvl_3" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local g = GetEntityByName("gen_1_lvl_2")
			if g then g:Remove() end
			local m = GetEntityByName("mine_tower")
			if m then m:Remove() end

			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(790, 255, 1003), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(776, 255, 1005), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(800, 255, 1005), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

		    CreateNewDummyObject("oracle_house_r0m0", "gen_1_lvl_3", -1, -1, CVector(790.884, 254.846, 1003.685), Quaternion(0.0000, 0.6899, 0.0000, 0.7239))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN1", "gen_2_lvl_3", -1, -1, CVector(791.670, 268.329, 1000.515), Quaternion(0, 0, 0, 0), 0.5)
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN4", "gen_3_lvl_3", -1, -1, CVector(792.096, 256.066, 1000.610), Quaternion(0, 0, 0, 0), 0.6)
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "gen_4_lvl_3", -1, -1, CVector(791.051, 290.533, 1000.847), Quaternion(0, 0, 1, 0), 0.6)
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN7", "gen_5_lvl_3", -1, -1, CVector(790.739, 295.762, 1000.731), Quaternion(0, 0, 0, 0), 0.9)
			CreateNewSgNodeObject("ET_PS_LENS_S3", "gen_6_lvl_3", -1, -1, CVector(791.451, 317.733, 1001.101), Quaternion(0, 0, 0, 0), 3)
			CreateNewSgNodeObject("ET_PS_HLIGHT", "gen_7_lvl_3", -1, -1, CVector(791.049, 317.323, 1001.464), Quaternion(0, 0, 0, 0), 16.2)
			CreateNewSgNodeObject("ET_S_GENERATOR_ORACLE", "gen_8_lvl_3", -1, -1, CVector(792, 270, 1000), Quaternion(0, 0, 0, 0))

			if GetVar("Lampposts_Builden").AsInt == 1 then
				local lp = GetEntityByName("lp_5")
				if lp then lp:SetPosition(CVector(819.755, 255, 1017.091)) end
			end

			SetVar("Generator_time_work_second", 1)
			SetVar("Generator_time_work_minute", 1)
			SetVar("Generator_time_work_hour", 1)

			SetVar("Generator_lvl", 3)
			SetVar("Generator_on", 1)
			TActivate("IfGenerator_On")
			TDeactivate("Generator_BuildInfo")
			TDeactivate("GeneratorTimeWork_2")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Generator_Stop" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("Generator_lvl").AsInt == 1 then
				getObj("gen_2_lvl_1"):SetNodeAction(AT_STAND1)
				TDeactivate("GeneratorTimeWork")
			elseif GetVar("Generator_lvl").AsInt == 2 then
				local g = GetEntityByName("generator_sound")
				if g then g:Remove() end
				TDeactivate("GeneratorTimeWork_2")
			end
			TActivate("IfGenerator_Off")
			TDeactivate("Generator_timer")
			TDeactivate("gt")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Generator_Start" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("Generator_lvl").AsInt == 1 then
				getObj("gen_2_lvl_1"):SetNodeAction(AT_MOVE1)
				TActivate("GeneratorTimeMsgActivate")
			elseif GetVar("Generator_lvl").AsInt == 2 then
				CreateNewSgNodeObject("ET_S_GENERATOR", "generator_sound", -1, -1, CVector(810, 255, 993), Quaternion(0, 0, 0, 0))
				TActivate("GeneratorTimeMsgActivate")
			end
			TActivate("IfGenerator_On")
			TActivate("Generator_timer")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="GeneratorTimeMsgActivate" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("Generator_lvl").AsInt == 1 then
				TActivate("GeneratorTimeWork")
			elseif GetVar("Generator_lvl").AsInt == 2 then
				TActivate("GeneratorTimeWork_2")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Generator_timer" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local hour = GetVar("Generator_time_work_hour").AsInt
			local min = GetVar("Generator_time_work_minute").AsInt
			local sec = GetVar("Generator_time_work_second").AsInt
			
			local nulH, nulM, nulS = "", "", ""

			if 10 > hour then nulH = 0 end
			if 10 > min then nulM = 0 end
			if 10 > sec then nulS = 0 end

			local Msg = nulH..hour..":"..nulM..min..":"..nulS..sec
			SetVar("Generator_time_work_msg", Msg)

			if not(0 > hour) and not(0 > min) then
				sec = sec - 1
				SetVar("Generator_time_work_second", sec)
				if 0 > sec then
					SetVar("Generator_time_work_second", 59)
					min = min - 1
					SetVar("Generator_time_work_minute", min)
				end
				if 0 > min then
					SetVar("Generator_time_work_minute", 59)
					hour = hour - 1
					SetVar("Generator_time_work_hour", hour)
				end
			end

			if 0 > hour and 0 > min and 0 > sec then
				SetVar("Generator_time_work_second", 0)
				SetVar("Generator_time_work_minute", 0)
				SetVar("Generator_time_work_hour", 0)
				SetVar("Generator_time_work_msg", "0")
				SetVar("Generator_on", 0)
				TActivate("Generator_Stop")
				AddFadingMsgByStrIdFormatted("fm_generator_fuel_nil")
				SoundFadingMsg()
			else
				TActivate("gt")
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="gt" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("Generator_timer")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="IfGenerator_On" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local time = g_ObjCont:GetGameTime().AsString
			local hour = tonumber(strsub(time, 1, 2))

			if GetVar("PetrolStationBuild_Builden").AsInt == 1 then
				if 6 > hour then
					local ps = GetEntityByName("ps_9")
					if not(ps) then
						CreateNewSgNodeObject("LS_LIGHT_TEST", "ps_9", -1, -1, CVector(913.649, 257, 1021.364), Quaternion(0, 0, 0, 0), 0.3)
					end
				end
				
				if GetVar("PetrolStation_Refill").AsInt == 1 then
					if getObj("FuelFull_Timer"):IsActivated() == 0 then
						TActivate("SoundPetrolProcess_InPertolStation01")

						local town = GetEntityByName ("PetrolStationTown1")
						if town then town:SetOpenGateToPlayer(false) end

						local town1 = GetEntityByName ("Town_r0m0")
						if town1 then town1:SetOpenGateToPlayer(false) end

						SetVar("PetrolStation_Refill_Process", 1)
					end
				else
					local lw = GetEntityByName("LIGHTWORK01")
					if not(lw) then
						CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK01", -1, -1, CVector(913.161, 267.300, 1033.075), Quaternion(0, 0, 0, 1), 0.6)
						TActivate("UseFuelNil_InPetrolStation01")
					end
				end
			end

			if GetVar("Lampposts_Builden").AsInt == 1 then
				if 6 > hour then
					for i=1,12 do
						local l = GetEntityByName("lp_"..i)
						local lPos = l:GetPosition()
						lPos.y = lPos.y + 1
						local lp = GetEntityByName("lp_light_"..i)
						if not(lp) then
							CreateNewSgNodeObject("LS_LIGHT_TEST", "lp_light_"..i, -1, -1, lPos, Quaternion(0, 0, 0, 0))
						end
					end 
				end	
			end

			if GetVar("Garage_Builden").AsInt == 1 then
				if 6 > hour then
					for l=1,6 do
						local gr_light = GetEntityByName("gr_light_"..l)
						local gr_light_pos = {CVector(934.758, 268.680, 961.475), CVector(934.758, 268.680, 953.251), CVector(914.288, 268.680, 953.251), CVector(897.743, 268.680, 961.475), CVector(914.288, 268.680, 961.475), CVector(897.743, 268.680, 953.251)}
						if not(gr_light) then
							CreateNewSgNodeObject("ET_PS_LENS_D4", "gr_light_"..l, -1, -1, gr_light_pos[l], Quaternion(0, 0, 0, 0))
							CreateNewSgNodeObject("LS_LIGHT_TEST", "gr_ls_light_"..l, -1, -1, gr_light_pos[l], Quaternion(0, 0, 0, 0))
						end 
					end
					for gr_lamm=1,2 do
						local gr_lammp_light = GetEntityByName("gr_lammp_light_"..gr_lamm)
						local gr_lammp_lightPos = {CVector(948.292, 256, 961.262), CVector(948.292, 256, 952.984)}
						if not(gr_lammp_light) then
							CreateNewSgNodeObject("LS_LIGHT_TEST", "gr_lammp_light_"..gr_lamm, -1, -1, gr_lammp_lightPos[gr_lamm], Quaternion(0, 0, 0, 0))
						end
					end
				end
			end

			TActivate("Lampposts1_light")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="IfGenerator_Off" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PetrolStationBuild_Builden").AsInt == 1 then
				local ps_9 = GetEntityByName("ps_9")
				if ps_9 then ps_9:Remove() end
				
				if GetVar("PetrolStation_Refill").AsInt == 1 then
					local ps_s = GetEntityByName("SFPP_01") 
					if ps_s then ps_s:Remove() end

					local ps_l = GetEntityByName("PetrolLightProcess01") 
					if ps_l then ps_l:Remove() end

					local town = GetEntityByName ("PetrolStationTown1")
					if town then town:SetOpenGateToPlayer(true) end

					local town1 = GetEntityByName ("Town_r0m0")
					if town1 then town1:SetOpenGateToPlayer(true) end

					CreateEffectTTLed( "ET_PS_FUEL_PETROL_END", CVector(906.852, 255, 1040.380), Quaternion(0, 0, 0, 1), 1000)

					SetVar("PetrolStation_Refill_Process", 0)

					TDeactivate("FuelFull_Timer")
					TDeactivate("fft")
				else
					local lw = GetEntityByName("LIGHTWORK01")
					if lw then lw:Remove() end

					TDeactivate("UseFuelNil_InPetrolStation01")
				end
			end

			if GetVar("Lampposts_Builden").AsInt == 1 then
				for i=1,12 do
					local lpl = GetEntityByName("lp_light_"..i)
					if lpl then lpl:Remove() end
				end 	
			end

			if GetVar("Garage_Builden").AsInt == 1 then
				for l=1,6 do
					local gr_light = GetEntityByName("gr_light_"..l)
					if gr_light then gr_light:Remove() end
					local gr_ls_light = GetEntityByName("gr_ls_light_"..l)
					if gr_ls_light then gr_ls_light:Remove() end
				end

				for gr_lm=1,2 do
					local gr_lammp_light = GetEntityByName("gr_lammp_light_"..gr_lm)
					if gr_lammp_light then gr_lammp_light:Remove() end
				end
			end

			for llp=1,92 do
				local lp = GetEntityByName("lp_1_light_"..llp)
				if lp then lp:Remove() end
			end
			
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Фонари -->
	<trigger Name="CreateLamppost_Broken" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("lamppost3", "lp_1_broken", -1, -1, CVector(888.981, 254.846, 1077.950), Quaternion(-0.0900, -0.8150, -0.4093, 0.4001))
			CreateNewSgNodeObject("ET_PS_LAMPPOST3", "lp_2_broken", -1, -1, CVector(892.600, 260.439, 1083.207), Quaternion(0.3289, -0.0446, -0.1593, 0.9298))
			TActivate("Lampposts_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Lampposts_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Lampposts_Build_loc" />
		<script>
			if not(GetVar("Lampposts_item_energo_lump").AsInt == 12) or not(GetVar("Lampposts_item_wires").AsInt == 6) then
				local item_1, item_2 = "", ""
		
				if GetVar("Lampposts_item_energo_lump").AsInt ~= 12 then item_1 = "Энергосберегающая лампа - x"..(12 - GetVar("Lampposts_item_energo_lump").AsInt).."|" end
				if GetVar("Lampposts_item_wires").AsInt ~= 6 then item_2 = "Провода - x"..(6 - GetVar("Lampposts_item_wires").AsInt) end

				local msg = item_1..""..item_2

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

	<trigger Name="CreateLampposts" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for l=1,2 do
				local lp = GetEntityByName("lp_"..l.."_broken")
				if lp then lp:Remove() end
			end

			CreateNewDummyObject("lamppost3", "lp_1", -1, -1, CVector(851.026, 255, 911.183), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_2", -1, -1, CVector(819.755, 255, 948.091), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_3", -1, -1, CVector(819.755, 255, 985.016), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_4", -1, -1, CVector(851.026, 255, 1000.687), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			if not(GetVar("Generator_lvl").AsInt == 3) then
				CreateNewDummyObject("lamppost3", "lp_5", -1, -1, CVector(788.453, 255, 1015.411), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			else
				CreateNewDummyObject("lamppost3", "lp_5", -1, -1, CVector(819.755, 255, 1017.091), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			end
			CreateNewDummyObject("lamppost3", "lp_6", -1, -1, CVector(835.719, 255, 1044.850), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_7", -1, -1, CVector(835.719, 255, 1064.065), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_8", -1, -1, CVector(851.026, 255, 1078.285), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_9", -1, -1, CVector(888.206, 255, 1078.285), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_10", -1, -1, CVector(888.206, 255, 1000.687), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_11", -1, -1, CVector(951.144, 255, 974.805), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "lp_12", -1, -1, CVector(888.206, 255, 900.668), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
		
			for i=1,12 do
				local l = GetEntityByName("lp_"..i)
				local lPos = l:GetPosition()
				lPos.y = lPos.y + 8.2
				CreateEffectInsertedInRemove("ET_PS_SMOKE_BUILDING", l:GetPosition(), Quaternion(0, 0, 0, 1), true)
				CreateEffectInsertedInRemove("ET_PS_LAMPPOST3_BUILD", lPos, Quaternion(0, 0, 0, 1), true)
			end
			
			if GetVar("Generator_on").AsInt == 1 then
				TActivate("IfGenerator_On")
			end

			SetVar("Lampposts_Builden", 1)
			TDeactivate("Lampposts_BuildInfo")

			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Lampposts1_light" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local time = g_ObjCont:GetGameTime().AsString
			local hour = tonumber(strsub(time, 1, 2))

			for i=1,92 do
				if 6 > hour then
					local l = GetEntityByName("lp_1_light_"..i)
					if not(l) then
						CreateNewSgNodeObject("LS_LIGHT_TEST2", "lp_1_light_"..i, -1, -1, CVector(getPos("lamppost1_light_"..i.."_loc")), Quaternion(0, 0, 0, 0))
						local lp = GetEntityByName("lp_1_light_"..i)
						local lpPos = lp:GetPosition()
						lpPos.y = lpPos.y + 1
						if lp then lp:SetPosition(CVector(lpPos)) end
					end
				else
					local lp = GetEntityByName("lp_1_light_"..i)
					if lp then lp:Remove() end
				end 
			end 
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Гараж -->
	<trigger Name="CreateGarage_Broken" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("factory_rr_angar2_r0m0", "gr_broken_1", -1, -1, CVector(911.607, 255, 958.745), Quaternion(0, 1, 0, 0))
			CreateNewDummyObject("fence_short2", "gr_broken_2", -1, -1, CVector(923.659, 256.228, 948.998), Quaternion(-0.7683, -0.0042, 0.0001, 0.6401))
			CreateNewDummyObject("metal_plate1", "gr_broken_3", -1, -1, CVector(895.097, 255.983, 941.222), Quaternion(-0.0665, 0.6769, -0.0556, 0.7309))
			CreateNewSgNodeObject("ET_PS_ORACUL_MAIN6", "gr_broken_4", -1, -1, CVector(888.756, 254.350, 958.401), Quaternion(0, 0, 0, 1), 0.15)
			CreateNewDummyObject("factory_conteiner", "gr_broken_5", -1, -1, CVector(947.497, 255.950, 939.726), Quaternion(-0.0915, 0.0000, 0.0000, 0.9958))
			CreateNewDummyObject("factory_conteiner", "gr_broken_6", -1, -1, CVector(947.493, 255.076, 930.498), Quaternion(-0.0000, -0.0065, 0.0005, 1.0000))
			CreateNewDummyObject("waste1", "gr_broken_7", -1, -1, CVector(950.164, 255, 962.743), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("concrete_ruins1", "gr_broken_8", -1, -1, CVector(947.501, 255, 955.322), Quaternion(0.0000, 0.7163, 0.0000, 0.6978))
			CreateNewDummyObject("brokvehicle1", "gr_broken_9", -1, -1, CVector(942.718, 255, 963.291), Quaternion(0.0000, -0.7193, 0.0000, 0.6947))
			CreateNewDummyObject("rusty_car_1", "gr_broken_10", -1, -1, CVector(947.649, 255.380, 958.507), Quaternion(0.0000, -0.1067, 0.0000, 0.9943))
			CreateNewDummyObject("rusty_car_2", "gr_broken_11", -1, -1, CVector(944.279, 255.480, 957.169), Quaternion(-0.0958, -0.0109, -0.0010, 0.9953))
			CreateNewDummyObject("rusty_car_5", "gr_broken_12", -1, -1, CVector(940.664, 255, 955.703), Quaternion(0.0000, -0.7040, 0.0000, 0.7102))
			CreateNewDummyObject("barrel2", "gr_broken_13", -1, -1, CVector(941.695, 255, 952.821), Quaternion(0.0000, 0.6001, 0.0000, 0.7999))
			CreateNewDummyObject("barrel2", "gr_broken_14", -1, -1, CVector(942.326, 255.312, 953.894), Quaternion(0.0698, 0.0749, 0.6784, 0.7275))
			CreateNewDummyObject("brokvehicle2", "gr_broken_15", -1, -1, CVector(926.941, 255.535, 949.262), Quaternion(0.0000, -0.7148, 0.0000, -0.6994))
			CreateNewDummyObject("agro_tech3", "gr_broken_16", -1, -1, CVector(932.444, 255.491, 968.211), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("ruins5", "gr_broken_17", -1, -1, CVector(920.627, 255.212, 955.255), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("elast_wall_2", "gr_broken_18", -1, -1, CVector(933.271, 255.510, 959.037), Quaternion(0.0000, -0.7209, 0.0000, 0.6931))
			CreateNewDummyObject("iron_wall", "gr_broken_19", -1, -1, CVector(948.660, 255, 967.068), Quaternion(0.0000, 0.1672, 0.0000, 0.9859))
			CreateNewDummyObject("iron_wall_2", "gr_broken_20", -1, -1, CVector(922.566, 255, 968.821), Quaternion(0, 0, 0, 0))
			TActivate("Garage_BuildInfo")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Garage_BuildInfo" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="Garage_Build_loc" />
		<script>
			if not(GetVar("Garage_item_bolts").AsInt == 1) or not(GetVar("Garage_item_nuts").AsInt == 1) or not(GetVar("Garage_item_pena").AsInt == 1) or not(GetVar("Garage_item_insulation").AsInt == 1) or not(GetVar("Garage_item_lump").AsInt == 6) or not(GetVar("Garage_item_cable").AsInt == 1) or not(GetVar("Garage_item_tplug").AsInt == 2) or not(GetVar("Garage_item_roulet").AsInt == 1) or not(GetVar("Garage_item_pipe_wrench").AsInt == 1) or not(GetVar("Garage_item_tb").AsInt == 2) or not(GetVar("Garage_item_fitanyashka").AsInt == 1) or not(GetVar("Garage_item_kaktus").AsInt == 3) then
				local item_1, item_2, item_3, item_4, item_5, item_6, item_7, item_8, item_9, item_10, item_11, item_12 = "", "", "", "", "", "", "", "", "", "", "", ""
			
				if GetVar("Garage_item_bolts").AsInt ~= 1 then item_1 = "Болты - x1|" end
				if GetVar("Garage_item_nuts").AsInt ~= 1 then item_2 = "Гайки - x1|" end
				if GetVar("Garage_item_pena").AsInt ~= 1 then item_3 = "Монтажная пена - x1|" end
				if GetVar("Garage_item_insulation").AsInt ~= 1 then item_4 = "Изолента - x1|" end
				if GetVar("Garage_item_lump").AsInt ~= 6 then item_5 = "Лампа накаливания - x"..(6 - GetVar("Garage_item_lump").AsInt).."|" end
				if GetVar("Garage_item_cable").AsInt ~= 1 then item_6 = "Силовой кабель - x1|" end
				if GetVar("Garage_item_tplug").AsInt ~= 2 then item_7 = "Тройник - x"..(2 - GetVar("Garage_item_tplug").AsInt).."|" end
				if GetVar("Garage_item_roulet").AsInt ~= 1 then item_8 = "Рулетка - x1|" end
				if GetVar("Garage_item_pipe_wrench").AsInt ~= 1 then item_9 = "Шарнирный ключ «КШС» - x1|" end
				if GetVar("Garage_item_tb").AsInt ~= 2 then item_10 = "Туалетная бумага - x"..(2 - GetVar("Garage_item_tb").AsInt).."|" end
				if GetVar("Garage_item_fitanyashka").AsInt ~= 1 then item_11 = "Дакимакура FitaNyashka - x1|" end
				if GetVar("Garage_item_kaktus").AsInt ~= 3 then item_12 = "Кактус - x"..(3 - GetVar("Garage_item_kaktus").AsInt) end

				local msg = item_1..""..item_2..""..item_3..""..item_4..""..item_5..""..item_6..""..item_7..""..item_8..""..item_9..""..item_10..""..item_11..""..item_12

				AddFadingMsgByStrIdFormatted("fm_items_to_build", msg)
			end
		</script>
	</trigger>

	<trigger Name="CreateGarage" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,20 do
				local gr = GetEntityByName("gr_broken_"..i)
				if gr then gr:Remove() end
			end

			TDeactivate("Garage_BuildInfo")

			CreateNewDummyObject("lamppost3", "gr_1", -1, -1, CVector(948.292, 255, 961.262), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("lamppost3", "gr_2", -1, -1, CVector(948.292, 255, 952.984), Quaternion(0.0000, -0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("factory_rr_angar1_r0m0", "gr_3", -1, -1, CVector(911.607, 255.145, 957.745), Quaternion(0, 1, 0, 0))
			CreateNewDummyObject("factory_conteiner", "gr_4", -1, -1, CVector(948.991, 256.249, 940.670), Quaternion(-0.0015, 0.7056, -0.0015, 0.7086))
			CreateNewDummyObject("factory_conteiner", "gr_5", -1, -1, CVector(940.183, 256.249, 940.670), Quaternion(-0.0015, 0.7056, -0.0015, 0.7086))
			CreateNewDummyObject("agro_tech1", "gr_6", -1, -1, CVector(931.736, 255.613, 966.370), Quaternion(0, 1, 0, 0))
			CreateNewDummyObject("agro_tech2", "gr_7", -1, -1, CVector(950.519, 255.278, 949.424), Quaternion(0.0062, -0.7044, -0.0524, 0.7079))
			CreateNewDummyObject("elast_1", "gr_8", -1, -1, CVector(926.470, 255.477, 957.596), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("elast_2", "gr_9", -1, -1, CVector(924.862, 255.471, 957.651), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("elast_wall_1", "gr_10", -1, -1, CVector(921.230, 255.756, 947.285), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("detail", "gr_11", -1, -1, CVector(938.753, 256.225, 957.633), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("doski", "gr_12", -1, -1, CVector(926.655, 256.460, 948.351), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("doski", "gr_13", -1, -1, CVector(932.862, 256.460, 948.351), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("doski", "gr_14", -1, -1, CVector(938.896, 256.460, 948.351), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("kanistr", "gr_15", -1, -1, CVector(925.619, 259.509, 947.295), Quaternion(-0.0509, 0.7053, -0.0509, 0.7053))
			CreateNewDummyObject("kanistr", "gr_16", -1, -1, CVector(926.048, 256.391, 967.693), Quaternion(0.0401, 0.7060, 0.0462, 0.7056))
			CreateNewDummyObject("kanistr", "gr_17", -1, -1, CVector(924.402, 255.783, 966.580), Quaternion(0.4961, 0.5025, 0.4930, 0.5083))
			CreateNewDummyObject("kanistr", "gr_18", -1, -1, CVector(926.048, 256.391, 967.112), Quaternion(0.0401, 0.7063, 0.0401, 0.7056))
			CreateNewDummyObject("koroldrov", "gr_19", -1, -1, CVector(944.913, 255.287, 948.622), Quaternion(0.0000, -0.7086, 0.0000, 0.7056))
			CreateNewDummyObject("koroldrov", "gr_20", -1, -1, CVector(950.154, 255.331, 966.477), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("koroldrov", "gr_21", -1, -1, CVector(943.955, 255.331, 966.477), Quaternion(0.0000, 0.7071, 0.0000, 0.7071))
			CreateNewDummyObject("bottles", "gr_22", -1, -1, CVector(923.099, 262.814, 947.762), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("bottles", "gr_23", -1, -1, CVector(925.438, 262.814, 947.762), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("rabochee_oborudovanie", "gr_24", -1, -1, CVector(917.634, 255.625, 948.450), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("rabochee_oborudovanie", "gr_25", -1, -1, CVector(915.285, 255.625, 948.284), Quaternion(-0.0117, 0.9187, 0.0003, 0.3948))
			CreateNewDummyObject("elast_2", "gr_26", -1, -1, CVector(922.335, 255.471, 958.324), Quaternion(0.0000, -0.3807, 0.0000, 0.9247))
			CreateNewDummyObject("elast_1", "gr_27", -1, -1, CVector(920.610, 255.477, 957.473), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("hornet01gun", "gr_28", -1, -1, CVector(922.093, 256.012, 968.063), Quaternion(-0.6626, 0.0000, 0.0000, 0.7490))
			CreateNewDummyObject("hornet01gun", "gr_29", -1, -1, CVector(921.034, 256.012, 968.111), Quaternion(-0.6626, 0.0000, 0.0000, 0.7490))
			CreateNewDummyObject("bugCargo01", "gr_30", -1, -1, CVector(933.679, 263.265, 948.659), Quaternion(-0.0429, -0.7103, -0.0402, 0.7014))
			CreateNewDummyObject("belazWheel01R", "gr_31", -1, -1, CVector(946.391, 266.165, 967.431), Quaternion(0.0000, 0.7178, 0.0000, 0.6962), 8)
			CreateNewDummyObject("belazWheel01L", "gr_32", -1, -1, CVector(952.654, 263.655, 962.309), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("belazWheel01R", "gr_33", -1, -1, CVector(946.426, 266.165, 965.777), Quaternion(0.0000, 0.7178, 0.0000, 0.6962), 8)
			CreateNewDummyObject("belazWheel01L", "gr_34", -1, -1, CVector(951.284, 263.655, 962.337), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("gadget_06", "gr_35", -1, -1, CVector(924.295, 256.471, 966.118), Quaternion(0.0000, -0.2546, 0.0000, 0.9670))
			CreateNewDummyObject("gadget_09", "gr_36", -1, -1, CVector(919.606, 256.048, 966.804), Quaternion(-0.7070, -0.7070, 0.0123, 0.0123))
			CreateNewDummyObject("gadget_10", "gr_37", -1, -1, CVector(917.502, 256.111, 967.448), Quaternion(0, 1, 0, 0))
			CreateNewDummyObject("back_exp", "gr_38", -1, -1, CVector(908.812, 257.089, 947.781), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("back_exp", "gr_39", -1, -1, CVector(906.047, 257.089, 947.888), Quaternion(0.0000, -0.8757, 0.0000, -0.4829))
			CreateNewDummyObject("barrel2", "gr_40", -1, -1, CVector(951.002, 255.471, 957.118), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("barrel2", "gr_41", -1, -1, CVector(950.363, 255.471, 958.267), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("barrel2", "gr_42", -1, -1, CVector(949.862, 255.471, 957.362), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("barrel2", "gr_43", -1, -1, CVector(949.050, 255.471, 958.095), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("barrel2", "gr_44", -1, -1, CVector(948.886, 255.471, 956.931), Quaternion(0, 0, 0, 0))
			CreateNewSgNodeObject("fitanyashka", "gr_45", -1, -1, CVector(952.633, 262.050, 957.662), Quaternion(-0.0160, -0.7084, -0.0186, 0.7049), 0.75)
			CreateNewDummyObject("kaktus", "gr_46", -1, -1, CVector(947.157, 262.170, 947.8151), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("kaktus", "gr_47", -1, -1, CVector(945.718, 262.170, 948.995), Quaternion(0.0000, -0.2058, 0.0000, 0.9786))
			CreateNewDummyObject("kaktus", "gr_48", -1, -1, CVector(944.220, 262.170, 947.769), Quaternion(0.0000, 0.8179, 0.0000, 0.5754))
			CreateNewSgNodeObject("ET_S_ITEM_MUSIC01", "gr_49", -1, -1, CVector(946.222, 265.006, 957.790), Quaternion(0, 0, 0, 0))
			CreateNewDummyObject("bottles", "gr_50", -1, -1, CVector(923.099, 262.814, 949.319), Quaternion(0, 0, 0, 0))
			SetVar("Garage_Builden", 1)
			
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(945, 255, 957), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(919, 255, 957), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(900, 255, 957), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(892, 255, 957), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_PS_SMOKE_BUILDING", CVector(940, 255, 938), Quaternion(0, 0, 0, 1), 6000)
			CreateEffectTTLed( "ET_S_BUILDING", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), 1800)

			if GetVar("Generator_on").AsInt == 1 then
				TActivate("IfGenerator_On")
			end

			TActivate("PlayerHP")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="PlayerHP" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local hp = GetPlayerHealth() 
			local maxhp = GetPlayerMaxHealth()
			if not(hp == maxhp) then
				TActivate("RegenetationPlayerHP_Timer")
				SetVar("RegenPlayerHP_Timer", 5)
				trigger:Deactivate()
			end
		</script>
	</trigger>

	<trigger Name="RegenetationPlayerHP_Timer" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local t = GetVar("RegenPlayerHP_Timer").AsInt - 1
			SetVar("RegenPlayerHP_Timer", t)
			if 1 > GetVar("RegenPlayerHP_Timer").AsInt then
				GetPlayerVehicle():AddModifier("hp", "+ 1")
				SetVar("RegenPlayerHP_Timer", 0)
				TActivate("PlayerHP")
			else
				TActivate("rphpt")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="rphpt" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("RegenetationPlayerHP_Timer")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Телепорт -->
	<trigger Name="Teleport" active="1">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="tp_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="tp_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="tp_3_loc" />
		<script>
			local pl = GetPlayerVehicle()
			if pl then
				pl:SetGamePositionOnGround(CVector(893.077, 255.493, 987.899))
				pl:SetRotation(Quaternion(-0.009, -0.005, -0.000, 1.000))
				pl:SetThrottle(0)
				pl:SetCustomLinearVelocity(0)
				CreateEffectInsertedInRemove("ET_PS_DRONE", pl:GetPosition(), Quaternion(0, 0, 0, 1), true)
			end

			SetCameraBehindPlayerVehicle()
		</script>
	</trigger>
	
<!-- При выезде из городов -->
	<trigger Name="LeaveTown" active="1">
		<event	eventid="GE_LEAVE_TOWN"	ObjName="PetrolStationTown1" />
		<event	eventid="GE_LEAVE_TOWN"	ObjName="Town_r0m0" />
		<script>
			UpdateWeather(0)
		
			local time = g_ObjCont:GetGameTime().AsString
			local hour = tonumber(strsub(time, 1, 2))

			if GetVar("Generator_on").AsInt == 1 then
				TActivate("IfGenerator_On")
			end

			if hour >= 6 then
				if GetVar("PetrolStationBuild_Builden").AsInt == 1 then
					local ps_9 = GetEntityByName("ps_9")
					if ps_9 then ps_9:Remove() end
				end

				if GetVar("Lampposts_Builden").AsInt == 1 then
					for i=1,12 do
						local lpl = GetEntityByName("lp_light_"..i)
						if lpl then lpl:Remove() end
					end 	
				end

				for l=1,92 do
					local lp = GetEntityByName("lp_1_light_"..l)
					if lp then lp:Remove() end
				end

				if GetVar("Garage_Builden").AsInt == 1 then
					for k=1,6 do
						local gr_light = GetEntityByName("gr_light_"..k)
						if gr_light then gr_light:Remove() end
						local gr_ls_light = GetEntityByName("gr_ls_light_"..k)
						if gr_ls_light then gr_ls_light:Remove() end
					end

					for gr_lm=1,2 do
						local gr_lammp_light = GetEntityByName("gr_lammp_light_"..gr_lm)
						if gr_lammp_light then gr_lammp_light:Remove() end
					end
				end
			end

			local artillerygun = GetItemsAmount("ammo_chest_artillerygunForSale")
			if HasPlayerAmountOfItems("ammo_chest_artillerygunForSale", artillerygun) and artillerygun > 0 then
				RemoveItemsFromPlayerRepository("ammo_chest_artillerygunForSale", artillerygun)
				AddItemsToPlayerRepository("ammo_chest_artillerygun", artillerygun)
			end

			local heavygun = GetItemsAmount("ammo_chest_heavygunForSale")
			if HasPlayerAmountOfItems("ammo_chest_heavygunForSale", heavygun) and heavygun > 0 then
				RemoveItemsFromPlayerRepository("ammo_chest_heavygunForSale", heavygun)
				AddItemsToPlayerRepository("ammo_chest_heavygun", heavygun)
			end

			local machinegun = GetItemsAmount("ammo_chest_machinegunForSale")
			if HasPlayerAmountOfItems("ammo_chest_machinegunForSale", machinegun) and machinegun > 0 then
				RemoveItemsFromPlayerRepository("ammo_chest_machinegunForSale", machinegun)
				AddItemsToPlayerRepository("ammo_chest_machinegun", machinegun)
			end

			local rocketgun = GetItemsAmount("ammo_chest_rocketgunForSale")
			if HasPlayerAmountOfItems("ammo_chest_rocketgunForSale", rocketgun) and rocketgun > 0 then
				RemoveItemsFromPlayerRepository("ammo_chest_rocketgunForSale", rocketgun)
				AddItemsToPlayerRepository("ammo_chest_rocketgun", rocketgun)
			end

			local shotgun = GetItemsAmount("ammo_chest_shotgunForSale")
			if HasPlayerAmountOfItems("ammo_chest_shotgunForSale", shotgun) and shotgun > 0 then
				RemoveItemsFromPlayerRepository("ammo_chest_shotgunForSale", shotgun)
				AddItemsToPlayerRepository("ammo_chest_shotgun", shotgun)
			end

			if GetVar("WatchCredits").AsInt == 0 then
				if IsQuestComplete("q_kill_scavs") and IsQuestComplete("q_fuel2") and IsQuestComplete("q_base_scavs") and IsQuestComplete("q_test_drive6") then
					if GetVar("DialogSelectMap").AsInt == 0 then
						println("AllQuestsCompleted")
						TActivate("OpenGate1ForCredits")
					end
				end
			end

			SetCameraBehindPlayerVehicle()

		</script>
	</trigger>

<!-- Создание машинки двигающийся по пути -->
	<trigger Name="trCreateVehicleMove" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			getObj("CreateVehicleMove"):AddEvent("GE_TIME_PERIOD",tostring(random(40,120)))
			TActivate("CreateVehicleMove")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateVehicleMove" active="0">
		<script>
			
			local modellist = {"Bug01PMC", "Molokovoz01PMC", "Ural01PMC", "Belaz01PMC", "Cruiser01PMC", "Mirotvorec01PMC"}
			local model = modellist[random(getn(modellist))]
	
			local cab
			local cargo

			if model == "Bug01PMC" then
				cab = {"bugCab01", "bugCab02", "bugCab03"}
				cargo = {"bugCargo01", "bugCargo02", "bugCargo03"}
			elseif model == "Molokovoz01PMC" then
				cab = {"molokovozCab01", "molokovozCab02" ,"molokovozCab03"}
				cargo = {"molokovozCargo01", "molokovozCargo02", "molokovozCargo03"}
			elseif model == "Ural01PMC" then
				cab = {"uralCab01", "uralCab02", "uralCab03", "uralCab04", "uralCab05"}
				cargo = {"uralCargo01", "uralCargo02", "uralCargo03", "uralCargo04", "uralCargo05"}
			elseif model == "Belaz01PMC" then
				cab = {"belazCab01", "belazCab02", "belazCab03", "belazCab04", "belazCab05"}
				cargo = {"belazCargo01", "belazCargo02", "belazCargo03", "belazCargo04", "belazCargo05"}
			elseif model == "Cruiser01PMC" then
				cab = {"cruiserCab01", "cruiserCab02"}
				cargo = {"cruiserCargo01", "cruiserCargo02"}
			elseif model == "Mirotvorec01PMC" then
				cab = {"mirotvorecCab01", "mirotvorecCab02", "mirotvorecCab03", "mirotvorecCab04", "mirotvorecCab05"}
				cargo = {"mirotvorecCargo01", "mirotvorecCargo02", "mirotvorecCargo03", "mirotvorecCargo04", "mirotvorecCargo05"}
			end

			local pos = {CVector(1948.147, 255.986, 1333.427), CVector(134.418, 255.857, 387.032)}
			local rot = {Quaternion(-0.010, -0.515, -0.006, 0.857), Quaternion(-0.009, 0.695, 0.005, 0.719)}
			local r = random(2)
			local belong = random(1091,1092)

			TeamCreate("VehicleMove", belong, pos[r], {model}, nil, 0, rot[r])

			local veh = GetEntityByName("VehicleMove_vehicle_0")
			if veh then
				veh:SetNewPart("CABIN",cab[random(getn(cab))])
				veh:SetNewPart("BASKET",cargo[random(getn(cargo))])
				veh:SetCruisingSpeed(30)
				veh:SetRandomSkin()
				veh:setGodMode(1)
				GiveGunsForVehicle(veh, 1)
			end

			local vehPath = GetEntityByName ("VehicleMove")
			if vehPath then
				vehPath:StackOpen()
				if r == 1 then
					vehPath:SetDestination(CVector(868.396, 257.632, 1120.734))
					vehPath:SetDestination(CVector(867.900, 257.692, 910.184))
					vehPath:SetDestination(CVector(74.292, 257.713, 392.653))
				else
					vehPath:SetDestination(CVector(868.646, 257.418, 867.737))
					vehPath:SetDestination(CVector(869.309, 257.687, 1073.623))
					vehPath:SetDestination(CVector(1970.307, 257.748, 1314.416))
				end
				vehPath:StackClose()
			end

			local RemoveVehtr = getObj("RemoveVeh")
			if RemoveVehtr then
				if r == 1 then
					RemoveVehtr:AddEvent("GE_OBJECT_ENTERS_LOCATION", "RemoveVehMove_"..belong.."_loc_1")
				else
					RemoveVehtr:AddEvent("GE_OBJECT_ENTERS_LOCATION", "RemoveVehMove_"..belong.."_loc_2")
				end
				TActivate("RemoveVeh")
			end

			getObj("CreateVehicleMove"):DelEvent("GE_TIME_PERIOD")
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="RemoveVeh" active="0">
		<script>
			local veh = GetEntityByName("VehicleMove_vehicle_0")
			if veh then veh:Remove() end
			getObj("RemoveVeh"):DelEvent("GE_OBJECT_ENTERS_LOCATION")
			TActivate("trCreateVehicleMove")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Переход на локацию -->
	<trigger Name="PassingToMap" active="0">
		<event timeout="0.05" eventid="GE_TIME_PERIOD" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
			end

			local map = GetVar("ToMap").AsString

			PassToMap(map, "FromR0M0")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="In12Hour" active="0">
		<event timeout="0.05" eventid="GE_TIME_PERIOD" />
		<script>
			local time = g_ObjCont:GetGameTime().AsString
			local hour = tonumber(strsub(time, 1, 2))

			for i=1,12 do
				hour = hour + 1
				if hour > 24 then hour = 0 end
			end

			SetGameTime(hour,0)
			
			TActivate("PassingToMap")

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Игрок едет в зону, чтобы запустилась катсцена с титрами -->
	<trigger Name="OpenGate1ForCredits" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			getObj("gate_1"):SetNodeAction(AT_RESERVED4)
			CreateEffectTTLed( "ET_PS_OPENING_GATE", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1400)
			TActivate("OpennedGate1ForCredits")

			TDeactivate("OpenGate_1")
			TDeactivate("OpennnedGate_1")
			TDeactivate("CloseGate_1")
			TDeactivate("ClosedGate_1")

			TDeactivate("Teleport")

			TActivate("StartcutCredits_EntersLoc")

			SetVar("DialogSelectMap", 1)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="OpennedGate1ForCredits" active="0">
		<event timeout="1.4" eventid="GE_TIME_PERIOD" />
		<script>
			local g = GetEntityByName("gate_1")
			if g then g:SetPosition(CVector(48, 255, 773)) end

			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(868.318, 255, 1094.083), Quaternion(0, 0, 0, 1), 1500)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="StartcutCredits_EntersLoc" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="cutCredits_loc" />
		<script>
			TActivate("cutCredits")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CloseGate1ForCredits" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			local g = GetEntityByName("gate_1")
			if g then 
				g:SetPosition(CVector(868.318, 255, 1094.083)) 
				g:SetNodeAction(AT_STAND1)
			end

			TActivate("OpenGate_1")
			TActivate("Teleport")
			TDeactivate("StartcutCredits_EntersLoc")
			SetVar("DialogSelectMap", 0)

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Таймер отслеживающий загрузку сейвов -->
	<trigger Name="CheckLoadSaveTimer" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			if SAVE_ID then SAVE_ID = GetVar("SaveId").AsInt end
			if not(GetVar("EFA_Version").AsString == EFA_VERSION) or not(GetVar("EFA_Build").AsString == EFA_BUILD) then
				local b = SpawnMessageBox("90005")
				if b == 1 then ShowDeathMenu() end
				LOG("EFA VERSION: "..EFA_VERSION.." | BUILD: "..EFA_BUILD.." | SAVE VERSION: "..GetVar("EFA_Version").AsString.." | BUILD: "..GetVar("EFA_Build").AsString)
			else
				TActivate("clst")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="clst" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("CheckLoadSaveTimer")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Выход/очистка карты -->
	<trigger Name="ExitMap" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
		
		--пересоздание ворот
			for i=1,2 do
				local g = GetEntityByName("gate_"..i)
				if g then g:Remove() end
				TDeactivate("OpenGate_"..i)
				TDeactivate("OpennedGate_"..i)
				TDeactivate("CloseGate_"..i)
				TDeactivate("ClosedGate_"..i)
				SetVar("OpenGate_"..i, 0)
			end

			TActivate("CreateGate")

		--ящик диких
			if GetVar("ChestScavs_Builden").AsInt == 1 then
				if GetVar("Scav_Move").AsInt > 0 then
					local sv = GetEntityByName("ScavMoveToChest")
					if sv then sv:Remove() end

					SetVar("Scav_Move", 0)
					TDeactivate("ScavMoveReached")
					TDeactivate("ChestScavs_EntersLoc")
					TDeactivate("ScavMoveSpeed")
				end
	
				if GetVar("ChestScavs_Search").AsInt > 0 then
					if GetVar("ChestScavs_time_hour").AsInt > 0 or GetVar("ChestScavs_time_minute").AsInt > 0 or GetVar("ChestScavs_time_second").AsInt > 0 then
						TDeactivate("ChestScavs_Timer")
						TDeactivate("cst")
						TDeactivate("ChestScavs_Time")
						TDeactivate("ChestScavsTimeMsgActivate")
					end
				end 

				if CHESTSCAVS_TIMER_HOUR_GLOBAL then CHESTSCAVS_TIMER_HOUR_GLOBAL = GetVar("ChestScavs_time_hour").AsInt end
				if CHESTSCAVS_TIMER_MINUTE_GLOBAL then CHESTSCAVS_TIMER_MINUTE_GLOBAL = GetVar("ChestScavs_time_minute").AsInt end
				if CHESTSCAVS_TIMER_SECOND_GLOBAL then CHESTSCAVS_TIMER_SECOND_GLOBAL = GetVar("ChestScavs_time_second").AsInt end
				if CHESTSCAVS_SEARCH_GLOBAL then CHESTSCAVS_SEARCH_GLOBAL = GetVar("ChestScavs_Search").AsInt end
			end

		--генератор
			if GetVar("Generator_lvl").AsInt == 1 or GetVar("Generator_lvl").AsInt == 2 then
				if GetVar("Generator_time_work_second").AsInt > 0 or GetVar("Generator_time_work_minute").AsInt > 0 or GetVar("Generator_time_work_hour").AsInt > 0 then
					if GetVar("Generator_on").AsInt == 1 then
						TDeactivate("Generator_timer")
						TDeactivate("gt")
					end
				end
				
				if GENERATOR_TIMER_HOUR_GLOBAL then GENERATOR_TIMER_HOUR_GLOBAL = GetVar("Generator_time_work_hour").AsInt end
				if GENERATOR_TIMER_MINUTE_GLOBAL then GENERATOR_TIMER_MINUTE_GLOBAL = GetVar("Generator_time_work_minute").AsInt end
				if GENERATOR_TIMER_SECOND_GLOBAL then GENERATOR_TIMER_SECOND_GLOBAL = GetVar("Generator_time_work_second").AsInt end
				if GENERATOR_LVL_GLOBAL then GENERATOR_LVL_GLOBAL = GetVar("Generator_lvl").AsInt end
				if GENERATOR_ON_GLOBAL then GENERATOR_ON_GLOBAL = GetVar("Generator_on").AsInt end
			end

		--удаление VehicleMove
			TDeactivate("trCreateVehicleMove")
			TDeactivate("CreateVehicleMove")
			local veh = GetEntityByName("VehicleMove_vehicle_0")
			if veh then veh:Remove() end
			getObj("CreateVehicleMove"):DelEvent("GE_TIME_PERIOD")
			getObj("RemoveVeh"):DelEvent("GE_OBJECT_ENTERS_LOCATION")
			TDeactivate("RemoveVeh")

			if COUNT_RAIDS then COUNT_RAIDS = GetVar("CountRaids").AsInt end

		--гараж
			if GetVar("Garage_Builden").AsInt == 1 then
				TDeactivate("RegenetationPlayerHP_Timer")
				TDeactivate("rphpt")
				TDeactivate("PlayerHP")
			end

		--заправка
			if GetVar("PetrolStationBuild_Builden").AsInt == 1 then
				TDeactivate("RegenetationPlayerFuel_Timer")
				TDeactivate("rpft")
				TDeactivate("PlayerFuel")
			end

			TDeactivate("CheckLoadSaveTimer")
			TDeactivate("clst")

			println("MAP CLEAR")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Message" active="1">
		<event timeout="3" eventid="GE_TIME_PERIOD" />
		<script>
			local b = SpawnMessageBox("90004")
			if b == 1 then
				local town1 = GetEntityByName("Town_r0m0_enter")
				if town1 then town1:SetPosition(CVector(858.564, 255.000, 985.160)) end
			end
			trigger:Deactivate()
		</script>
	</trigger>

<!--
**************************************************************************************************
** КВЕСТЫ
**************************************************************************************************
-->

--Звуки

	<trigger Name="SoundQuestTaken" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			if getObj("SoundQuestComplete"):IsActivated() == 0 and getObj("SoundQuestFail"):IsActivated() == 0 and getObj("SoundQuestFihished"):IsActivated() == 0 and getObj("SoundSubtaskComplete"):IsActivated() == 0 then
				CreateEffectInsertedInRemove("ET_S_QUEST_TAKEN", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SoundQuestComplete" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectInsertedInRemove("ET_S_QUEST_COMPLETE", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SoundQuestFail" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectInsertedInRemove("ET_S_QUEST_FAIL", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SoundQuestFihished" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectInsertedInRemove("ET_S_QUEST_FINISHED", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SoundSubtaskComplete" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			if getObj("SoundQuestComplete"):IsActivated() == 0 or getObj("SoundQuestFail"):IsActivated() == 0 or getObj("SoundQuestFihished"):IsActivated() == 0 then
				CreateEffectInsertedInRemove("ET_S_SUBTASK_COMPLETE", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SoundBuy" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectInsertedInRemove("ET_S_BUY", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			trigger:Deactivate()
		</script>
	</trigger>

--Активация квестов

	<trigger Name="QuestsActivate" active="1">
		<event	eventid="GE_LEAVE_TOWN"	ObjName="PetrolStationTown1" />
		<event	eventid="GE_LEAVE_TOWN"	ObjName="Town_r0m0" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="tp_1_loc" />
		<script>
			if IsQuestTaken("q_test_drive1") and not(IsQuestComplete("q_test_drive1_11")) then
				TActivate("q_test_drive1_config")
			end

			if IsQuestTaken("q_test_drive2") and not(IsQuestComplete("q_test_drive2_1")) then
				TActivate("q_test_drive2_config")
			end

			if IsQuestTaken("q_test_drive3") and not(IsQuestComplete("q_test_drive3_1")) then
				TActivate("q_test_drive3_config")
			end

			if IsQuestTaken("q_test_drive4") and not(IsQuestComplete("q_test_drive4_1")) then
				TActivate("q_test_drive4_config")
			end

			if IsQuestTaken("q_test_drive5") and not(IsQuestComplete("q_test_drive5_1")) then
				TActivate("q_test_drive5_config")
			end

			if IsQuestTaken("q_test_drive6") and not(IsQuestComplete("q_test_drive6_1")) then
				TActivate("q_test_drive6_config")
			end
		</script>
	</trigger>

	<trigger Name="QuestCanBeGiven" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if IsQuestComplete("q_fuel1") and not(GetVar("q_fuel2_can_be_given").AsInt == 1) then 
				SetVar("q_fuel2_can_be_given", GetVar("q_fuel2_can_be_given").AsInt+1)
			end

			if IsQuestComplete("q_rebuild") and not(GetVar("q_test_drive1_can_be_given").AsInt == 1) then 
				SetVar("q_test_drive1_can_be_given", GetVar("q_test_drive1_can_be_given").AsInt+1)
			end

			if IsQuestComplete("q_bitok1") and not(GetVar("q_bitok2_can_be_given").AsInt == 1) then 
				SetVar("q_bitok2_can_be_given", GetVar("q_bitok2_can_be_given").AsInt+1)
			end

			if IsQuestComplete("q_bitok2") and not(GetVar("q_bitok3_can_be_given").AsInt == 1) then 
				SetVar("q_bitok3_can_be_given", GetVar("q_bitok3_can_be_given").AsInt+1)
			end
		    trigger:Deactivate()
		</script>
	</trigger>

-- Огонь на поражение

	<trigger Name="q_kill_scavs_Revard" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local item = {"pkt01", "kord01", "ammo_chest_machinegun"}
			local r = random(2)
			if r == 1 then
				AddItemsToPlayerRepository(item[random(getn(item))])
			else
				AddPlayerMoney(random(15000,25000))
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 1
	
	<trigger Name="q_test_drive1_config" active="0">
	<event timeout="0.01" eventid="GE_TIME_PERIOD" />
	<script>
		local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
		local cabin = GetPlayerVehicle():GetCabin()
		local basket = GetPlayerVehicle():GetBasket()
		local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")

		if prot == "BugForSale" then
			if cabin and basket then
				local cab = cabin:GetProperty("Prototype").AsString
				local bas = basket:GetProperty("Prototype").AsString
				if cab == "bugCab01" and bas == "bugCargo03_5x7" then
					if cab_small then
						local csl = cab_small:GetProperty("Prototype").AsString
						if csl == "pkt01" then
							CompleteSubtask("q_test_drive1_11")
						end
					end
				end
			end
		end
		trigger:Deactivate()
	</script>
	</trigger>

	<trigger Name="q_test_drive1_Revard" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local item = {"ammo_chest_machinegun", "machinery_use", "scrap_metal_use"}
			AddItemsToPlayerRepository(item[random(getn(item))], random(1,2))
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 2

	<trigger Name="q_test_drive2_config" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
			local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
			local bas_small_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")

			local l = 0
			if prot == "MolokovozForSale" then 
				l = l + 1
				if cabin and basket then 
					cabin = cabin:GetProperty("Prototype").AsString 
					basket = basket:GetProperty("Prototype").AsString 
					if cabin == "molokovozCab03" then l = l + 1 end
					if basket == "molokovozCargo01_5x8" then l = l + 1 end
				end
				if cab_small and bas_small_0 then
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_small_0 = bas_small_0:GetProperty("Prototype").AsString 
					if cab_small == "specter01" or cab_small == "pkt01" then l = l + 1 end
					if bas_small_0 == "specter01" or bas_small_0 == "pkt01" then l = l + 1 end
				end
			end
			
			if l == 5 then CompleteSubtask("q_test_drive2_1") end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 3

	<trigger Name="q_test_drive3_config" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
			local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")

			local l = 0
			if prot == "BugForSale" then 
				l = l + 1
				if cabin and basket then 
					cabin = cabin:GetProperty("Prototype").AsString 
					basket = basket:GetProperty("Prototype").AsString 
					if cabin == "bugCab01" then l = l + 1 end
					if basket == "bugCargo01_4x5" then l = l + 1 end
				end
				if cab_small then
					cab_small = cab_small:GetProperty("Prototype").AsString 
					if cab_small == "hornet01" or cab_small == "american_hornet01" then l = l + 1 end
				end
			end
			
			if l == 4 then CompleteSubtask("q_test_drive3_1") end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 4

	<trigger Name="q_test_drive4_config" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
			local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")

			local l = 0
			if prot == "MolokovozForSale" then 
				l = l + 1
				if cabin and basket then 
					cabin = cabin:GetProperty("Prototype").AsString 
					basket = basket:GetProperty("Prototype").AsString 
					if cabin == "molokovozCab01" then l = l + 1 end
					if basket == "molokovozCargo03_6x8" then l = l + 1 end
				end
				if bas_big_0 then
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
					if bas_big_0 == "kpvt01" then l = l + 1 end
				end
			end
			
			if l == 4 then CompleteSubtask("q_test_drive4_1") end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 5

	<trigger Name="q_test_drive5_config" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
			local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
			local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")

			local l = 0
			if prot == "MolokovozForSale" then 
				l = l + 1
				if cabin and basket then 
					cabin = cabin:GetProperty("Prototype").AsString 
					basket = basket:GetProperty("Prototype").AsString 
					if cabin == "molokovozCab03" then l = l + 1 end
					if basket == "molokovozCargo03_6x8" then l = l + 1 end
				end
				if bas_big_0 and cab_small then
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
					if cab_small == "storm01" then l = l + 1 end
					if bas_big_0 == "rapier01" then l = l + 1 end
				end
			end
			
			if l == 5 then CompleteSubtask("q_test_drive5_1") end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive5_Revard" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,random(3) do
				local item = {"ammo_chest_machinegun", "ammo_chest_heavygun", "machinery_use", "electronics_use"}
				AddItemsToPlayerRepository(item[random(getn(item))], 1)
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 6

	<trigger Name="q_test_drive6_config" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local prot = GetPlayerVehicle():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
			local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
			local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")

			local l = 0
			if prot == "UralForSale" then 
				l = l + 1
				if cabin and basket then 
					cabin = cabin:GetProperty("Prototype").AsString 
					basket = basket:GetProperty("Prototype").AsString 
					if cabin == "uralCab02" then l = l + 1 end
					if basket == "uralCargo01_6x9" then l = l + 1 end
				end
				if bas_big_0 and cab_big_1 then
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
					if cab_big_1 == "vulcan01" then l = l + 1 end
					if bas_big_0 == "vulcan01" then l = l + 1 end
				end
			end

			if l == 5 then CompleteSubtask("q_test_drive6_1") end
			trigger:Deactivate()
		</script>
	</trigger>
</triggers>