<?xml version="1.0" encoding="windows-1251" standalone="yes" ?>
<triggers>

<!-- Назначение дефолтных значений переменных -->
	<trigger Name="GlobalVar" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
		
			SetVar("PlayerCabin", "0")
			SetVar("PlayerBasket", "0")
			SetVar("PlayerSkin", 0)

			SetVar("Cabin_Small_Gun", 0)
			SetVar("Cabin_Small_Gun_1", 0)
			SetVar("Cabin_Big_Gun_1", 0) 
			SetVar("Cabin_Big_Gun_2", 0)
			SetVar("Cabin_Giant_Gun", 0)

			SetVar("Basket_Small_Gun_0", 0) 
			SetVar("Basket_Big_Gun_0", 0)
			SetVar("Basket_Big_Gun_1", 0) 
			SetVar("Basket_Giant_Gun", 0) 
			SetVar("Basket_Giant_Gun_0", 0)
			SetVar("Basket_Side_Gun_0", 0)

			SetVar("PlayerCar", 0)

			SetVar("PosPlayer1",0)
			SetVar("PosPlayer2",0)
			SetVar("SpawnPlayer",0)

			SetVar("ExitRoadToFater",0)
			SetVar("ExitZaTheTroiskoe",0)
			SetVar("ExitBaseFelixOpen",0)

			for csl=1,8 do
				SetVar("CountScav_"..csl.."_loc", 0)
			end
	
			SetVar("Air",0)
			SetVar("NoAir",0)
			SetVar("AirPoints",0)
			SetVar("AirType", 0)

			SetVar("CountPMC_Spawn1", 0)
			SetVar("CountPMC_Spawn2", 0)

			SetVar("CountScavs", 0)

			SetVar("PetrolStation_Refill_Process", 0)

			SetVar("PlayerKillScavs", 0)
			SetVar("PlayerKillPMC", 0)

		    trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="QuestGlobalVar" active="1">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			SetVar("q_testing_mission_DieScavs", 0)

			SetVar("Map", 0)

			SetVar("q_clearing_r1m1_EnemyInLoc", 0)
			for q_clr=1,5 do
				SetVar("q_clearing_r1m1_DieScavs_loc_"..q_clr, 0)
			end

			SetVar("q_kill_scavs_Die", 0)

			SetVar("q_test_drive1_killscavs", 0)
			for q_td=2,8 do
				SetVar("q_test_drive"..q_td.."_killscavs", 0)
				SetVar("q_test_drive"..q_td.."_killPMC", 0)
			end
			for q_td_rc=4,5 do
				SetVar("q_test_drive"..q_td_rc.."_raidcount", 0)
			end

			for q_n=1,5 do
				SetVar("q_naturalist"..q_n.."_killscavs", 0)
				SetVar("q_naturalist"..q_n.."_killPMC", 0)
			end

			SetVar("q_naturalist5_raidcount", 0)

		    trigger:Deactivate()
		</script>
	</trigger>

<!-- Активация триггеров при старте локации -->
	<trigger Name="StartMap" active="1">
		<event eventid="GE_GAME_START" ObjName="Player1" />
		<script>

			SetVar("ChestScavs_time_hour", 0)
			SetVar("ChestScavs_time_minute", 0)
			SetVar("ChestScavs_time_second", 0)
			SetVar("ChestScavs_Search", 0)

			SetVar("Generator_time_work_hour", 0)
			SetVar("Generator_time_work_minute", 0)
			SetVar("Generator_time_work_second", 0)
			SetVar("Generator_lvl", 0)
			SetVar("Generator_on", 0)

			SetVar("GarageCrafting_time_hour", 0)
			SetVar("GarageCrafting_time_minute", 0)
			SetVar("GarageCrafting_time_second", 0)
			SetVar("GarageCraft", 0)
			SetVar("GarageCraftPause", 0)

			if COUNT_RAIDS then SetVar("CountRaids", COUNT_RAIDS) end 

			if CHESTSCAVS_TIMER_HOUR_GLOBAL > 0 then SetVar("ChestScavs_time_hour", CHESTSCAVS_TIMER_HOUR_GLOBAL) end
			if CHESTSCAVS_TIMER_MINUTE_GLOBAL > 0 then SetVar("ChestScavs_time_minute", CHESTSCAVS_TIMER_MINUTE_GLOBAL) end
			if CHESTSCAVS_TIMER_SECOND_GLOBAL > 0 then SetVar("ChestScavs_time_second", CHESTSCAVS_TIMER_SECOND_GLOBAL) end
			if CHESTSCAVS_SEARCH_GLOBAL > 0 then SetVar("ChestScavs_Search", CHESTSCAVS_SEARCH_GLOBAL) end

			if GENERATOR_TIMER_HOUR_GLOBAL > 0 then SetVar("Generator_time_work_hour", GENERATOR_TIMER_HOUR_GLOBAL) end
			if GENERATOR_TIMER_MINUTE_GLOBAL > 0 then SetVar("Generator_time_work_minute", GENERATOR_TIMER_MINUTE_GLOBAL) end
			if GENERATOR_TIMER_SECOND_GLOBAL > 0 then SetVar("Generator_time_work_second", GENERATOR_TIMER_SECOND_GLOBAL) end
			if GENERATOR_LVL_GLOBAL then SetVar("Generator_lvl", GENERATOR_LVL_GLOBAL) end
			if GENERATOR_ON_GLOBAL then SetVar("Generator_on", GENERATOR_ON_GLOBAL) end

			if GARAGE_CRAFTING_TIME_HOUR_GLOBAL > 0 then SetVar("GarageCrafting_time_hour", GARAGE_CRAFTING_TIME_HOUR_GLOBAL) end
			if GARAGE_CRAFTING_TIME_MINUTE_GLOBAL > 0 then SetVar("GarageCrafting_time_minute", GARAGE_CRAFTING_TIME_MINUTE_GLOBAL) end
			if GARAGE_CRAFTING_TIME_SECOND_GLOBAL > 0 then SetVar("GarageCrafting_time_second", GARAGE_CRAFTING_TIME_SECOND_GLOBAL) end
			if GARAGE_CRAFT_GLOBAL > 0 then SetVar("GarageCraft", GARAGE_CRAFT_GLOBAL) end
			if GARAGE_CRAFT_PAUSE_GLOBAL then SetVar("GarageCraftPause", GARAGE_CRAFT_PAUSE_GLOBAL) end

			TActivate("GlobalVar")

			TActivate("PetrolStations")

			TActivate("PlayerCarConfiguration")
			TActivate("IfChangeCar")
			TActivate("SpawnPlayer")
			TActivate("StartFadeEffect")

			TActivate("ItemsUse")

			TActivate("Gate_TheTown")

			TActivate("CreateBarrelBox")
			TActivate("CreateBoxForDeadScav")
			TActivate("CreateGunLootBox")
			TActivate("CreateMedicalLootBox")
			TActivate("CreateTehnoLootBox")
			TActivate("CreateToolsLootBox")
			TActivate("CreateValuablesLootBox")
			TActivate("CreateElectronicsLootBox")
			TActivate("CreateTheTownLootBox")
			TActivate("AddKeyGateBaseFelixInChests")

			TActivate("CreateBossProbability")

			TActivate("QuestsActivate")

			CreateNewBreakableObject("lamppost2", "fonar", 1002, CVector(3055.078, 349.812, 1446.906), Quaternion(0.0000, -0.7133, 0.0000, 0.7009), 0)

			if IsQuestItemPresent("quest_item_map_r1m1") and GetVar("Map").AsInt == 0 then
				map()
				SetVar("Map", 1)
			end
			
		</script>
	</trigger>

<!-- Создание ворот Южного -->
	<trigger Name="Gate_TheTown" active="0">
		<event 	timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			CreateNewDummyObject( "big_gate01", "gate_thetown", -1, -1, CVector(1235.100, 311.700, 2969.336), Quaternion(0.0000, 0.7210, 0.0000, 0.6930))
			CreateNewSgNodeObject( "big_gate01", "gate_thetown2", -1, -1, CVector(1262.195, 300, 2995.386), Quaternion(-0.004, 0.019, 0.000, 1.000), 1)
			getObj("gate_thetown"):SetNodeAction(AT_STAND2)
			TActivate("OpenGate_TheTown")

		trigger:Deactivate()    
		</script>
	</trigger>

<!-- Рандомизация работы заправок -->
	<trigger Name="PetrolStations" active="0">
		<event 	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

		local pr1 = random(2)
		local pr2 = random(2)
		local pr3 = random(2)

		if pr1 ==  2 then
			TActivate("UseFuelNil_InPetrolStation01")
			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK01", -1, -1, CVector(2575.530, 360.200, 2266.788), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_1_sound", -1, -1, CVector(2582.988, 348, 2267.327), Quaternion(0, 0, 0, 1))
		else
			TActivate ("NotWork_PetrolStation01")
		end

		if pr2 ==  2 then
			TActivate("UseFuelNil_InPetrolStation02")
			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK02", -1, -1, CVector(1317.154, 300.550, 1748.705), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_2_sound", -1, -1, CVector(1318.114, 288, 1756.060), Quaternion(0, 0, 0, 1))
		else
			TActivate ("NotWork_PetrolStation02")
		end

		if pr3 ==  2 then
			TActivate("UseFuelNil_InPetrolStation03")
			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK03", -1, -1, CVector(916.784, 320.600, 884.400), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_3_sound", -1, -1, CVector(912.397, 308, 878.329), Quaternion(0, 0, 0, 1))
		else
			TActivate ("NotWork_PetrolStation03")
		end

		if pr1 == 1 and pr2 == 1 and pr3 == 1 then
			local tr_prs_r = random(3)
	
			if tr_prs_r == 1 then
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK01", -1, -1, CVector(2575.530, 360.200, 2266.788), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
				CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_1_sound", -1, -1, CVector(2582.988, 348, 2267.327), Quaternion(0, 0, 0, 1))
				TActivate("UseFuelNil_InPetrolStation01")
				TDeactivate ("NotWork_PetrolStation01")
			elseif tr_prs_r == 2 then
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK02", -1, -1, CVector(1317.154, 300.550, 1748.705), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
				CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_2_sound", -1, -1, CVector(1318.114, 288, 1756.060), Quaternion(0, 0, 0, 1))
				TActivate("UseFuelNil_InPetrolStation02")
				TDeactivate ("NotWork_PetrolStation02")
			elseif tr_prs_r == 3 then	
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK03", -1, -1, CVector(916.784, 320.600, 884.400), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
				CreateNewSgNodeObject("ET_PS_S_VILLAGE01", "ps_3_sound", -1, -1, CVector(912.397, 308, 878.329), Quaternion(0, 0, 0, 1))
				TActivate("UseFuelNil_InPetrolStation03")
				TDeactivate ("NotWork_PetrolStation03")
			end
		end

		trigger:Deactivate()    
		</script>
	</trigger>

<!-- Узнаем конфигурацию машины игрока -->
	<trigger Name="IfChargeCar" active="1">
	<event eventid="GE_PLAYER_VEHICLE_CHANGED" ObjName="Player1" />
		<script>
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:setImmortalMode(1)
				vehPlayer:SetNameFromScript("PlayerCarForDead")
			end
			TActivate("FakePlayerDead")
			TActivate("PlayerCarConfiguration")
		</script>
	</trigger>

	<trigger Name="PlayerCarConfiguration" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>

			local chassis = GetPlayerVehicle():GetChassis():GetProperty("Prototype").AsString
			local cabin = GetPlayerVehicle():GetCabin()
			local basket = GetPlayerVehicle():GetBasket()
	
			if not(cabin == nil) then SetVar("PlayerCabin", cabin:GetProperty("Prototype")) else SetVar("PlayerCabin", "0") end
			if not(basket == nil) then SetVar("PlayerBasket", basket:GetProperty("Prototype")) else SetVar("PlayerBasket", "0") end

			local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
			local cab_small_1 = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN_1")
			local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
			local cab_big_2 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_2")
			local cab_giant = GetPlayerVehicle():GetPartByName("CABIN_GIANT_GUN")

			local basket_small_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")
			local basket_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
			local basket_big_1 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_1")
			local basket_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
			local basket_giant_0 = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN_0")
			local basket_side_0 = GetPlayerVehicle():GetPartByName("BASKET_SIDE_GUN_0")

			if not(cab_small == nil) then SetVar("Cabin_Small_Gun",cab_small:GetProperty("Prototype")) else SetVar("Cabin_Small_Gun", 0) end
			if not(cab_small_1 == nil) then SetVar("Cabin_Small_Gun_1",cab_small_1:GetProperty("Prototype")) else SetVar("Cabin_Small_Gun_1", 0) end
			if not(cab_big_1 == nil) then SetVar("Cabin_Big_Gun_1",cab_big_1:GetProperty("Prototype")) else SetVar("Cabin_Big_Gun_1", 0) end
			if not(cab_big_2 == nil) then SetVar("Cabin_Big_Gun_2",cab_big_2:GetProperty("Prototype")) else SetVar("Cabin_Big_Gun_2", 0) end
			if not(cab_giant == nil) then SetVar("Cabin_Giant_Gun",cab_giant:GetProperty("Prototype")) else SetVar("Cabin_Giant_Gun", 0) end

			if not(basket_small_0 == nil) then SetVar("Basket_Small_Gun_0",basket_small_0:GetProperty("Prototype")) else SetVar("Basket_Small_Gun_0", 0) end
			if not(basket_big_0 == nil) then SetVar("Basket_Big_Gun_0",basket_big_0:GetProperty("Prototype")) else SetVar("Basket_Big_Gun_0", 0) end
			if not(basket_big_1 == nil) then SetVar("Basket_Big_Gun_1",basket_big_1:GetProperty("Prototype")) else SetVar("Basket_Big_Gun_1", 0) end
			if not(basket_giant == nil) then SetVar("Basket_Giant_Gun",basket_giant:GetProperty("Prototype")) else SetVar("Basket_Giant_Gun", 0) end
			if not(basket_giant_0 == nil) then SetVar("Basket_Giant_Gun_0",basket_giant_0:GetProperty("Prototype")) else SetVar("Basket_Giant_Gun_0", 0) end
			if not(basket_side_0 == nil) then SetVar("Basket_Side_Gun_0",basket_side_0:GetProperty("Prototype")) else SetVar("Basket_Side_Gun_0", 0) end

			if strsub(chassis, 1, 10) == "bugChassis" then
				SetVar("PlayerCar", "Bug")
			elseif strsub(chassis, 1, 16) == "molokovozChassis" then
				SetVar("PlayerCar", "Molokovoz")
			elseif strsub(chassis, 1, 11) == "uralChassis" then
				SetVar("PlayerCar", "Ural")
			elseif strsub(chassis, 1, 12) == "belazChassis" then
				SetVar("PlayerCar", "Belaz")
			elseif strsub(chassis, 1, 17) == "mirotvorecChassis" then
				SetVar("PlayerCar", "Mirotvorec")
			elseif strsub(chassis, 1, 14) == "cruiserChassis" then
				SetVar("PlayerCar", "Cruiser")
			else
				SetVar("PlayerCar", chassis)
			end

			println("Cabin_Small_Gun:"..GetVar("Cabin_Small_Gun").AsString)
			println("Cabin_Small_Gun_1:"..GetVar("Cabin_Small_Gun_1").AsString)
			println("Cabin_Big_Gun_1:"..GetVar("Cabin_Big_Gun_1").AsString)
			println("Cabin_Big_Gun_2:"..GetVar("Cabin_Big_Gun_2").AsString)
			println("Cabin_Giant_Gun:"..GetVar("Cabin_Giant_Gun").AsString)

			println("Basket_Small_Gun_0:"..GetVar("Basket_Small_Gun_0").AsString)
			println("Basket_Big_Gun_0:"..GetVar("Basket_Big_Gun_0").AsString)
			println("Basket_Big_Gun_1:"..GetVar("Basket_Big_Gun_1").AsString)
			println("Basket_Giant_Gun:"..GetVar("Basket_Giant_Gun").AsString)
			println("Basket_Giant_Gun_0:"..GetVar("Basket_Giant_Gun_0").AsString)
			println("Basket_Side_Gun_0:"..GetVar("Basket_Side_Gun_0").AsString)

			println("Chassis:"..GetVar("PlayerCar").AsString.." Cabin:"..GetVar("PlayerCabin").AsString.." Basket:"..GetVar("PlayerBasket").AsString)
			
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Спавн игрока -->
	<trigger Name="SpawnPlayer" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>

			local posr1 = random(10)
			local posrr1={
				CVector(1111.746, 303.447, 3529.309),
				CVector(855.773, 303.874, 3299.838),
				CVector(1682.261, 298.439, 3438.135),
				CVector(1123.300, 291.430, 3159.539),
				CVector(2152.141, 315.074, 3580.439),
				CVector(1752.767, 293.082, 2798.231),
				CVector(2331.947, 337.677, 2469.048),
				CVector(1625.450, 318.769, 2383.752),
				CVector(3139.961, 356.520, 3144.354),
				CVector(3075.630, 357.404, 3489.001)} 

			local posr2 = random(10)
			local posrr2={
				CVector(2615.098, 320.599, 2020.458),
				CVector(2970.576, 353.945, 1370.649), 
				CVector(1564.693, 307.840, 1808.458), 
				CVector(474.234, 314.937, 1476.468),
				CVector(837.313, 281.698, 631.074),
				CVector(1803.762, 303.403, 489.376),
				CVector(2393.522, 303.432, 976.278),
				CVector(2634.281, 320.436, 907.682),
				CVector(3487.845, 324.339, 748.105),
				CVector(3225.707, 320.430, 1334.481)}

			local Z = random(9)		
			local rotarr={
				Quaternion(-0.029, 0.679, -0.021, 0.734),
				Quaternion(0.001, 0.626, 0.002, 0.780),
				Quaternion(-0.001, 0.558, -0.001, 0.830),
				Quaternion(-0.029, -0.025, 0.005, 0.999),
				Quaternion(-0.001, -0.346, 0.001, 0.938),
				Quaternion(-0.001, -0.724, -0.000, 0.690),
				Quaternion(-0.025, -0.992, -0.005, 0.125),
				Quaternion(0.002, -0.914, -0.001, 0.405),
				Quaternion(-0.003, -1.000, -0.006, -0.015)}

			local spawns = random(2)

			if spawns == 1 then
				SetVar("PosPlayer1",posr1)
				SetVar("SpawnPlayer",1)
				TActivate("Exits_RidzinBaseTroiskoe")
			else
				SetVar("PosPlayer2",posr2)
				SetVar("SpawnPlayer",2)
				TActivate("Exits_FaterTownGloohoe")
			end
		
			local vehPlayer = GetPlayerVehicle()
			if vehPlayer then
				vehPlayer:SetRotation(rotarr[Z])
				vehPlayer:setImmortalMode(1)
				if spawns == 1 then
					vehPlayer:SetGamePositionOnGround(posrr1[posr1])
				else
					vehPlayer:SetGamePositionOnGround(posrr2[posr2])
				end
				vehPlayer:SetNameFromScript("PlayerCarForDead")
				vehPlayer:SetThrottle(0)
				vehPlayer:SetCustomLinearVelocity(0)
			end

			TActivate("SpawnsScavs")
			TActivate("FakePlayerDead")

			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Таймер рейда -->
	<trigger Name="TimerRaidStart" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("TimeRaidMinute",13)
			SetVar("TimeRaidSecond",59)
			SetVar("TimeRaidMsg", 0)
			TActivate("TimerRaid")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="TimerRaid" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			
			local min = GetVar("TimeRaidMinute").AsInt
			local sec = GetVar("TimeRaidSecond").AsInt

			local nulM = ""
			local nulS = ""

			if 10 > min then nulM = 0 end
			if 10 > sec then nulS = 0 end

			local Msg = nulM..min..":"..nulS..sec

			SetVar("TimeRaidMsg", Msg)
		
			if min == 13 and sec == 59 then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid", Msg)
			elseif min == 10 and sec == 1 then
				TActivate("AirDropProbability")
			elseif min == 9 and sec == 59 then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid", Msg)
			elseif min == 5 and sec == 59 then
				TActivate("CreateScavs")
			elseif min == 4 and sec == 59 or min == 2 and sec == 59 or min == 1 and sec == 59 then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid_red", Msg)
			elseif min == 0 and sec == 59 or min == 0 and sec == 30 or min == 0 and sec == 10  or min == 0 and 5 >= sec and not(sec == 0) then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid_red", Msg)
			end

			if GetVar("ChestScavs_time_hour").AsInt > 0 or GetVar("ChestScavs_time_minute").AsInt > 0 or GetVar("ChestScavs_time_second").AsInt > 0 then
				if GetVar("ChestScavs_Search").AsInt > 0 then
					TActivate("ChestScav_Timer")
				end
			end

			if GetVar("Generator_on").AsInt == 1 then
				if GetVar("Generator_lvl").AsInt == 1 or GetVar("Generator_lvl").AsInt == 2 then
					TActivate("Generator_Timer")
				end

				if GetVar("GarageCrafting_time_hour").AsInt > 0 or GetVar("GarageCrafting_time_minute").AsInt > 0 or GetVar("GarageCrafting_time_second").AsInt > 0 then
					if GetVar("GarageCraftPause").AsInt == 0 then
						TActivate("GarageCrafting_Timer")
					end
				end
			end

			if not(0 > min) then
				sec = sec - 1
				SetVar("TimeRaidSecond",sec)
				if 0 > sec then 
					SetVar("TimeRaidSecond",59)
					min = min - 1
					SetVar("TimeRaidMinute",min)
				end
			end

			if 0 > min and 0 >= sec then
				TActivate("cutTimeRaid")
				trigger:Deactivate() 
			end
			
		</script>
	</trigger>

<!-- Таймеры в убежище -->
	<trigger Name="ChestScav_Timer" active="0">
		<event 	timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local hourC = GetVar("ChestScavs_time_hour").AsInt
			local minC = GetVar("ChestScavs_time_minute").AsInt
			local secC = GetVar("ChestScavs_time_second").AsInt
			--println("Chest: "..hourC.." "..minC.." "..secC)
			if not(0 > hourC) and not(0 > minC) then
				secC = secC - 1
				SetVar("ChestScavs_time_second", secC)
				if 0 > secC then
					SetVar("ChestScavs_time_second", 59)
					minC = minC - 1
					SetVar("ChestScavs_time_minute", minC)
				end
				if 0 > minC then
					SetVar("ChestScavs_time_minute", 59)
					hourC = hourC - 1
					SetVar("ChestScavs_time_hour", hourC)
				end
			end

			if hourC == 0 and minC == 0 and secC == 0 then
				SetVar("ChestScavs_time_hour", 0)
				SetVar("ChestScavs_time_minute", 0)
				SetVar("ChestScavs_time_second", 0)
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Generator_Timer" active="0">
		<event 	timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local hourG = GetVar("Generator_time_work_hour").AsInt
			local minG = GetVar("Generator_time_work_minute").AsInt
			local secG = GetVar("Generator_time_work_second").AsInt
			--println("Genetator: "..hourG.." "..minG.." "..secG)
			if not(0 > hourG) and not(0 > minG) then
				secG = secG - 1
				SetVar("Generator_time_work_second", secG)
				if 0 > secG then
					SetVar("Generator_time_work_second", 59)
					minG = minG - 1
					SetVar("Generator_time_work_minute", minG)
				end
				if 0 > minG then
					SetVar("Generator_time_work_minute", 59)
					hourG = hourG - 1
					SetVar("Generator_time_work_hour", hourG)
				end
			end

			if hourG == 0 and minG == 0 and secG == 0 then
				SetVar("Generator_time_work_second", 0)
				SetVar("Generator_time_work_minute", 0)
				SetVar("Generator_time_work_hour", 0)
				SetVar("Generator_on", 0)
				if GetVar("GarageCrafting_time_hour").AsInt > 0 or GetVar("GarageCrafting_time_minute").AsInt > 0 or GetVar("GarageCrafting_time_second").AsInt > 0 then
					SetVar("GarageCraftPause", 1)
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="GarageCrafting_Timer" active="0">
		<event 	timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local hourGC = GetVar("GarageCrafting_time_hour").AsInt
			local minGC = GetVar("GarageCrafting_time_minute").AsInt
			local secGC = GetVar("GarageCrafting_time_second").AsInt
			--println("Craft: "..hourGC.." "..minGC.." "..secGC)
			if not(0 > hourGC) and not(0 > minGC) then
				secGC = secGC - 1
				SetVar("GarageCrafting_time_second", secGC)
				if 0 > secGC then
					SetVar("GarageCrafting_time_second", 59)
					minGC = minGC - 1
					SetVar("GarageCrafting_time_minute", minGC)
				end
				if 0 > minGC then
					SetVar("GarageCrafting_time_minute", 59)
					hourGC = hourGC - 1
					SetVar("GarageCrafting_time_hour", hourGC)
				end
			end

			if hourGC == 0 and minGC == 0 and secGC == 0 then
				SetVar("GarageCrafting_time_second", 0)
				SetVar("GarageCrafting_time_minute", 0)
				SetVar("GarageCrafting_time_hour", 0)
				SetVar("GarageCraftPause", 0)
				SetVar("GarageCraft", 2)
			end
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Всплывающее сообщение с информацией о рейде -->
	<trigger Name="MessageRaid" active="0">
		<event timeout="7" eventid="GE_TIME_PERIOD" />
		<script>
		
			local l = GetVar("CountRaids").AsInt
			l = l + 1
			SetVar("CountRaids", l)
			local count = GetVar("CountRaids").AsInt
			
			local time = g_ObjCont:GetGameTime().AsString
			
			local hour = tonumber(strsub(time, 1, 2))
			local minute
			local day

			local nulH = ""
			local nulM = ""

			if 10 > hour then 
				nulH = 0
				minute = tonumber(strsub(time, 3, 4)) 
				day = tonumber(strsub(time, 5, 7))
			else
				minute = tonumber(strsub(time, 4, 5)) 
				day = tonumber(strsub(time, 6, 8))
			end

			if 10 > minute then nulM = 0 end

			local TextTime = day.." "..nulH..hour..":"..nulM..minute

			local user = os.getenv("USERNAME")

			local Msg = "Рейд №"..count.."|День: "..TextTime.."|Оператор ЧВК "..user.."|Край"

			AddFadingMsgByStrIdFormatted("fm_raid_info", Msg)

			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Активация выходов  Фатер(Рандом) База Глухое -->
	<trigger Name="Exits_FaterTownGloohoe" active="0">
		<event 	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

			local RoadToFaterRandom = random  (2)
			if RoadToFaterRandom == 1 then
				TActivate ("RoadToFater")
				SetVar("ExitRoadToFater",1)
				CreateNewSgNodeObject("ET_PS_GREEN_SMOKE", "SmokeRoadToFater1", -1, -1, CVector(2085.447, 312.800, 3646.448), Quaternion(0, 0, 0, 0), 2)
				CreateNewSgNodeObject("ET_PS_GREEN_SMOKE", "SmokeRoadToFater2", -1, -1, CVector(2064.941, 330.600, 3664.033), Quaternion(0, 0, 0, 0), 2)
			end

			TActivate ("ZaTheGloohoe")
			TActivate ("BaseFelix")

			local ExitZaTheTroiskoeRandom = random (2)
			if ExitZaTheTroiskoeRandom == 1 then
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LightZaTheTroiskoeExit1", -1, -1, CVector(3055.050, 356.400, 1447.950), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.3)
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LightZaTheTroiskoeExit2", -1, -1, CVector(3055.150, 356.400, 1445.900), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.3)
				CreateNewSgNodeObject("ET_LS_LIGHT_TEST", "LightZaTheTroiskoeExit3", -1, -1, CVector(3056.365, 358.100, 1446.900), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.1)
				TActivate ("FonarZaTheTroiskoeExit_Broken")
				SetVar("ExitZaTheTroiskoe",1)
			end

			trigger:Deactivate()
		</script>
	</trigger>

<!-- Активация выходов  Риджин База Троицкое(Рандом) -->
	<trigger Name="Exits_RidzinBaseTroiskoe" active="0">
		<event 	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

			TActivate ("RoadToRidzin")
			TActivate ("BaseFelix")

			local ExitZaTheTroiskoeRandom = random (2)
			if ExitZaTheTroiskoeRandom == 1 then
				TActivate ("ZaTheTroiskoe")
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LightZaTheTroiskoeExit1", -1, -1, CVector(3055.050, 356.400, 1447.950), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.3)
				CreateNewSgNodeObject("ET_PS_LENS_D4", "LightZaTheTroiskoeExit2", -1, -1, CVector(3055.150, 356.400, 1445.900), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.3)
				CreateNewSgNodeObject("ET_LS_LIGHT_TEST", "LightZaTheTroiskoeExit3", -1, -1, CVector(3056.365, 358.100, 1446.900), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.1)
				TActivate ("FonarZaTheTroiskoeExit_Broken")
				SetVar("ExitZaTheTroiskoe",1)
			end

			local RoadToFaterRandom = random  (2)
			if RoadToFaterRandom == 1 then
				SetVar("ExitRoadToFater",1)
				CreateNewSgNodeObject("ET_PS_GREEN_SMOKE", "SmokeRoadToFater1", -1, -1, CVector(2085.447, 312.800, 3646.448), Quaternion(0, 0, 0, 0), 2)
				CreateNewSgNodeObject("ET_PS_GREEN_SMOKE", "SmokeRoadToFater2", -1, -1, CVector(2064.941, 330.600, 3664.033), Quaternion(0, 0, 0, 0), 2)
			end
		
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="FonarZaTheTroiskoeExit_Broken" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="fonar" />
		<script>

			for i=1,3 do
				local light = GetEntityByName("LightZaTheTroiskoeExit"..i)
				if light then light:Remove() end
			end
	
			trigger:Deactivate()
 		</script>
	</trigger>

<!-- Зоны выхода -->
	<trigger Name="RoadToFater" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR1M3_Exit" />
		<script>
			if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
				SetVar("ExitTimer",6)
				AddImportantFadingMsgByStrIdFormatted("fm_player_exit_enters_location", "ExitRoadToFater")
				SoundFadingMsg()
				TActivate ("LeaveZoneExit")
				TActivate ("ExitTimer")
			end
		</script>
	</trigger>

	<trigger Name="ZaTheGloohoe" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR5M1_Exit" />
		<script>
			if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
				SetVar("ExitTimer",6)
				AddImportantFadingMsgByStrIdFormatted("fm_player_exit_enters_location", "ExitZaTheGloohoe")
				SoundFadingMsg()
				TActivate ("LeaveZoneExit")
				TActivate ("ExitTimer")
			end
 		</script>
	</trigger>

	<trigger Name="ToR4M1" active="1">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR4M1_Exit" />
		<script>
			local b = SpawnMessageBox("90003")
			if b == 1 then
				if R4M1_exit then R4M1_exit = 1 end
				TActivate("cutExitR4M1")
			end
 		</script>
	</trigger>

	<trigger Name="RoadToRidzin" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR1M2_Exit" />
		<script>
			if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
				SetVar("ExitTimer",6)
				AddImportantFadingMsgByStrIdFormatted("fm_player_exit_enters_location", "ExitRoadToRidzin")
				SoundFadingMsg()
				TActivate ("LeaveZoneExit")
				TActivate ("ExitTimer")
			end
 		</script>
	</trigger>

	<trigger Name="BaseFelix" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="BaseFelix_Exit" />
		<script>
			if HasPlayerAmountOfItems("item_key_gate_basefelix", 1) and GetVar("ExitBaseFelixOpen").AsInt == 0 then
				local b = SpawnMessageBox("90002")
				if b == 1 then
					if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
						RemoveItemsFromPlayerRepository("item_key_gate_basefelix", 1)
						AddFadingMsgByStrIdFormatted("fm_item_to_npc", "item_key_gate_basefelix")
						SetVar("ExitBaseFelixOpen", 1)
						TActivate("BaseFelixExtract")
					end
				end
			else
				AddFadingMsgByStrIdFormatted("fm_not_key")
				SoundFadingMsg()
			end

			if GetVar("ExitBaseFelixOpen").AsInt == 1 then
				TActivate("BaseFelixExtract")
			end
 		</script>
	</trigger>

	<trigger Name="BaseFelixExtract" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("ExitTimer",6)
			AddImportantFadingMsgByStrIdFormatted("fm_player_exit_enters_location", "ExitBaseFelix")
			SoundFadingMsg()
			TActivate ("LeaveZoneExit")
			TActivate ("ExitTimer")
			trigger:Deactivate()
 		</script>
	</trigger>

	<trigger Name="ZaTheTroiskoe" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ZaTheTroiskoe_Exit" />
		<script>
			if GetVar("PetrolStation_Refill_Process").AsInt == 0 then
				SetVar("ExitTimer",6)
				AddImportantFadingMsgByStrIdFormatted("fm_player_exit_enters_location", "ExitZaTheTroiskoe")
				SoundFadingMsg()
				TActivate ("LeaveZoneExit")
				TActivate ("ExitTimer")
			end
 		</script>
	</trigger>

<!-- Игрок покидает зону выхода -->
	<trigger Name="LeaveZoneExit" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="ToR1M3_Exit" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="ToR5M1_Exit" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="ToR1M2_Exit" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="BaseFelix_Exit" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="ZaTheTroiskoe_Exit" />
		<script>
			AddImportantFadingMsgByStrIdFormatted("fm_player_exit_leaves_location")
			SoundFadingMsg()
			TDeactivate("ExitTimer")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Таймер выхода -->
	<trigger Name="ExitTimer" active="0">
		<event 	timeout="1" eventid="GE_TIME_PERIOD" />
		<script>

			local timer = GetVar("ExitTimer").AsInt - 1
			SetVar("ExitTimer", timer)
	
			if timer == 0 then
				TActivate("ExitToMap")
				TDeactivate("LeaveZoneExit")
				SetVar("ExitTimer",6)
				PassToMap("r0m0", "FromLocation")
				TActivate("IfExitForQuest")
				trigger:Deactivate()
			else
				AddFadingMsgByStrIdFormatted("fm_player_exit_location", timer)
			end

		</script>
	</trigger>

<!-- Показать выходы -->
	<trigger Name="ShowExits_Start" active="0">
		<event 	timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("ShowExits")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ShowExits" active="0">
		<event eventid="GE_PLAYER_VEHICLE_HORN" ObjName="Player1" />
		<script>

			if 5 > GetVar("TimeRaidMinute").AsInt and not(0 > GetVar("TimeRaidMinute").AsInt) then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid_red", GetVar("TimeRaidMsg").AsString)
			elseif 0 >= GetVar("TimeRaidMinute").AsInt and GetVar("TimeRaidSecond").AsInt == 59 then
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid_red", GetVar("TimeRaidMsg").AsString)
			else
				AddImportantFadingMsgByStrIdFormatted("fm_time_raid", GetVar("TimeRaidMsg").AsString)
			end

			if GetVar("SpawnPlayer").AsInt == 1 then
				AddFadingMsgByStrIdFormatted("fm_player_search_exit_zone", "Exits2LocationR1M1")
			else
				AddFadingMsgByStrIdFormatted("fm_player_search_exit_zone", "Exits1LocationR1M1")
			end

			TActivate("ShowExits_Activate")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ShowExits_Activate" active="0">
		<event 	timeout="7" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("ShowExits")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Спавны диких -->
	<trigger Name="SpawnScavsInLocation01" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(1564.401, 283.438, 2912.205),
				CVector(1586.684, 283.435, 2985.581),
				CVector(1687.731, 283.448, 2924.311),
				CVector(1688.141, 283.455, 2841.496),
				CVector(1548.015, 283.482, 2938.041),
				CVector(1493.763, 283.514, 3017.073),
				CVector(1520.352, 283.506, 2875.073),
				CVector(1642.672, 283.471, 2946.938),
				CVector(1679.043, 283.529, 2809.833),
				CVector(1602.316, 283.474, 2905.048),
				CVector(1488.665, 283.470, 2924.514)
			}
			local pos_rand = getn(pos)

			local path = {CVector(1624.129, 283.657, 2807.563), CVector(1721.746, 286.512, 2847.206), CVector(1688.202, 283.547, 2879.869), CVector(1645.460, 283.595, 2955.260), CVector(1582.189, 284.303, 3024.591), CVector(1490.085, 283.625, 3008.741), CVector(1429.187, 286.236, 2970.178), CVector(1434.928, 287.164, 2881.619), CVector(1501.409, 283.559, 2899.368), CVector(1589.801, 283.591, 2936.334), CVector(1627.208, 283.528, 2902.810), CVector(1575.561, 284.098, 2798.970)}
			
			local count_scav = random(1,2)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc1", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc1_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end
	
				local sv_p = GetEntityByName ("Scav"..j.."_loc1")
				if sv_p then
					sv_p:StackOpen()
					for d=1,12 do
						sv_p:SetDestination(path[random(12)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation01_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc1_vehicle_0")
				end
				SetVar("CountScav_1_loc", count_scav)
				TActivate("ScavInLocation01_Die")
			end

			TActivate("SpawnScavsInLocation01_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation01_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_1_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation01_Die")
			for s1=1,GetVar("CountScav_1_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc1_vehicle_0") end
			end

			SetVar("CountScav_1_loc", 0)
			TActivate("SpawnScavsInLocation01_Restart")
			TDeactivate("SpawnScavsInLocation01_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation01_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation01_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation01_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_1_loc" />
		<script>
			TActivate("SpawnScavsInLocation01")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation01_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_1_loc" />
		<script>
			TActivate("ScavInLocation01_Remove")
			TActivate("SpawnScavsInLocation01_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation01_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation01_Die")

			local tr = getObj("ScavInLocation01_Die")

			for s1=1,GetVar("CountScav_1_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc1_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc1_vehicle_0") end
			end

			SetVar("CountScav_1_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation02" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										
		
			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(2263.013, 303.519, 3062.209),
				CVector(2165.329, 309.395, 3035.917),
				CVector(2323.100, 320.984, 2932.565),
				CVector(2372.090, 320.599, 3051.211),
				CVector(2239.084, 303.443, 3173.617),
				CVector(2250.621, 322.002, 2838.286),
				CVector(2371.595, 319.324, 2885.899),
				CVector(2352.693, 320.054, 2989.255),
				CVector(2284.689, 303.459, 3156.785),
				CVector(2148.864, 312.817, 3008.083)
			}
			local pos_rand = getn(pos)

			local path = {CVector(2275.193, 304.085, 3055.022), CVector(2279.176, 303.750, 3179.677), CVector(2327.265, 316.909, 3014.011), CVector(2354.767, 320.404, 2957.019), CVector(2296.965, 320.995, 2878.725), CVector(2263.522, 324.053, 2812.150), CVector(2304.156, 322.725, 2749.460), CVector(2374.134, 321.688, 2773.182), CVector(2157.323, 331.988, 2828.024), CVector(2159.778, 311.620, 3022.796)}

			local count_scav = random(2,4)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc2", 1082, pos[random(pos_rand)], {model}, nil, 1)
				
				local sv = GetEntityByName ("Scav"..j.."_loc2_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc2")
				if sv_p then
					sv_p:StackOpen()
					for d=1,10 do
						sv_p:SetDestination(path[random(10)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation02_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc2_vehicle_0")
				end
				SetVar("CountScav_2_loc", count_scav)
				TActivate("ScavInLocation02_Die")
			end

			TActivate("SpawnScavsInLocation02_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation02_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_2_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation02_Die")
			for s1=1,GetVar("CountScav_2_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc2_vehicle_0") end
			end

			SetVar("CountScav_2_loc", 0)
			TActivate("SpawnScavsInLocation02_Restart")
			TDeactivate("SpawnScavsInLocation02_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="SpawnScavsInLocation02_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation02_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation02_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_2_loc" />
		<script>
			TActivate("SpawnScavsInLocation02")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation02_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_2_loc" />
		<script>
			TActivate("ScavInLocation02_Remove")
			TActivate("SpawnScavsInLocation02_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation02_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation02_Die")

			local tr = getObj("ScavInLocation02_Die")

			for s1=1,GetVar("CountScav_2_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc2_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc2_vehicle_0") end
			end

			SetVar("CountScav_2_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation03" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(1665.685, 303.437, 2049.838),
				CVector(1581.001, 303.477, 2006.550),
				CVector(1667.219, 303.454, 2142.783),
				CVector(1670.849, 307.441, 1923.351),
				CVector(1541.855, 307.388, 1866.618),
				CVector(1545.604, 309.101, 2083.526),
				CVector(1672.272, 305.451, 1978.626),
				CVector(1635.304, 306.184, 1855.479),
				CVector(1632.388, 307.477, 1931.234),
				CVector(1566.056, 305.901, 1806.138),
				CVector(1528.131, 307.570, 1878.879),
				CVector(1544.251, 304.637, 2027.585),
				CVector(1685.298, 303.492, 2266.394)
			}
			local pos_rand = getn(pos)

			local path = {CVector(1669.522, 303.936, 2246.068), CVector(1610.599, 307.127, 2245.423), CVector(1579.475, 309.320, 2157.021), CVector(1551.033, 307.068, 2070.690), CVector(1541.842, 304.654, 1997.757), CVector(1612.396, 303.630, 2010.833), CVector(1678.682, 304.701, 1990.303), CVector(1624.556, 307.653, 1899.555), CVector(1559.774, 307.472, 1792.312)}

			local count_scav = random(2,4)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc3", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc3_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc3")
				if sv_p then
					sv_p:StackOpen()
					for d=1,9 do
						sv_p:SetDestination(path[random(9)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation03_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc3_vehicle_0")
				end
				SetVar("CountScav_3_loc", count_scav)
				TActivate("ScavInLocation03_Die")
			end

			TActivate("SpawnScavsInLocation03_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation03_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_3_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation03_Die")
			for s1=1,GetVar("CountScav_3_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc3_vehicle_0") end
			end

			SetVar("CountScav_3_loc", 0)
			TActivate("SpawnScavsInLocation03_Restart")
			TDeactivate("SpawnScavsInLocation03_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation03_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation03_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation03_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_3_loc" />
		<script>
			TActivate("SpawnScavsInLocation03")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation03_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_3_loc" />
		<script>
			TActivate("ScavInLocation03_Remove")
			TActivate("SpawnScavsInLocation03_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation03_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation03_Die")

			local tr = getObj("ScavInLocation03_Die")

			for s1=1,GetVar("CountScav_3_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc3_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc3_vehicle_0") end
			end

			SetVar("CountScav_3_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation04" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(2702.370, 322.164, 1611.721),
				CVector(2705.744, 322.169, 1688.076),
				CVector(2658.612, 322.083, 1853.575),
				CVector(2573.281, 320.514, 1938.365),
				CVector(2738.751, 313.645, 1800.734),
				CVector(2743.269, 320.740, 1920.510),
				CVector(2674.795, 322.137, 1860.188),
				CVector(2516.913, 320.610, 2000.786),
				CVector(2530.969, 322.766, 1794.229)
			}
			local pos_rand = getn(pos)

			local path = {CVector(2672.253, 322.302, 2015.169), CVector(2612.331, 320.786, 2054.457), CVector(2577.770, 320.765, 2022.757), CVector(2589.958, 320.663, 1958.336), CVector(2689.345, 320.804, 1876.304), CVector(2662.642, 320.594, 1781.011), CVector(2602.172, 320.621, 1793.862), CVector(2749.990, 312.899, 1804.018), CVector(2576.072, 322.745, 1662.243), CVector(2664.245, 322.290, 1686.177), CVector(2700.591, 322.415, 1602.208)}

			local count_scav = random(2,4)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc4", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc4_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc4")
				if sv_p then
					sv_p:StackOpen()
					for d=1,11 do
						sv_p:SetDestination(path[random(11)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation04_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc4_vehicle_0")
				end
				SetVar("CountScav_4_loc", count_scav)
				TActivate("ScavInLocation04_Die")
			end

			TActivate("SpawnScavsInLocation04_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation04_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_4_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation04_Die")
			for s1=1,GetVar("CountScav_4_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc4_vehicle_0") end
			end

			SetVar("CountScav_4_loc", 0)
			TActivate("SpawnScavsInLocation04_Restart")
			TDeactivate("SpawnScavsInLocation04_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation04_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation04_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation04_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_4_loc" />
		<script>
			TActivate("SpawnScavsInLocation04")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation04_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_4_loc" />
		<script>
			TActivate("ScavInLocation04_Remove")
			TActivate("SpawnScavsInLocation04_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation04_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation04_Die")

			local tr = getObj("ScavInLocation04_Die")
			
			for s1=1,GetVar("CountScav_4_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc4_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc4_vehicle_0") end
			end

			SetVar("CountScav_4_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation05" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(420.572, 303.920, 1880.381),
				CVector(397.604, 310.553, 1826.944),
				CVector(532.343, 309.037, 1932.745),
				CVector(543.444, 306.751, 1829.819),
				CVector(419.571, 311.368, 1752.282),
				CVector(442.522, 303.481, 1903.166),
				CVector(492.440, 304.556, 1837.240),
				CVector(590.035, 308.558, 1703.699),
				CVector(424.326, 311.632, 1651.122),
				CVector(398.219, 311.386, 1705.645),
				CVector(402.336, 303.822, 1896.136)
			}
			local pos_rand = getn(pos)

			local path = {CVector(453.605, 303.648, 1922.423), CVector(515.726, 303.965, 1842.498), CVector(511.420, 303.647, 1766.025), CVector(547.475, 309.252, 1893.809), CVector(443.120, 304.213, 1888.784), CVector(456.088, 307.184, 1968.080), CVector(602.015, 308.198, 1728.408), CVector(414.523, 311.682, 1666.536)}

			local count_scav = random(3,5)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc5", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc5_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc5")
				if sv_p then
					sv_p:StackOpen()
					for d=1,8 do
						sv_p:SetDestination(path[random(8)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation05_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc5_vehicle_0")
				end
				SetVar("CountScav_5_loc", count_scav)
				TActivate("ScavInLocation05_Die")
			end

			TActivate("SpawnScavsInLocation05_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation05_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_5_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation05_Die")
			for s1=1,GetVar("CountScav_5_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc5_vehicle_0") end
			end

			SetVar("CountScav_5_loc", 0)
			TActivate("SpawnScavsInLocation05_Restart")
			TDeactivate("SpawnScavsInLocation05_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation05_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation05_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation05_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_5_loc" />
		<script>
			TActivate("SpawnScavsInLocation05")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation05_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_5_loc" />
		<script>
			TActivate("ScavInLocation05_Remove")
			TActivate("SpawnScavsInLocation05_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation05_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation05_Die")

			local tr = getObj("ScavInLocation05_Die")
	
			for s1=1,GetVar("CountScav_5_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc5_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc5_vehicle_0") end
			end

			SetVar("CountScav_5_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation06" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)
	
			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(1829.370, 303.434, 474.386),
				CVector(1814.164, 302.699, 533.537), 
				CVector(1901.981, 303.332, 444.155), 
				CVector(1952.167, 296.927, 493.219),
				CVector(1941.919, 296.727, 546.866),
				CVector(2005.161, 296.727, 537.432), 
				CVector(2073.147, 296.731, 493.436),
				CVector(2038.101, 303.433, 403.550), 
				CVector(1808.055, 298.325, 637.908),
				CVector(2113.958, 296.943, 476.297),
				CVector(2082.331, 296.853, 565.255),
				CVector(2211.945, 296.852, 572.414),
				CVector(2048.997, 297.206, 465.449),
				CVector(1969.139, 296.415, 544.258),
				CVector(1789.647, 302.499, 543.845),
				CVector(1879.348, 305.876, 427.067),
				CVector(2005.150, 303.691, 390.745),
				CVector(1982.356, 297.297, 481.381),
				CVector(1968.408, 296.720, 562.346),
				CVector(2031.029, 297.024, 564.359),
				CVector(2174.980, 296.570, 490.284)
			}
			local pos_rand = getn(pos)

			local path = {CVector(1780.501, 302.568, 556.062), CVector(1796.444, 302.470, 602.812), CVector(1871.440, 297.234, 610.530), CVector(1941.116, 296.966, 503.908), CVector(1962.834, 303.572, 428.635), CVector(2057.774, 303.498, 415.973), CVector(2115.615, 301.251, 438.287), CVector(2186.515, 296.741, 492.212), CVector(2139.554, 296.793, 546.466), CVector(2091.694, 296.867, 558.750), CVector(1966.422, 296.782, 552.349)}

			local count_scav = random(1,4)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc6", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc6_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc6")
				if sv_p then
					sv_p:StackOpen()
					for d=1,11 do
						sv_p:SetDestination(path[random(11)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation06_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc6_vehicle_0")
				end
				SetVar("CountScav_6_loc", count_scav)
				TActivate("ScavInLocation06_Die")
			end

			TActivate("SpawnScavsInLocation06_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation06_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_6_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation06_Die")
			for s1=1,GetVar("CountScav_6_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc6_vehicle_0") end
			end

			SetVar("CountScav_6_loc", 0)
			TActivate("SpawnScavsInLocation06_Restart")
			TDeactivate("SpawnScavsInLocation06_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation06_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation06_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation06_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_6_7_loc" />
		<script>
			TActivate("SpawnScavsInLocation06")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation06_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_6_7_loc" />
		<script>
			TActivate("ScavInLocation06_Remove")
			TActivate("SpawnScavsInLocation06_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation06_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation06_Die")

			local tr = getObj("ScavInLocation06_Die")

			for s1=1,GetVar("CountScav_6_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc6_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc6_vehicle_0") end
			end

			SetVar("CountScav_6_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation07" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)

			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(2207.095, 303.386, 920.830),
				CVector(2148.109, 309.500, 974.739),
				CVector(2073.713, 309.315, 981.323),
				CVector(2064.959, 302.426, 921.658),
				CVector(2139.876, 302.436, 895.461),
				CVector(2245.347, 298.226, 842.160),
				CVector(2225.915, 303.195, 932.199),
				CVector(2080.937, 301.558, 888.110),
				CVector(2016.390, 301.505, 920.987),
				CVector(2088.082, 302.596, 806.707),
				CVector(2175.297, 303.288, 936.533),
				CVector(2235.996, 301.455, 860.743),
				CVector(2207.973, 298.188, 808.572),
				CVector(2262.655, 303.661, 891.134),
				CVector(2258.209, 302.185, 1014.408)
			}
			local pos_rand = getn(pos)

			local path = {CVector(1971.739, 302.472, 951.001), CVector(2050.920, 301.738, 905.167), CVector(2113.665, 302.513, 899.520), CVector(2157.544, 302.700, 936.778), CVector(2209.236, 303.580, 907.247), CVector(2247.232, 302.144, 958.265), CVector(2302.053, 304.369, 973.852), CVector(2337.177, 303.666, 828.817), CVector(2118.364, 302.579, 860.890)}

			local count_scav = random (1,3)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc7", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc7_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc7")
				if sv_p then
					sv_p:StackOpen()
					for d=1,9 do
						sv_p:SetDestination(path[random(9)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation07_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc7_vehicle_0")
				end
				SetVar("CountScav_7_loc", count_scav)
				TActivate("ScavInLocation07_Die")
			end

			TActivate("SpawnScavsInLocation07_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation07_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_7_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation07_Die")
			for s1=1,GetVar("CountScav_7_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc7_vehicle_0") end
			end

			SetVar("CountScav_7_loc", 0)
			TActivate("SpawnScavsInLocation07_Restart")
			TDeactivate("SpawnScavsInLocation07_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation07_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation07_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation07_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_6_7_loc" />
		<script>
			TActivate("SpawnScavsInLocation07")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation07_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_6_7_loc" />
		<script>
			TActivate("ScavInLocation07_Remove")
			TActivate("SpawnScavsInLocation07_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation07_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation07_Die")

			local tr = getObj("ScavInLocation07_Die")

			for s1=1,GetVar("CountScav_7_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc7_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc7_vehicle_0") end
			end

			SetVar("CountScav_7_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation08" active="0">
		<event 	timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)

			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(2972.051, 320.433, 1125.147),
				CVector(3014.882, 316.343, 1099.257), 
				CVector(2903.515, 315.586, 1061.878), 
				CVector(3041.111, 316.206, 1075.490),
				CVector(2973.327, 315.434, 917.303), 
				CVector(2945.971, 315.682, 886.681), 
				CVector(2890.712, 315.643, 1003.081), 
				CVector(3009.814, 316.172, 887.672),
				CVector(2950.651, 316.184, 812.585),
				CVector(2948.575, 317.522, 761.192),
				CVector(2828.036, 317.664, 826.088),
				CVector(2782.650, 322.225, 918.752),
				CVector(2874.278, 315.809, 994.929),
				CVector(2979.917, 315.747, 1055.852),
				CVector(3013.404, 316.956, 917.937),
				CVector(3122.531, 315.057, 905.625),
				CVector(3127.443, 315.738, 1047.144),
				CVector(2973.966, 320.693, 1152.280),
				CVector(2839.062, 320.506, 1069.458)
			}
			local pos_rand = getn(pos)

			local path = {CVector(3013.713, 315.633, 1020.278), CVector(2928.279, 315.541, 1042.287), CVector(2905.023, 316.267, 933.945), CVector(3002.050, 318.170, 839.534), CVector(2853.905, 319.588, 899.682), CVector(2788.217, 320.473, 928.003), CVector(2746.130, 317.908, 854.060), CVector(2895.664, 315.417, 1034.458)}

			local count_scav = random(2,4)

			for j=1,count_scav do
				local model = enemylist[random(scav)]
				TeamCreate("Scav"..j.."_loc8", 1082, pos[random(pos_rand)], {model}, nil, 1)

				local sv = GetEntityByName ("Scav"..j.."_loc8_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					local biggunspawn = random(100)
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" and biggunspawn >= 70 then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_p = GetEntityByName ("Scav"..j.."_loc8")
				if sv_p then
					sv_p:StackOpen()
					for d=1,8 do
						sv_p:SetDestination(path[random(8)])
					end
					sv_p:StackLoop()
					sv_p:StackClose()
				end
			end

			local tr = getObj("ScavInLocation08_Die")
			if tr then
				for k=1,count_scav do
					tr:AddEvent("GE_OBJECT_DIE", "Scav"..k.."_loc8_vehicle_0")
				end
				SetVar("CountScav_8_loc", count_scav)
				TActivate("ScavInLocation08_Die")
			end

			TActivate("SpawnScavsInLocation08_Leaves")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation08_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScav_8_loc").AsInt > count then
			return
			end

			local tr = getObj("ScavInLocation08_Die")
			for s1=1,GetVar("CountScav_8_loc").AsInt do
				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc8_vehicle_0") end
			end

			SetVar("CountScav_8_loc", 0)
			TActivate("SpawnScavsInLocation08_Restart")
			TDeactivate("SpawnScavsInLocation08_Leaves")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation08_Restart" active="0">
		<event 	timeout="150" eventid="GE_TIME_PERIOD" />
		<script>
			TActivate("SpawnScavsInLocation08_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation08_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnScavs_8_loc" />
		<script>
			TActivate("SpawnScavsInLocation08")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnScavsInLocation08_Leaves" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="SpawnScavs_8_loc" />
		<script>
			TActivate("ScavInLocation08_Remove")
			TActivate("SpawnScavsInLocation08_Enters")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ScavInLocation08_Remove" active="0">
		<event 	timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("ScavInLocation08_Die")

			local tr = getObj("ScavInLocation08_Die")
	
			for s1=1,GetVar("CountScav_8_loc").AsInt do
				local sv1 = GetEntityByName("Scav"..s1.."_loc8_vehicle_0")
				if sv1 then sv1:Remove() end

				if tr then tr:DelEventObj("GE_OBJECT_DIE", "Scav"..s1.."_loc8_vehicle_0") end
			end

			SetVar("CountScav_8_loc", 0)
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="SpawnsScavs" active="0">
		<event 	timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,8 do
				TActivate("SpawnScavsInLocation0"..i.."_Enters")
			end
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Использование предметов -->
	<trigger Name="ItemsUse" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local pl = GetPlayerVehicle()
			local hp = GetPlayerHealth() 
			if pl and hp >= 1 then 
				ItemUse() 
			else 
				trigger:Deactivate() 
			end
		</script>
	</trigger>

<!-- Заправки (Заправляем канистры) -->
	<trigger Name="UseFuelNil_InPetrolStation01" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation01_loc" />
		<script>
			local box = GetEntityByName("FuelBox_1")
			if HasPlayerAmountOfItems("fuel_nil_use", 1) and not(box) then
				local b = SpawnMessageBox( "90001" )
				if b == 1 then
					if GetPlayerMoney() >= 5000 then
						AddPlayerMoney(- 5000)
						CreateEffectTTLed( "ET_PS_FUEL_PETROL_START", CVector(2582, 348, 2269), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 800)
						AddFadingMsgByStrIdFormatted("fm_fuel_petrol_start")
						SoundFadingMsg()
						RemoveItemsFromPlayerRepository("fuel_nil_use", 1)
						TActivate("SoundPetrolProcess_InPertolStation01")
						TActivate("FuelFull_InPetrolStation01")
						GetPlayerVehicle():SetThrottle( 0 )
						GetPlayerVehicle():SetCustomLinearVelocity( 0 )
						SetVar("PetrolStation_Refill_Process", 1)
						trigger:Deactivate()
					else
						AddFadingMsgByStrIdFormatted("fm_player_not_money")
						SoundFadingMsg()
					end
				end
			end
		</script>
	</trigger>

	<trigger Name="SoundPetrolProcess_InPertolStation01" active="0">
		<event timeout="0.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewSgNodeObject("ET_PS_FUEL_PETROL_PROCESS", "SFPP_01", -1, -1, CVector(2582, 348, 2269), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0)
			local pl01 = GetEntityByName("LIGHTWORK01")
			if pl01 then pl01:Remove() end
			CreateNewSgNodeObject("ET_PS_LENS_D6", "PetrolLightProcess01", -1, -1, CVector(2575.530, 360.200, 2266.788), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="FuelFull_InPetrolStation01" active="0">
		<event timeout="20" eventid="GE_TIME_PERIOD" />
		<script>

			local Chest = CreateNewObject{prototypeName = "fuelChest", objName = "FuelBox_1"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(2577.512, 348.200, 2267.212))

			local fuel = CreateNewObject{prototypeName = "fuel_full_use", objName = "FuelItem"..random(10000), belong = 1100 }
			local fuelId = GetEntityByID(fuel)

			local ChestPos = ChestId:GetPosition()
			ChestPos.y = ChestPos.y + 1
			ChestId:SetPosition(ChestPos)

			if ChestId and fuelId then
				ChestId:AddChild(fuelId)
			end

			local sd01 = GetEntityByName("SFPP_01")
			if sd01 then sd01:Remove() end

			local pl01 = GetEntityByName("PetrolLightProcess01")
			if pl01 then pl01:Remove() end

			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK01", -1, -1, CVector(2575.530, 360.200, 2266.788), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateEffectTTLed( "ET_PS_FUEL_PETROL_END", CVector(2582, 348, 2269), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			AddFadingMsgByStrIdFormatted("fm_fuel_petrol_end")
			SoundFadingMsg()

			TActivate ("UseFuelNil_InPetrolStation01")

			SetVar("PetrolStation_Refill_Process", 0)

			if IsQuestTaken('q_fuel2') and not(IsQuestComplete('q_fuel2_1')) then CompleteSubtask("q_fuel2_1") end
		
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="UseFuelNil_InPetrolStation02" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation02_loc" />
		<script>
			local box = GetEntityByName("FuelBox_2")
			if HasPlayerAmountOfItems("fuel_nil_use", 1) and not(box) then
				local b = SpawnMessageBox( "90001" )
				if b == 1 then
					if GetPlayerMoney() >= 5000 then
						AddPlayerMoney(- 5000)
						CreateEffectTTLed( "ET_PS_FUEL_PETROL_START", CVector(1312.274, 288.949, 1757.526), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 800)
						AddFadingMsgByStrIdFormatted("fm_fuel_petrol_start")
						SoundFadingMsg()
						RemoveItemsFromPlayerRepository("fuel_nil_use", 1)
						TActivate("SoundPetrolProcess_InPertolStation02")
						TActivate("FuelFull_InPetrolStation02")
						GetPlayerVehicle():SetThrottle( 0 )
						GetPlayerVehicle():SetCustomLinearVelocity( 0 )
						SetVar("PetrolStation_Refill_Process", 1)
						trigger:Deactivate() 
					else
						AddFadingMsgByStrIdFormatted("fm_player_not_money")
						SoundFadingMsg()
					end
				end
			end
		</script>
	</trigger>

	<trigger Name="SoundPetrolProcess_InPertolStation02" active="0">
		<event timeout="0.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewSgNodeObject("ET_PS_FUEL_PETROL_PROCESS", "SFPP_02", -1, -1, CVector(1312.274, 288.949, 1757.526), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0)
			local pl01 = GetEntityByName("LIGHTWORK02")
			if pl01 then pl01:Remove() end
			CreateNewSgNodeObject("ET_PS_LENS_D6", "PetrolLightProcess02", -1, -1, CVector(1317.154, 300.550, 1748.705), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="FuelFull_InPetrolStation02" active="0">
		<event timeout="20" eventid="GE_TIME_PERIOD" />
		<script>

			local Chest = CreateNewObject{prototypeName = "fuelChest", objName = "FuelBox_2"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(1316.551, 288.830, 1751.936))

			local fuel = CreateNewObject{prototypeName = "fuel_full_use", objName = "FuelItem"..random(10000), belong = 1100 }
			local fuelId = GetEntityByID(fuel)

			local ChestPos = ChestId:GetPosition()
			ChestPos.y = ChestPos.y + 1
			ChestId:SetPosition(ChestPos)

			if ChestId and fuelId then
				ChestId:AddChild(fuelId)
			end

			local sd01 = GetEntityByName("SFPP_02")
			if sd01 then sd01:Remove() end

			local pl01 = GetEntityByName("PetrolLightProcess02")
			if pl01 then pl01:Remove() end

			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK02", -1, -1, CVector(1317.154, 300.550, 1748.705), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateEffectTTLed( "ET_PS_FUEL_PETROL_END", CVector(1312.274, 288.949, 1757.526), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			AddFadingMsgByStrIdFormatted("fm_fuel_petrol_end")
			SoundFadingMsg()

			TActivate ("UseFuelNil_InPetrolStation02")

			SetVar("PetrolStation_Refill_Process", 0)
		
			if IsQuestTaken('q_fuel2') and not(IsQuestComplete('q_fuel2_2')) then CompleteSubtask("q_fuel2_2") end

			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="UseFuelNil_InPetrolStation03" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation03_loc" />
		<script>
			local box = GetEntityByName("FuelBox_3")
			if HasPlayerAmountOfItems("fuel_nil_use", 1) and not(box) then
				local b = SpawnMessageBox( "90001" )
				if b == 1 then
					if GetPlayerMoney() >= 5000 then
						AddPlayerMoney(- 5000)
						CreateEffectTTLed( "ET_PS_FUEL_PETROL_START", CVector(917.057, 309.294, 872.621), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 800)
						AddFadingMsgByStrIdFormatted("fm_fuel_petrol_start")
						SoundFadingMsg()
						RemoveItemsFromPlayerRepository("fuel_nil_use", 1)
						TActivate("SoundPetrolProcess_InPertolStation03")
						TActivate("FuelFull_InPetrolStation03")
						GetPlayerVehicle():SetThrottle( 0 )
						GetPlayerVehicle():SetCustomLinearVelocity( 0 )
						SetVar("PetrolStation_Refill_Process", 1)
						trigger:Deactivate() 
					else
						AddFadingMsgByStrIdFormatted("fm_player_not_money")
						SoundFadingMsg()
					end
				end
			end

		</script>
	</trigger>

	<trigger Name="SoundPetrolProcess_InPertolStation03" active="0">
		<event timeout="0.4" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewSgNodeObject("ET_PS_FUEL_PETROL_PROCESS", "SFPP_03", -1, -1, CVector(917.057, 309.294, 872.621), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0)
			local pl01 = GetEntityByName("LIGHTWORK03")
			if pl01 then pl01:Remove() end
			CreateNewSgNodeObject("ET_PS_LENS_D6", "PetrolLightProcess03", -1, -1, CVector(916.784, 320.600, 884.400), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="FuelFull_InPetrolStation03" active="0">
		<event timeout="20" eventid="GE_TIME_PERIOD" />
		<script>

			local Chest = CreateNewObject{prototypeName = "fuelChest", objName = "FuelBox_3"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(916.922, 309.114, 882.417))

			local fuel = CreateNewObject{prototypeName = "fuel_full_use", objName = "FuelItem"..random(10000), belong = 1100 }
			local fuelId = GetEntityByID(fuel)

			local ChestPos = ChestId:GetPosition()
			ChestPos.y = ChestPos.y + 1
			ChestId:SetPosition(ChestPos)

			if ChestId and fuelId then
				ChestId:AddChild(fuelId)
			end

			local sd01 = GetEntityByName("SFPP_03")
			if sd01 then sd01:Remove() end

			local pl01 = GetEntityByName("PetrolLightProcess03")
			if pl01 then pl01:Remove() end

			CreateNewSgNodeObject("ET_PS_LENS_D4", "LIGHTWORK03", -1, -1, CVector(916.784, 320.600, 884.400), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 0.6)
			CreateEffectTTLed( "ET_PS_FUEL_PETROL_END", CVector(917.057, 309.294, 872.621), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1000)
			AddFadingMsgByStrIdFormatted("fm_fuel_petrol_end")
			SoundFadingMsg()

			TActivate ("UseFuelNil_InPetrolStation03")

			SetVar("PetrolStation_Refill_Process", 0)

			if IsQuestTaken('q_fuel2') and not(IsQuestComplete('q_fuel2_3')) then CompleteSubtask("q_fuel2_3") end
		
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Если заправка не работает -->
	<trigger Name="NotWork_PetrolStation01" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation01_loc" />
		<script>
			if HasPlayerAmountOfItems("fuel_nil_use", 1) then
				AddFadingMsgByStrIdFormatted("fm_petrol_notwork")
				SoundFadingMsg()
			end
		</script>
	</trigger>

	<trigger Name="NotWork_PetrolStation02" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation02_loc" />
		<script>
			if HasPlayerAmountOfItems("fuel_nil_use", 1) then
				AddFadingMsgByStrIdFormatted("fm_petrol_notwork")
				SoundFadingMsg()
			end
		</script>
	</trigger>

	<trigger Name="NotWork_PetrolStation03" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="PetrolStation03_loc" />
		<script>
			if HasPlayerAmountOfItems("fuel_nil_use", 1) then
				AddFadingMsgByStrIdFormatted("fm_petrol_notwork")
				SoundFadingMsg()
			end
		</script>
	</trigger>

<!-- Открытие/Закрытие ворот Южного -->
	<trigger Name="OpenGate_TheTown" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="OpenGateTheTown_loc" />
		<script>
			if IsQuestItemPresent("quest_item_key_gate_thetown") then
				local b = SpawnMessageBox("90002")
				if b == 1 then
					getObj("gate_thetown"):SetNodeAction(AT_RESERVED4)
					CreateEffectTTLed( "ET_PS_OPENING_GATE", CVector(1235.100, 311.700, 2969.336), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 900)
					TActivate("OpenGate_TheTown_End")

					if GetVar("item_key_gate_thetown_used").AsInt > 0 then 
						SetVar("item_key_gate_thetown_used", GetVar("item_key_gate_thetown_used").AsInt - 1) 
						if GetVar("item_key_gate_thetown_used").AsInt > 0 then 
							AddFadingMsgByStrIdFormatted("fm_used_key", GetVar("item_key_gate_thetown_used").AsInt)
							SoundFadingMsg()
						end
					end
					if GetVar("item_key_gate_thetown_used").AsInt == 0 then
						RemoveQuestItem("quest_item_key_gate_thetown")
						AddFadingMsgByStrIdFormatted("fm_remove_quest_item", "quest_item_key_gate_thetown")
						SoundFadingMsg()
					end
					trigger:Deactivate() 
				end
			end
		</script>
	</trigger>

	<trigger Name="OpenGate_TheTown_End" active="0">
		<event timeout="0.9" eventid="GE_TIME_PERIOD" />
		<script>
			local g = GetEntityByName("gate_thetown")
			if g then g:Remove() end

		 	GetEntityByName("gate_thetown2"):SetPosition(CVector(1235.100, 311.700, 2969.336))
			GetEntityByName("gate_thetown2"):SetRotation(Quaternion(0.0000, 0.7210, 0.0000, 0.6930))

			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(1235.100, 311.700, 2969.336), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1500)

			TActivate("ClosedGate_TheTown")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="ClosedGate_TheTown" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="InTheTown_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ClosedGateTheTown_loc" />
		<script>
			CreateNewDummyObject( "big_gate01", "gate_thetown", -1, -1, CVector(1262.195, 300, 2995.386), Quaternion(-0.004, 0.019, 0.000, 1.000))
			getObj("gate_thetown"):SetNodeAction(AT_STAND1)
			TActivate("ClosedGate_TheTown_Process")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ClosedGate_TheTown_Process" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ClosedGateTheTown_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="ClosedGateTheTown_loc" />
		<script>											
			local g = GetEntityByName("gate_thetown2")
			if g then g:Remove() end

			GetEntityByName("gate_thetown"):SetPosition(CVector(1235.100, 311.700, 2969.336))
			GetEntityByName("gate_thetown"):SetRotation(Quaternion(0.0000, 0.7210, 0.0000, 0.6930))
			getObj("gate_thetown"):SetNodeAction(AT_RESERVED3)

			CreateEffectTTLed( "ET_PS_CLOSED_GATE", CVector(1235.100, 311.700, 2969.336), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 900)
			TActivate("ClosedGate_TheTown_End")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="ClosedGate_TheTown_End" active="0">
		<event timeout="0.9" eventid="GE_TIME_PERIOD" />
		<script>
			CreateEffectTTLed( "ET_PS_OPENING_GATE_END", CVector(1235.100, 311.700, 2969.336), Quaternion(0.0000, 0.0000, 0.0000, 1.0000), 1500)
			CreateNewSgNodeObject( "big_gate01", "gate_thetown2", -1, -1, CVector(1262.195, 300, 2995.386), Quaternion(-0.004, 0.019, 0.000, 1.000), 1)
			TActivate("OpenGate_TheTown")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Расстановка лута на карте -->
	<trigger Name="CreateBarrelBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,31 do
				CreateBarrelLootBox("barrel"..i, CVector(getPos("barrelBox_"..i.."_loc")))
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateBoxForDeadScav" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"potato", "scrap_metal", "firewood", "oil", "bottle", "doski", "details",
						"scrap_metal_use", "oil_use", "fuel_nil_use",
						"item_key_gate_thetown",
						"ammo_chest_machinegun", "ammo_chest_shotgun",
						"item_bolts", "item_hose", "item_insulation", "item_nails", "item_nuts", "item_parts", "item_plex", "item_poheram", "item_scotch", "item_screws",
						"item_cooler", "item_cpu", "item_electronics_components", "item_energo_lump", "item_gazan", "item_geiger", "item_kondesators", "item_lump", "item_phone", "item_plate", "item_ram", "item_rele", "item_svech", "item_tplug", "item_usb", "item_wires",
						"item_battery_aa", "item_battery_d",
						"item_hunter_spich", "item_lighter", "item_spich", "item_zibbo",
						"item_salt", "item_soap", "item_tb", "item_toothpaste",
						"item_pants40grn", "item_salo", "item_vodka",
						"hornet01", "specter01", "pkt01", "kord01", "storm01", "vector01", "vulcan01"}	
			
			for i=1,5 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "DeadScav"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("DeadScav_"..i.."_loc")))

				local count = random(4)

				for l=1,count do
					local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "ScavItem_"..l, belong = 1100}
					local ItemId = GetEntityByID(Item)
					if ChestId and ItemId then
						ChestId:AddChild(ItemId)
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateGunLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,15 do
				CreateGunBox("GunBox"..i, CVector(getPos("GunBox_"..i.."_loc")))
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateMedicalLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"item_aquapeps", "item_c6h8o6", "item_h2o2", "item_medical_tools", "item_naci", "item_suringe",
							"scrap_metal_use", "machinery_use",
							"item_alkani", "item_hlor", "item_paper", "item_salt", "item_soap", "item_tb", "item_toothpaste"}
			
			for i=1,7 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "MedicalBox"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("MedBox_"..i.."_loc")))
				ChestId:SetSkin(4)
			
				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)
			
				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityMedItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)
			
				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end
			
				local notloot = random(100)
				local count = random(2)
			
				if notloot > 10 then
					for l=1,count do
						local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "MedItem_"..l, belong = 1100}
						local ItemId = GetEntityByID(Item)
						if ChestId and ItemId then
							ChestId:AddChild(ItemId)
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateTehnoLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local use = {"scrap_metal_use", "oil_use", "fuel_nil_use", "machinery_use", "fuel_full_use", "electronics_use"}
			local items = {"item_bolts", "item_hose", "item_datchik", "item_insulation", "item_kek", "item_nails", "item_nuts", "item_parts", "item_pena", "item_plex", "item_poheram", "item_scotch", "item_screws", "item_thermometer", "item_tube",
							"item_accum", "item_battery_aa", "item_battery_d", "item_car_battery", "item_green_battery", "item_powerbank",
							"item_dry", "item_hunter_spich", "item_lighter", "item_prisadka", "item_propan", "item_spich", "item_survl", "item_trotile", "item_wd40_100", "item_wd40_400", "item_zibbo", "item_gunpowder",
							"scrap_metal", "oil", "bottle", "fuel", "machinery", "tobacco", "doski", "details",
							"item_filter", "item_paracord", "item_waterfilter", "item_zapal",
							"item_awl", "item_leatherman", "item_metalscissors", "item_nippers", "item_pliers", "item_pliers_round", "item_roulet", "item_screw", "item_screw_flat", "item_screw_flat_long", "item_wrench",
							"item_cable", "item_drill", "item_energo_lump", "item_engine", "item_gazan", "item_geiger", "item_helix", "item_lump", "item_magnet", "item_rele", "item_svech", "item_tplug", "item_ultra_lump", "item_usb", "item_wires"}
			
			for i=1,10 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "TehnoBox"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("TehnoBox_"..i.."_loc")))
				ChestId:SetSkin(5)
			
				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)
			
				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityTehnoItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)
			
				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end
			
				local notloot = random(100)
				local count = random(4)
				local useItem = random(2)
			
				if notloot > 10 then
					if useItem == 1 then
						local UseItem = CreateNewObject{prototypeName = use[exrandom(getn(use))], objName = "TehnoUseItem_1", belong = 1100}
						local UseItemId = GetEntityByID(UseItem)
						if ChestId and UseItemId then
							ChestId:AddChild(UseItemId)
						end
					end
					
					for l=1,count do
						local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "TehnoItem_"..l, belong = 1100}
						local ItemId = GetEntityByID(Item)
						if ChestId and ItemId then
							ChestId:AddChild(ItemId)
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateToolsLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"item_bolts", "item_hose", "item_insulation", "item_kek", "item_nails", "item_nuts", "item_parts", "item_plex", "item_poheram", "item_scotch", "item_screws", "item_tube",
							"scrap_metal", "oil", "bottle", "fuel", "machinery", "doski", "details",
							"item_dry", "item_hunter_spich", "item_lighter", "item_spich", "item_survl", "item_trotile", "item_wd40_100", "item_wd40_400", "item_zibbo", "item_gunpowder",
							"item_filter", "item_vitalik", "item_waterfilter", "item_zapal",
							"item_awl", "item_buldex", "item_fullmaster", "item_handrill", "item_leatherman", "item_metalscissors", "item_nippers", "item_pipe_wrench", "item_pliers", "item_pliers_round", "item_ratchet_wrench", "item_roulet", "item_screw", "item_screw_flat", "item_screw_flat_long", "item_sewing_kit", "item_toolset", "item_wrench"}
			
			for i=1,9 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "ToolsBox"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("ToolsBox_"..i.."_loc")))
				ChestId:SetSkin(6)
			
				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)
			
				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityToolsItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)
			
				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end
			
				local notloot = random(100)
				local count = random(3)
			
				if notloot > 10 then
					for l=1,count do
						local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "ToolsItem_"..l, belong = 1100}
						local ItemId = GetEntityByID(Item)
						if ChestId and ItemId then
							ChestId:AddChild(ItemId)
						end
					end
				end		
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateValuablesLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"book", "shkatulka", "item_key_gate_thetown", "item_key_gate_basefelix", "item_diary", "item_diary_s", "item_disk", "item_disk_exmachina", "item_flashdrive", "item_manual", "item_emre_kara", "item_fitanyashka", "item_monolit", "item_kaktus", "item_keqing", "item_cat", "item_chain", "item_chain_gold", "item_chiken", "item_ex", "item_rolex", "item_skullring", "item_teapon", "item_carsen", "item_metallodetector"}

			for i=1,7 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "ValuablesBox"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("ValuableBox_"..i.."_loc")))
				ChestId:SetSkin(7)

				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)

				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityValuableItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)

				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end

				local notloot = random(100)
				local count = random(1)
				
				if notloot > 10 then
					for l=1,count do
						local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "ValuableItem_"..l, belong = 1100}
						local ItemId = GetEntityByID(Item)

						if ChestId and ItemId then
							ChestId:AddChild(ItemId)
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateElectronicsLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"item_bp", "item_cable", "item_cooler", "item_cpu", "item_drill", "item_dvd", "item_electronics_components", "item_energo_lump", "item_engine", "item_gazan", "item_geiger", "item_hdd", "item_helix", "item_kondesators", "item_lcd", "item_lump", "item_magnet", "item_military_cable", "item_phone", "item_plate", "item_ram", "item_rele", "item_svech", "item_tplug", "item_ultra_lump", "item_usb", "item_wires",
							"item_accum", "item_battery_aa", "item_battery_d", "item_car_battery", "item_cyclon", "item_green_battery", "item_powerbank"}

			for i=1,5 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "ElectronicsBox"..i.."Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("ElectronicsBox_"..i.."_loc")))
				ChestId:SetSkin(1)
			
				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)
			
				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityElectronicsItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)
			
				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end
			
				local notloot = random(100)
				local count = random(3)
			
				if notloot > 10 then
					for l=1,count do
						local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "ElectronicsItem_"..l, belong = 1100}
						local ItemId = GetEntityByID(Item)
						if ChestId and ItemId then
							ChestId:AddChild(ItemId)
						end
					end
				end	
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateTheTownLootBox" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local items = {"machinery", "book", "electronics", "shkatulka", 
							"ammo_chest_heavygun", "ammo_chest_machinegun", "ammo_chest_rocketgun", "ammo_chest_shotgun", "ammo_chest_artillerygun", "ammo_ballon_lasergun", "ammo_ballon_plasmagun", "ammo_ballon_turbo",
							"item_datchik", "item_kek", "item_military_tube", "item_pena", "item_thermometer", "item_tube",
							"item_bp", "item_drill", "item_engine", "item_hdd", "item_lcd", "item_military_cable", "item_tetris",
							"item_car_battery", "item_cyclon", "item_green_battery",
							"item_dry", "item_prisadka", "item_propan", "item_termit",
							"item_disk", "item_disk_exmachina", "item_flashdrive", "item_sas", "item_ssd",
							"item_emre_kara", "item_filter", "item_fitanyashka", "item_paracord", "item_vitalik", "item_waterfilter", "item_monolit", "item_kaktus", "item_keqing", "item_carsen", "item_metallodetector",
							"item_cat", "item_chain_gold", "item_chiken", "item_ex", "item_lion", "item_rolex", "item_skullring", "item_teapon",
							"fagot01", "maxim01", "kpvt01", "rapier01", "flag01", "rainmetal01", "elephant01", "odin01", "omega01", "big_swingfire01", "cyclops01", "octopus01", "rocketLauncher", "someTurboAccelerationPusher"}

			for i=1,5 do
				local Chest = CreateNewObject{prototypeName = "mainChest", objName = "TheTown_"..i.."_Chest"}	
				local ChestId = GetEntityByID(Chest)
				ChestId:SetPosition(CVector(getPos("TheTownBox_"..i.."_loc")))
				ChestId:SetSkin(2)

				local ChestPos = ChestId:GetPosition()
				ChestPos.y = ChestPos.y + 1
				ChestId:SetPosition(ChestPos)

				local OpacityItem = CreateNewObject{prototypeName = "item_opacity", objName = "OpacityTheTownItem_"..i, belong = 1100}
				local OpacityItemId = GetEntityByID(OpacityItem)

				if ChestId and OpacityItemId then
					ChestId:AddChild(OpacityItemId)
				end

				local Item = CreateNewObject{prototypeName = items[random(getn(items))], objName = "TheTownItem_"..i, belong = 1100}
				local ItemId = GetEntityByID(Item)
				if ChestId and ItemId then
					ChestId:AddChild(ItemId)
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AddKeyGateBaseFelixInChests" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local ChestRandom = {"DeadScav2Chest", "GunBox"..random(4,6).."Chest", "GunBox12Chest", "TehnoBox5Chest", "ElectronicsBox2Chest"}
			local Chest = GetEntityByName(ChestRandom[random(getn(ChestRandom))])
	
			local Item = CreateNewObject{prototypeName = "item_key_gate_basefelix", objName = "KeyGateBaseFelixItem_1", belong = 1100}
			local ItemId = GetEntityByID(Item)

			if Chest and ItemId then
				Chest:AddChild(ItemId)
			end
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Создание босса -->
	<trigger Name="CreateBossProbability" active="0">
		<event timeout="40" eventid="GE_TIME_PERIOD" />
		<script>
			local boss_random = random(100)
			if (30 >= boss_random) then
				TActivate("CreateBossEntersLoc")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateBossEntersLoc" active="0">
	<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="SpawnBoss_loc" />
		<script>
			TActivate("CreateBoss")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="CreateBoss" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>

			local pos1 = { CVector(1043.248, 290.074, 2868.649), CVector(1053.958, 289.904, 2889.971), CVector(1089.576, 289.500, 2866.932), CVector(1114.446, 290.298, 2895.275), CVector(1061.614, 289.562, 2874.343) }
			local pos1r = getn(pos1)

			local pos2 = { CVector(987.033, 290.867, 2856.380), CVector(987.481, 290.316, 2891.032), CVector(1006.347, 289.929, 2903.812), CVector(1022.768, 289.542, 2896.418), CVector(960.054, 289.541, 2905.151), CVector(968.054, 290.344, 2862.812) }
			local pos2r = getn(pos2)

			local pos3 = { CVector(924.463, 289.762, 2938.432), CVector(978.696, 290.451, 2942.749), CVector(973.528, 291.180, 2973.819), CVector(936.618, 291.422, 2988.434), CVector(993.306, 292.335, 3015.926), CVector(999.865, 290.191, 2971.157) }
			local pos3r = getn(pos3)

			local pos4 = { CVector(1039.404, 289.778, 3000.015), CVector(1100.536, 289.967, 2988.652), CVector(1083.535, 289.479, 2955.853), CVector(1060.714, 289.660, 2981.386) }
			local pos4r = getn(pos4)

			local pos_boss = { CVector(1028.826, 288.073, 2963.456), CVector(1002.113, 290.121, 2968.758), CVector(1032.515, 289.933, 2908.291), CVector(997.305, 290.150, 2890.403), CVector(978.716, 290.602, 2940.627), CVector(1080.671, 288.940, 2923.871) }
			local pos_boss_r = getn(pos_boss)

			local pos = { pos1[random(pos1r)], pos2[random(pos2r)], pos3[random(pos3r)], pos4[random(pos4r)] }

			local path = {CVector(955.256, 289.689, 2830.171), CVector(962.146, 291.250, 2979.031), CVector(1036.024, 290.092, 3008.080), CVector(1021.219, 289.623, 2900.219), CVector(1067.962, 289.788, 2872.373), CVector(1075.830, 289.112, 2924.844), CVector(1070.949, 289.326, 2978.409), CVector(962.226, 289.968, 2840.577), CVector(913.195, 289.653, 2815.317), CVector(919.372, 287.567, 2889.068), CVector(1016.580, 287.547, 2791.293)}

			local Z = random(9)		
			local rotarr={
				Quaternion(-0.029, 0.679, -0.021, 0.734),
				Quaternion(0.001, 0.626, 0.002, 0.780),
				Quaternion(-0.001, 0.558, -0.001, 0.830),
				Quaternion(-0.029, -0.025, 0.005, 0.999),
				Quaternion(-0.001, -0.346, 0.001, 0.938),
				Quaternion(-0.001, -0.724, -0.000, 0.690),
				Quaternion(-0.025, -0.992, -0.005, 0.125),
				Quaternion(0.002, -0.914, -0.001, 0.405),
				Quaternion(-0.003, -1.000, -0.006, -0.015)}
			
			local smallgunlist = {"specter01","pkt01","kord01","storm01"}
			local smallgunr = getn(smallgunlist)
			local biggunlist={"rapier01","vector01","vulcan01","kpvt01"}
			local biggunr = getn(biggunlist)

			local ItemsLifeUse = {"scrap_metal_use", "machinery_use", "electronics_use"}
			local r2 = getn(ItemsLifeUse)

			local ItemsOilUse = {"oil_use", "fuel_nil_use", "fuel_full_use"}
			local r3 = getn(ItemsOilUse)

			for i=1,4 do 
				TeamCreate("EnemyBoss"..i, 1086, pos[i], {"Fighter2CarBoss"}, nil, 0)

				local en = GetEntityByName ("EnemyBoss"..i.."_vehicle_0")
				if en then
					en:SetSkin(1)
					en:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					en:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					for life=1,random(3) do
						en:AddItemsToRepository(ItemsLifeUse[random(r2)], 1)
					end
					en:AddItemsToRepository(ItemsOilUse[exrandom(r3)], 1)
					AddAmmoItemsForGuns(en)
				end

				local en_p = GetEntityByName ("EnemyBoss"..i)
				if en_p then
					en_p:StackOpen()
					for b=1,11 do
						en_p:SetDestination(path[random(11)])
					end
					en_p:StackLoop()
					en_p:StackClose()
				end
			end

			TeamCreate("Boss", 1087, pos_boss[random(pos_boss_r)], {"Hunter2CarBoss"}, nil, 0)

			local loot = {20,5,35}
			local items = {"item_vitaly", "item_bitcoin", "item_key_gate_thetown"}
			local count = 0

			local boss = GetEntityByName ("Boss_vehicle_0")
			if boss then
				boss:SetSkin(7)
				boss:SetRotation(rotarr[Z])
				boss:SetNewPart("CABIN_BIG_GUN_1","vector01")
				boss:SetNewPart("CABIN_BIG_GUN_2","bumblebee01")
				boss:setGodMode(1)
				boss:AddItemsToRepository(ItemsLifeUse[random(r2)], 1)
				boss:AddItemsToRepository(ItemsOilUse[exrandom(r3)], 1)
				AddAmmoItemsForGuns(boss)
				for i=1,3 do
					if loot[i] >= random(100) then
						if count == 0 then
							boss:AddItemsToRepository(items[i], 1)
							count = 1
						end
					end
				end
			end

			TActivate("BossEnemy_Die")

			SetTolerance(1087, 1100, RS_NEUTRAL)
			SetTolerance(1087, 1088, RS_NEUTRAL)
			SetTolerance(1087, 1089, RS_NEUTRAL)

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="BossEnemy_Die" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="EnemyBoss1" />
		<event eventid="GE_OBJECT_DIE" ObjName="EnemyBoss2" />
		<event eventid="GE_OBJECT_DIE" ObjName="EnemyBoss3" />
		<event eventid="GE_OBJECT_DIE" ObjName="EnemyBoss4" />
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			if 4>count then
			return
			end

			local boss = GetEntityByName ("Boss_vehicle_0")
			if boss then
				boss:setGodMode(0)
			end

			SetTolerance(1087, 1100, RS_ENEMY)
			SetTolerance(1087, 1088, RS_ENEMY)
			SetTolerance(1087, 1089, RS_ENEMY)
			trigger:Deactivate()
 		</script>
	</trigger>

<!-- Аир дроп -->
	<trigger Name="AirDropProbability" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local air_rand = random(100)
			
			local min = GetVar("TimeRaidMinute").AsInt
			local sec = GetVar("TimeRaidSecond").AsInt

			if 9 >= min and sec == 59 and not(2 >= min) then
				if (10 >= air_rand) then
					TActivate("SpawnOracle_AirDrop")
					trigger:Deactivate()
				end
			end

			if 2 >= min and GetVar("Air").AsInt == 0 then
				trigger:Deactivate()
			end
		</script>
	</trigger>		

	<trigger Name="SpawnOracle_AirDrop" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>

			AddImportantFadingMsgByStrIdFormatted("fm_airdrop_start")
			SoundFadingMsg()

			SetVar("Air",0)
			SetVar("NoAir",0)
			SetVar("AirPoints",0)
	
			local pos_r = random(4)
			local pos 
			local rotar
			local fly_path

			if pos_r == 1 then
				pos = CVector(-331.418, 500, -293.473)
				rotar = Quaternion(0.019, 0.421, -0.002, 0.907)
				fly_path = "OracleAirMove1"
				SetVar("AirPoints",5)
			elseif pos_r == 2 then
				pos = CVector(4231.279, 500, 4227.989)
				rotar = Quaternion(-0.010, -0.901, -0.023, 0.434)
				fly_path = "OracleAirMove2"
				SetVar("AirPoints",6)
			elseif pos_r == 3 then
				pos = CVector(-120.684, 500, 4229.126)
				rotar = Quaternion(-0.014, 0.929, 0.010, 0.370)
				fly_path = "OracleAirMove3"
				SetVar("AirPoints",6)
			elseif pos_r == 4 then
				pos = CVector(4250.660, 500, -131.040)
				rotar = Quaternion(0.004, 0.416, 0.009, -0.909)
				fly_path = "OracleAirMove4"
				SetVar("AirPoints",8)
			end

			local OracleAir = GetEntityByName("Oracle_AirDrop")
			local OraclePos = OracleAir:GetPosition()
			if OracleAir then
				OracleAir:SetRotation(rotar)
				OracleAir:SetPosition(pos)
			end

			local moverId = CreateNewObject { prototypeName	= "cinematicMover", objName  = "MoverB" }
			local mover = GetEntityByID( moverId ) 
			if OracleAir then
				mover:SetObjAndPath(OracleAir:GetId(), fly_path, 180)
			end

			for i=1,14 do
				local point = CreateNewSgNodeObject("point", "air_point"..i, -1, -1, CVector(getPos("Air_"..i.."_loc")), Quaternion(0, 0, 0, 1), 1)
				local pointPos = point:GetPosition()
				pointPos.y = pointPos.y - pointPos.y + 500
				point:SetPosition(pointPos)
			end

			CreateNewSgNodeObject("ET_PS_BOSS03_STAND1", "SH", -1, -1, OraclePos, Quaternion(0, 0, 0, 1), 0)
	
			TActivate("DistPoint")
			TActivate("OracleSoundUpdate")
			TActivate("OracleSoundRemove")
		
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="OracleSoundUpdate" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local OracleAir = GetEntityByName("Oracle_AirDrop")
			local OraclePos = OracleAir:GetPosition()

			local s_hel = GetEntityByName("SH")
			if s_hel then 
				s_hel:SetPosition(OraclePos)
			end
		</script>
	</trigger>

	<trigger Name="DistPoint" active="0">
		<event timeout="0.5" eventid="GE_TIME_PERIOD" />
		<script>
			local pl = GetEntityByName("Oracle_AirDrop")
			local l = GetVar("NoAir").AsInt
			for i=1,14 do
				local rand = random(3)
				local run = GetEntityByName("air_point"..i)
				local len
				if run and run:IsAlive() then
					len = Dist(pl, run)
					if (20 > len) then
						l = l + 1
						SetVar("NoAir",l)
						if l == GetVar("AirPoints").AsInt and GetVar("Air").AsInt==0 then
							TActivate("CreateBoxSgNode")
							trigger:Deactivate() 
						elseif rand == 1 and GetVar("Air").AsInt==0 then
							TActivate("CreateBoxSgNode")
							trigger:Deactivate() 
						end
					end
				end 
			end
		</script>
	</trigger>

	<trigger Name="CreateBoxSgNode" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

			SetVar("Air",1)
			SetVar("NoAir",0)
			SetVar("AirPoints",0)
			SetVar("AirType",random(1,2))

			for i=1,14 do
				GetEntityByName("air_point"..i):Remove()
			end

			local OracleAir = GetEntityByName("Oracle_AirDrop")
			local OraclePos = OracleAir:GetPosition()
			local OracleRot = OracleAir:GetRotation()

			CreateNewSgNodeObject("airbox"..GetVar("AirType").AsInt, "airB", -1, -1, OraclePos, OracleRot, 1)

			local air_box = GetEntityByName("airB")
			local air_box_pos = air_box:GetPosition()
			air_box_pos.y = air_box_pos.y - 5
			air_box:SetPosition(air_box_pos)
	
			TActivate("BoxDownY")
			TActivate("TimerForCreateAirDrop")

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="BoxDownY" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>

			local air_box = GetEntityByName("airB")
			local air_box_pos = air_box:GetPosition()
			air_box_pos.y = air_box_pos.y - 0.1
			air_box:SetPosition(air_box_pos)

		</script>
	</trigger>

	<trigger Name="TimerForCreateAirDrop" active="0">
		<event timeout="2" eventid="GE_TIME_PERIOD" />
		<script>
			TDeactivate("BoxDownY")
			TActivate("AirDrop")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="AirDrop" active="0">
		<event timeout="0.01" eventid="GE_TIME_PERIOD" />
		<script>
			local AirBoxSg = GetEntityByName("airB")
			local Chest = CreateNewObject{prototypeName = "airChest"..GetVar("AirType").AsInt, objName = "AirBox"}	
			local ChestId = GetEntityByID(Chest)
			if AirBoxSg then
				ChestId:SetPosition(AirBoxSg:GetPosition())
				ChestId:SetRotation(AirBoxSg:GetRotation())
				AirBoxSg:Remove()
			end

			local lootcount
			local items = {}
			local life = {}
			local fuel = {}
			
			if GetVar("AirType").AsInt == 1 then
				lootcount = random(5,8)
				items = {"scrap_metal", "oil", "bottle", "fuel", "machinery", "book", "electronics",
						"scrap_metal_use", "machinery_use", "electronics_use", "oil_use", "fuel_full_use",
						"item_datchik", "item_hose", "item_kek", "item_military_tube", "item_pena", "item_thermometer", "item_tube",
						"item_bp", "item_drill", "item_energo_lump", "item_engine", "item_gazan", "item_geiger", "item_hdd", "item_iridiym", "item_lcd", "item_military_cable", "item_tetris",
						"item_car_battery", "item_cyclon", "item_green_battery", "item_powerbank",
						"item_dry", "item_prisadka", "item_propan",
						"item_diary", "item_diary_s", "item_disk", "item_disk_exmachina", "item_flashdrive", "item_manual", "item_sas", "item_ssd",
						"item_emre_kara", "item_filter", "item_fitanyashka", "item_paracord", "item_vitalik", "item_vodka", "item_waterfilter", "item_monolit", "item_kaktus", "item_keqing", "item_carsen",
						"item_awl", "item_buldex", "item_fullmaster", "item_handrill", "item_leatherman", "item_metalscissors", "item_sewing_kit", "item_toolset", 
						"item_cat", "item_chain", "item_chain_gold", "item_chiken", "item_ex", "item_rolex", "item_teapon"}
			else
				lootcount = random(3,6)
				items = {"ammo_chest_artillerygun", "ammo_chest_heavygun", "ammo_chest_machinegun", "ammo_chest_rocketgun", "ammo_chest_shotgun", "ammo_ballon_lasergun", "ammo_ballon_plasmagun", "ammo_ballon_turbo",
						"hornet01", "specter01", "pkt01", "kord01", "storm01", "fagot01", "maxim01", "vector01", "vulcan01", "kpvt01", "rapier01", "flag01", "rainmetal01", "elephant01", "odin01", "omega01", "bumblebee01", "hammer01", "hunterSideGun", "mrakSideGun", "big_swingfire01", "cyclops01", "octopus01", "hailSideGun", "hurricane01", "rocketLauncher", "zeusSideGun", "marsSideGun", "someTurboAccelerationPusher",
						"cooling_system_guns", "cooling_system_energy", "cooling_system_explosion", "firing_rate_guns", "firing_rate_energy", "grouping_angle_guns", "add_damage_guns", "add_damage_energy", "add_damage_explosion", "firing_range_guns", "cooling_system_guns2", "cooling_system_energy2", "cooling_system_explosion2", "firing_rate_guns2", "firing_rate_energy2", "grouping_angle_guns2", "add_damage_guns2", "add_damage_energy2", "add_damage_explosion2", "cooling_system_guns_and_firing_rate_guns", "cooling_system_energy_and_firing_rate_energy", "cooling_system_explosion_and_firing_rate_explosion", "firing_rate_guns_and_add_damage_guns", "firing_rate_energy_and_add_damage_energy", "firing_rate_explosion_and_add_damage_explosion", "add_damage_guns_and_grouping_angle_guns", "add_damage_energy_and_firing_rate_energy", "add_damage_explosion_firing_rate_explosion", "additional_fuel_tank", "additional_torque", "additional_durability", "additional_stability", "additional_fuel_tank2", "additional_torque2", "additional_durability2", "add_speed_and_torque", "add_stability_and_speed", "add_torque_and_stability", "additional_fuel_tank2_add_damage_guns"}
				life = {"scrap_metal_use", "machinery_use", "electronics_use"}
				fuel = {"oil_use", "fuel_full_use"}
			end
			
			for j=1,lootcount do
				local loot1 = CreateNewObject{prototypeName = items[random(getn(items))], objName = "AirItems_"..j, belong = 1100}
				local loot1Id = GetEntityByID(loot1)
						
				if ChestId and loot1Id then
					ChestId:AddChild(loot1Id)
				end

				if GetVar("AirType").AsInt == 2 then
					local life1 = CreateNewObject{prototypeName = life[random(getn(life))], objName = "AirItemsLife_"..j, belong = 1100}
					local life1Id = GetEntityByID(life1)
						
					if ChestId and life1Id then
						ChestId:AddChild(life1Id)
					end

					local fuel1 = CreateNewObject{prototypeName = fuel[random(getn(fuel))], objName = "AirItemsFuel_"..j, belong = 1100}
					local fuel1Id = GetEntityByID(fuel1)
						
					if ChestId and fuel1Id then
						ChestId:AddChild(fuel1Id)
					end
				end
			end
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="OracleSoundRemove" active="0">
		<event timeout="90" eventid="GE_TIME_PERIOD" />
		<script>
			local s_hel = GetEntityByName("SH")
			if s_hel then s_hel:Remove() end

			TDeactivate("OracleSoundUpdate")
			TActivate("OracleRemove")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="OracleRemove" active="0">
		<event timeout="100" eventid="GE_TIME_PERIOD" />
		<script>
			getObj("Oracle_AirDrop"):SetPosition(CVector(440, 251, 3825))
			getObj("Oracle_AirDrop"):SetRotation(Quaternion(0, 0, 0, 1))
			SetVar("AirType", 0)
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Создание ЧВК -->  
	<trigger Name="CreatePMC" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

			local number
			local player_car = GetVar("PlayerCar").AsString

			if player_car == "Bug" then number = 0
			elseif player_car == "Molokovoz" then number = 1
			elseif player_car == "Ural" then number = 2
			elseif player_car == "Belaz" then number = 3
			elseif player_car == "Mirotvorec" or player_car == "Cruiser" then number = 4
			end

			local modellist = {"Bug01PMC", "Molokovoz01PMC", "Ural01PMC", "Belaz01PMC", "Cruiser01PMC", "Mirotvorec01PMC"}
			local model_rand = getn(modellist)
			
			local bug_cab = {"bugCab01", "bugCab02", "bugCab03"}
			local bug_cab_r = getn(bug_cab)
			local bug_cargo = {"bugCargo01_PMC", "bugCargo02_PMC", "bugCargo03_PMC"}
			local bug_cargo_r = getn(bug_cargo)

			local mol_cab = {"molokovozCab01", "molokovozCab02" ,"molokovozCab03"}
			local mol_cab_r = getn(mol_cab)
			local mol_cargo = {"molokovozCargo01_PMC", "molokovozCargo02_PMC", "molokovozCargo03_PMC"}
			local mol_cargo_r = getn(mol_cargo)

			local ural_cab = {"uralCab01", "uralCab02", "uralCab03", "uralCab04", "uralCab05"}
			local ural_cab_r = getn(ural_cab)
			local ural_cargo = {"uralCargo01_PMC", "uralCargo02_PMC", "uralCargo03_PMC", "uralCargo04_PMC", "uralCargo05_PMC"}
			local ural_cargo_r = getn(ural_cargo)

			local bel_cab = {"belazCab01", "belazCab02", "belazCab03", "belazCab04", "belazCab05"}
			local bel_cab_r = getn(bel_cab)
			local bel_cargo = {"belazCargo01_PMC", "belazCargo02_PMC", "belazCargo03_PMC", "belazCargo04_PMC", "belazCargo05_PMC"}
			local bel_cargo_r = getn(bel_cargo)

			local mir_cab = {"mirotvorecCab01", "mirotvorecCab02", "mirotvorecCab03", "mirotvorecCab04", "mirotvorecCab05"}
			local mir_cab_r = getn(mir_cab)
			local mir_cargo = {"mirotvorecCargo01_PMC", "mirotvorecCargo02_PMC", "mirotvorecCargo03_PMC", "mirotvorecCargo04_PMC", "mirotvorecCargo05_PMC"}
			local mir_cargo_r = getn(mir_cargo)

			local cru_cab = {"cruiserCab01", "cruiserCab02"}
			local cru_cab_r = getn(cru_cab)
			local cru_cargo = {"cruiserCargo01_PMC", "cruiserCargo02_PMC"}
			local cru_cargo_r = getn(cru_cargo)

			local belong = {1088,1089}
			local belong_r = getn(belong)

			local pl_pos1 = GetVar("PosPlayer1").AsInt
			local pl_pos2 = GetVar("PosPlayer2").AsInt
			local sp = GetVar("SpawnPlayer").AsInt

			local pos1_pmc = {}
			local pos1_count_pmc
			local paths_pos1

			local pos2_pmc = {}
			local pos2_count_pmc
			local paths_pos2

			if sp == 1 then
				if pl_pos1 == 1 then
					pos1_pmc = {CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 2 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 3 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 4 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 5 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 6 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 7 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 8 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 9 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3075.630, 357.404, 3489.001)}
				elseif pl_pos1 == 10 then
					pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354)}
				end

				if pl_pos1 >= 1 then
					pos1_count_pmc = random(2,3)
				end

				paths_pos1 = shuffled_range_take (pos1_count_pmc, 1, 9)

				pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				pos2_count_pmc = random(2,4)

				paths_pos2 = shuffled_range_take (pos2_count_pmc, 1, 10)
	
			elseif sp == 2 then
				if pl_pos2 == 1 then
					pos2_pmc = {CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 2 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 3 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 4 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 5 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 6 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 7 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 8 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(3487.845, 324.339, 748.105),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 9 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3225.707, 320.430, 1334.481)}
				elseif pl_pos2 == 10 then
					pos2_pmc = {CVector(2615.098, 320.599, 2020.458),CVector(2970.576, 353.945, 1370.649),CVector(1564.693, 307.840, 1808.458),CVector(474.234, 314.937, 1476.468),CVector(837.313, 281.698, 631.074),CVector(1803.762, 303.403, 489.376),CVector(2393.522, 303.432, 976.278),CVector(2634.281, 320.436, 907.682),CVector(3487.845, 324.339, 748.105)}
				end

				if pl_pos2 >= 1 then
					pos2_count_pmc = random(2,3)
				end

				paths_pos2 = shuffled_range_take (pos2_count_pmc, 1, 9)

				pos1_pmc = {CVector(1111.746, 303.447, 3529.309),CVector(855.773, 303.874, 3299.838),CVector(1682.261, 298.439, 3438.135),CVector(1123.300, 291.430, 3159.539),CVector(2152.141, 315.074, 3580.439),CVector(1752.767, 293.082, 2798.231),CVector(2331.947, 337.677, 2469.048),CVector(1625.450, 318.769, 2383.752),CVector(3139.961, 356.520, 3144.354),CVector(3075.630, 357.404, 3489.001)}
				pos1_count_pmc = random(2,4)

				paths_pos1 = shuffled_range_take (pos1_count_pmc, 1, 10)
			end

			local way={CVector(2332.802, 321.347, 2926.611),CVector(1199.101, 303.164, 2920.835),CVector(1887.768, 321.283, 1789.260),CVector(2264.032, 329.957, 1596.525),CVector(1976.132, 301.827, 788.499),CVector(3144.480, 317.268, 698.378)}
			local way_r = getn(way)

			for p1=1,pos1_count_pmc do
				local model = modellist[random(2 + number)]
				local num = paths_pos1[p1]

				TeamCreate("PMC_"..p1.."_Spawn1", belong[random(belong_r)], pos1_pmc[num], {model}, nil, 1)

				local pmc = GetEntityByName ("PMC_"..p1.."_Spawn1_vehicle_0")
				if pmc then
					if model == "Bug01PMC" then
						pmc:SetNewPart("CABIN",bug_cab[random(bug_cab_r)])
						pmc:SetNewPart("BASKET",bug_cargo[random(bug_cargo_r)])
					elseif model == "Molokovoz01PMC" then
						pmc:SetNewPart("CABIN",mol_cab[random(mol_cab_r)])
						pmc:SetNewPart("BASKET",mol_cargo[random(mol_cargo_r)])
					elseif model == "Ural01PMC" then
						pmc:SetNewPart("CABIN",ural_cab[random(ural_cab_r)])
						pmc:SetNewPart("BASKET",ural_cargo[random(ural_cargo_r)])
					elseif model == "Belaz01PMC" then
						pmc:SetNewPart("CABIN",bel_cab[random(bel_cab_r)])
						pmc:SetNewPart("BASKET",bel_cargo[random(bel_cargo_r)])
					elseif model == "Mirotvorec01PMC" then
						pmc:SetNewPart("CABIN",mir_cab[random(mir_cab_r)])
						pmc:SetNewPart("BASKET",mir_cargo[random(mir_cargo_r)])
					elseif model == "Cruiser01PMC" then
						pmc:SetNewPart("CABIN",cru_cab[random(cru_cab_r)])
						pmc:SetNewPart("BASKET",cru_cargo[random(cru_cargo_r)])
					end
					GiveGunsForVehicle(pmc, 1)
					AddAmmoItemsForGuns(pmc)
				end

				local pmc_way = GetEntityByName ("PMC_"..p1.."_Spawn1")
				local rand_exit = random(3)
				local rand_exit2 = random(2)
				if pmc_way then
					pmc_way:StackOpen()
					pmc_way:SetDestination(way[random(way_r)])
					if rand_exit == 1 then
						if rand_exit2 == 1 then
							pmc_way:SetDestination(CVector(getPos("RoadToRidzin_exitPMC_1_loc")))
						else
							pmc_way:SetDestination(CVector(getPos("BaseFelix_Exit")))
						end
					elseif rand_exit == 2 then
						if GetVar("ExitZaTheTroiskoe").AsInt==1 then
							pmc_way:SetDestination(CVector(getPos("ZaTheTroiskoe_Exit")))
						else
							if rand_exit2 == 1 then
								pmc_way:SetDestination(CVector(getPos("RoadToRidzin_exitPMC_1_loc")))
							else
								pmc_way:SetDestination(CVector(getPos("BaseFelix_Exit")))
							end
						end
					elseif rand_exit == 3 then
						pmc_way:SetDestination(CVector(getPos("BaseFelix_Exit")))
					end
					pmc_way:StackLoop()
					pmc_way:StackClose()
				end
			end
			
			for p2=1,pos2_count_pmc do
				local model = modellist[random(2 + number)]
				local num = paths_pos2[p2]
			
				TeamCreate("PMC_"..p2.."_Spawn2", belong[random(belong_r)], pos2_pmc[num], {model}, nil, 1)
				
				local pmc = GetEntityByName ("PMC_"..p2.."_Spawn2_vehicle_0")
				if pmc then
					if model == "Bug01PMC" then
						pmc:SetNewPart("CABIN",bug_cab[random(bug_cab_r)])
						pmc:SetNewPart("BASKET",bug_cargo[random(bug_cargo_r)])
					elseif model == "Molokovoz01PMC" then
						pmc:SetNewPart("CABIN",mol_cab[random(mol_cab_r)])
						pmc:SetNewPart("BASKET",mol_cargo[random(mol_cargo_r)])
					elseif model == "Ural01PMC" then
						pmc:SetNewPart("CABIN",ural_cab[random(ural_cab_r)])
						pmc:SetNewPart("BASKET",ural_cargo[random(ural_cargo_r)])
					elseif model == "Belaz01PMC" then
						pmc:SetNewPart("CABIN",bel_cab[random(bel_cab_r)])
						pmc:SetNewPart("BASKET",bel_cargo[random(bel_cargo_r)])
					elseif model == "Mirotvorec01PMC" then
						pmc:SetNewPart("CABIN",mir_cab[random(mir_cab_r)])
						pmc:SetNewPart("BASKET",mir_cargo[random(mir_cargo_r)])
					elseif model == "Cruiser01PMC" then
						pmc:SetNewPart("CABIN",cru_cab[random(cru_cab_r)])
						pmc:SetNewPart("BASKET",cru_cargo[random(cru_cargo_r)])
					end
					GiveGunsForVehicle(pmc, 1)
					AddAmmoItemsForGuns(pmc)
				end

				local pmc_way2 = GetEntityByName ("PMC_"..p2.."_Spawn2")
				local rand_exit2_2 = random(2)
				if pmc_way2 then
					pmc_way2:StackOpen()
					pmc_way2:SetDestination(way[random(way_r)])
					if GetVar("ExitRoadToFater").AsInt==1 then
						if rand_exit2_2 == 1 then 
							pmc_way2:SetDestination(CVector(getPos("RoadToFater_exitPMC_1_loc")))
						else
							pmc_way2:SetDestination(CVector(getPos("ToR1M5_exitPMC_1_loc")))
						end
					else
						pmc_way2:SetDestination(CVector(getPos("ToR1M5_exitPMC_1_loc")))
					end
					pmc_way2:StackLoop()
					pmc_way2:StackClose()
				end
			end
			
			println("PMCspawn1_"..pos1_count_pmc)
			println("PMCspawn2_"..pos2_count_pmc)

			TActivate("PMC_To_Exits_loc")

			TActivate("TpBirge_1")
			TActivate("TpBirge_2")
			TActivate("TDeaTpBirge")

			local tr = getObj("PMC_Die")
			if tr then
				for i=1,pos1_count_pmc do
					tr:AddEvent("GE_OBJECT_DIE", "PMC_"..i.."_Spawn1_vehicle_0")
				end
				for j=1,pos2_count_pmc do
					tr:AddEvent("GE_OBJECT_DIE", "PMC_"..j.."_Spawn2_vehicle_0")
				end
				SetVar("CountPMC_Spawn1", pos1_count_pmc)
				SetVar("CountPMC_Spawn2", pos2_count_pmc)
				TActivate("PMC_Die")
			end

			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Телепорт ЧВК через мост Глухого, когда отключена физика машин -->
	<trigger Name="TpBirge_1" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GloohoeBirge_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GloohoeBirge_3_loc" />
		<script>
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do
				local car = getObj(trigger:GetTriggeredObjectID(i))
				if car then
					car:SetGamePositionOnGround(CVector(3209.235, 340.830, 2611.232))
				end
			end
		</script>
	</trigger>

	<trigger Name="TpBirge_2" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GloohoeBirge_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GloohoeBirge_4_loc" />
		<script>
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do
				local car = getObj(trigger:GetTriggeredObjectID(i))
				if car then
					car:SetGamePositionOnGround(CVector(3294.805, 341.428, 2869.093))
				end
			end
		</script>
	</trigger>

	<trigger Name="TDeaTpBirge" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="GloohoeBirge_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="GloohoeBirge_loc" />
		<script>
			TDeactivate("TpBirge_1")
			TDeactivate("TpBirge_2")
			TActivate("TActivTpBirge")
			trigger:Deactivate() 
		</script>
	</trigger>

	<trigger Name="TActivTpBirge" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="GloohoeBirge_loc" />
		<script>
			TActivate("TpBirge_1")
			TActivate("TpBirge_2")
			TActivate("TDeaTpBirge")
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Назначение путей для ЧВК -->
	<trigger Name="PMC_To_Exits_loc" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="RoadToFater_exitPMC_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="RoadToFater_exitPMC_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR1M5_exitPMC_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ToR1M5_exitPMC_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="BaseFelix_exitPMC_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="BaseFelix_exitPMC_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ZaTheTroiskoe_exitPMC_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="ZaTheTroiskoe_exitPMC_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="RoadToRidzin_exitPMC_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="RoadToRidzin_exitPMC_2_loc" />
		<script>
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do 
				local car = getObj(trigger:GetTriggeredObjectID(i)) 
				if car and car:IsAlive() then 
					car:Remove() 
				end 
			end
		</script>
	</trigger>

<!-- Если все ЧВК на карте убиты -->
	<trigger Name="PMC_Die" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			local pmc = GetVar("CountPMC_Spawn1").AsInt + GetVar("CountPMC_Spawn2").AsInt
			TActivate("KillsPMC")
			if pmc > count then
				return
			end
			TDeactivate("TpBirge_1")
			TDeactivate("TpBirge_2")
			TDeactivate("TDeaTpBirge")
			TDeactivate("TActivTpBirge")
			TDeactivate("PMC_To_Exits_loc")
			println("PMC_DIE")
			trigger:Deactivate() 
		</script>
	</trigger>

<!-- Вторая фаза диких -->
	<trigger Name="CreateScavs" active="0">
		<event 	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>										

			local enemylist = {"Sml1CarScav", "Sml2CarScav", "Sml3CarScav", "Sml4CarScav", "Scout1CarScav", "Scout2CarScav", "Scout3CarScav", "Fighter1CarScav", "Fighter2CarScav", "Hunter2CarScav"}
			local scav = getn(enemylist)

			local smallgunlist = {"hornet01","specter01","storm01","pkt01","kord01","maxim01","fagot01"}
			local smallgunr = getn(smallgunlist)

			local biggunlist = {"vector01","vulcan01","rapier01","bumblebee01","kpvt01"}
			local biggunr = getn(biggunlist)

			local pos={
				CVector(1380.522, 292.149, 3278.965),
				CVector(1627.976, 284.043, 2772.772),
				CVector(2296.220, 303.468, 3089.571),
				CVector(1023.805, 288.819, 2977.415),
				CVector(1079.363, 305.273, 3364.456),
				CVector(409.887, 330.421, 2539.721),
				CVector(1570.590, 308.159, 1969.705),
				CVector(2756.889, 350.438, 2345.701),

				CVector(587.841, 308.913, 1737.395),
				CVector(1820.009, 303.256, 497.770),
				CVector(2073.361, 300.932, 771.122),
				CVector(3158.532, 315.987, 490.416),
				CVector(2624.907, 320.488, 1791.771),
				CVector(3241.614, 314.720, 835.171)}

			local scav_count = random(3,6)
			local paths_pos = shuffled_range_take(scav_count, 1, 14)
			
			local path = {CVector(1223.477, 295.339, 2869.511), CVector(2070.956, 341.750, 2849.030), CVector(513.808, 303.971, 1821.339), CVector(1974.261, 301.978, 809.417), CVector(3138.543, 316.540, 662.453), CVector(3182.412, 320.890, 1239.882), CVector(2997.474, 315.629, 999.674), CVector(2604.547, 322.758, 1662.702), CVector(957.419, 289.513, 2904.316)}

			for j=1,scav_count do
				local num = paths_pos[j]
				local model = enemylist[random(scav)]
				TeamCreate("Scav_"..j, 1082, pos[num], {model}, nil, 1)
				local sv = GetEntityByName ("Scav_"..j.."_vehicle_0")
				if sv then
					sv:SetNewPart("CABIN_SMALL_GUN",smallgunlist[exrandom(smallgunr)])
					if model == "Fighter2CarScav" or model == "Hunter2CarScav" then
						sv:SetNewPart("CABIN_BIG_GUN_1",biggunlist[exrandom(biggunr)])
					end
					AddAmmoItemsForGuns(sv, random(0,1))
				end

				local sv_way = GetEntityByName ("Scav_"..j)
				if sv_way then
					sv_way:SetDestination(path[random(9)])
				end
			end

			local tr = getObj("Scavs_Reached")
			if tr then
				for i=1,scav_count do
					tr:AddEvent("GE_TARGET_REACHED", "Scav_"..i)
				end
				TActivate("Scavs_Reached")
			end

			local tr2 = getObj("Scavs_Dead")
			if tr2 then
				for k=1,scav_count do
					tr2:AddEvent("GE_OBJECT_DIE", "Scav_"..k)
				end
				SetVar("CountScavs", scav_count)
				TActivate("Scavs_Dead")
			end

			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="Scavs_Reached" active="0">
		<script>
			local path = {CVector(1223.477, 295.339, 2869.511), CVector(2070.956, 341.750, 2849.030), CVector(513.808, 303.971, 1821.339), CVector(1974.261, 301.978, 809.417), CVector(3138.543, 316.540, 662.453), CVector(3182.412, 320.890, 1239.882), CVector(2997.474, 315.629, 999.674), CVector(2604.547, 322.758, 1662.702), CVector(957.419, 289.513, 2904.316)}
			
			local amount=trigger:GetTriggeredObjectAmount()
			for i=0,amount - 1 do 
				local car_Scav = getObj(trigger:GetTriggeredObjectID(i)) 
				if car_Scav then
					car_Scav:SetDestination(path[random(9)])
				end
			end
		</script>
	</trigger>

	<trigger Name="Scavs_Dead" active="0">
		<script>
			trigger:IncCount()
			local count = trigger:GetCount()
			TActivate("KillsScavs")
			if GetVar("CountScavs").AsInt > count then
				return
			end
			local tr = getObj("Scavs_Reached")
			if tr then
				for i=1,GetVar("CountScavs").AsInt do
					tr:DelEventObj("GE_TARGET_REACHED", "Scav_"..i)
				end
			end
			TDeactivate("Scavs_Reached")
			println("All_Scavs_Dead")
			trigger:Deactivate()
		</script>
	</trigger>

<!-- Выход с локации/Очистка карты для следующего запуска -->
	<trigger Name="ExitToMap" active="0">
		<event 	timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>

			--фонарь
			local f = GetEntityByName("fonar")
			if f then f:Remove() end

			--ворота Южного
			local g = GetEntityByName("gate_thetown")
			if g then g:Remove() end
			local g2 = GetEntityByName("gate_thetown2")
			if g2 then g2:Remove() end
			TDeactivate("OpenGate_TheTown")

			--заправки
			for i=1,3 do
				local light = GetEntityByName("LIGHTWORK0"..i)
				if light then light:Remove() end
				TDeactivate("UseFuelNil_InPetrolStation0"..i)
				TDeactivate ("NotWork_PetrolStation0"..i)
				TDeactivate("FuelFull_InPetrolStation0"..i)
				TDeactivate("SoundPetrolProcess_InPertolStation0"..i)
				local ps_s_work = GetEntityByName("SFPP_0"..i)
				if ps_s_work then ps_s_work:Remove() end
				local light_work = GetEntityByName("PetrolLightProcess0"..i)
				if light_work then light_work:Remove() end
				local ps_s = GetEntityByName("ps_"..i.."_sound")
				if ps_s then ps_s:Remove() end
				local fuelbox = GetEntityByName("FuelBox_"..i)
				if fuelbox then fuelbox:Remove() end
			end

			TDeactivate("TimerRaid")

			--выходы
			if GetVar("SpawnPlayer").AsInt==1 then
				TDeactivate ("RoadToRidzin")
			else
				TDeactivate ("ZaTheGloohoe")
			end

			TDeactivate ("BaseFelix")

			if GetVar("ExitZaTheTroiskoe").AsInt==1 then
				TDeactivate ("ZaTheTroiskoe")
				TDeactivate ("FonarZaTheTroiskoeExit_Broken")
				for l=1,3 do
					local light = GetEntityByName("LightZaTheTroiskoeExit"..l)
					if light then light:Remove() end
				end
			end

			if GetVar("ExitRoadToFater").AsInt==1 then
				TDeactivate ("RoadToFater")
				for green_smoke=1,2 do
					local gs = GetEntityByName("SmokeRoadToFater"..green_smoke)
					if gs then gs:Remove() end
				end
			end

			--удаление диких на локациях
			for loc=1,8 do
				if not(GetVar("CountScav_"..loc.."_loc").AsInt == 0) then
					TActivate("ScavInLocation0"..loc.."_Remove")
				end

				TDeactivate("SpawnScavsInLocation0"..loc)
				TDeactivate("ScavInLocation0"..loc.."_Die")
				TDeactivate("SpawnScavsInLocation0"..loc.."_Restart")
				TDeactivate("SpawnScavsInLocation0"..loc.."_Enters")
			end

			TDeactivate("ItemsUse")

			--удаление ящиков с лутом
			for b=1,31 do
				local barrel = GetEntityByName("barrel"..b)
				if barrel then barrel:Remove() end
				local barrelChest = GetEntityByName("barrel"..b.."Chest")
				if barrelChest then barrelChest:Remove() end
			end

			for ds=1,5 do
				local DSChest = GetEntityByName("DeadScav"..ds.."Chest")
				if DSChest then DSChest:Remove() end
			end

			for gun=1,15 do
				local gunChest = GetEntityByName("GunBox"..gun.."Chest")
				if gunChest then gunChest:Remove() end
			end

			for med=1,7 do
				local medChest = GetEntityByName("MedicalBox"..med.."Chest")
				if medChest then medChest:Remove() end
			end

			for tehno=1,10 do
				local tehnoChest = GetEntityByName("TehnoBox"..tehno.."Chest")
				if tehnoChest then tehnoChest:Remove() end
			end

			for tools=1,9 do
				local toolsChest = GetEntityByName("ToolsBox"..tools.."Chest")
				if toolsChest then toolsChest:Remove() end
			end

			for val=1,7 do
				local valChest = GetEntityByName("ValuablesBox"..val.."Chest")
				if valChest then valChest:Remove() end
			end

			for el=1,5 do
				local elChest = GetEntityByName("ElectronicsBox"..el.."Chest")
				if elChest then elChest:Remove() end
			end

			for town=1,5 do
				local townChest = GetEntityByName("TheTown_"..town.."_Chest")
				if townChest then townChest:Remove() end
			end

			--удаление босса
			for boss1=1,4 do
				local enBoss = GetEntityByName("EnemyBoss"..boss1.."_vehicle_0")
				if enBoss then enBoss:Remove() end
			end

			local Boss = GetEntityByName("Boss_vehicle_0")
			if Boss then Boss:Remove() end

			TDeactivate("CreateBoss")
			TDeactivate("BossEnemy_Die")

			--аир дроп
			TDeactivate("AirDropProbability")
			TDeactivate("SpawnOracle_AirDrop")
			TDeactivate("DistPoint")
			TDeactivate("BoxDownY")
			TDeactivate("TimerForCreateAirDrop")
			TDeactivate("OracleSoundUpdate")
			TDeactivate("OracleSoundRemove")
			TDeactivate("OracleRemove")

			for point=1,14 do
				local airpoint = GetEntityByName("air_point"..point)
				if airpoint then airpoint:Remove() end
			end

			local AirBoxSg = GetEntityByName("airB")
			if AirBoxSg then AirBoxSg:Remove() end

			local airbox = GetEntityByName("AirBox")
			if airbox then airbox:Remove() end

			local s_hel = GetEntityByName("SH")
			if s_hel then s_hel:Remove() end

			--удаление ЧВК
			for pmc1 = 1,GetVar("CountPMC_Spawn1").AsInt do
				local pmc1sp = GetEntityByName("PMC_"..pmc1.."_Spawn1_vehicle_0")
				if pmc1sp then pmc1sp:Remove() end
			end

			for pmc2 = 1,GetVar("CountPMC_Spawn2").AsInt do
				local pmc2sp = GetEntityByName("PMC_"..pmc2.."_Spawn2_vehicle_0")
				if pmc2sp then pmc2sp:Remove() end
			end

			local tr_pmc1 = getObj("PMC_Die")
			if tr_pmc1 then
				for count_pmc1 = 1,GetVar("CountPMC_Spawn1").AsInt do
					tr_pmc1:DelEventObj("GE_OBJECT_DIE", "PMC_"..count_pmc1.."_Spawn1_vehicle_0")
				end
				for count_pmc2 = 1,GetVar("CountPMC_Spawn2").AsInt do
					tr_pmc1:DelEventObj("GE_OBJECT_DIE", "PMC_"..count_pmc2.."_Spawn2_vehicle_0")
				end
			end

			TDeactivate("TpBirge_1")
			TDeactivate("TpBirge_2")
			TDeactivate("TDeaTpBirge")
			TDeactivate("TActivTpBirge")
			TDeactivate("PMC_To_Exits_loc")
			TDeactivate("PMC_Die")

			--удаление диких
			for s_count=1,GetVar("CountScavs").AsInt do
				local scavs = GetEntityByName("Scav_"..s_count.."_vehicle_0")
				if scavs then scavs:Remove() end
			end

			TDeactivate("Scavs_Reached")
			TDeactivate("Scavs_Dead")

			local tr = getObj("Scavs_Reached")
			if tr then
				for s_r=1,GetVar("CountScavs").AsInt do
					tr:DelEventObj("GE_TARGET_REACHED", "Scav_"..s_r)
				end
			end

			local tr2 = getObj("Scavs_Dead")
			if tr2 then
				for s_d=1,GetVar("CountScavs").AsInt do
					tr2:DelEventObj("GE_OBJECT_DIE", "Scav_"..s_d)
				end
			end

			TDeactivate("FakePlayerDead")
		
			--глобал переменные
			if COUNT_RAIDS then COUNT_RAIDS = GetVar("CountRaids").AsInt end

			if CHESTSCAVS_TIMER_HOUR_GLOBAL then CHESTSCAVS_TIMER_HOUR_GLOBAL = GetVar("ChestScavs_time_hour").AsInt end
			if CHESTSCAVS_TIMER_MINUTE_GLOBAL then CHESTSCAVS_TIMER_MINUTE_GLOBAL = GetVar("ChestScavs_time_minute").AsInt end
			if CHESTSCAVS_TIMER_SECOND_GLOBAL then CHESTSCAVS_TIMER_SECOND_GLOBAL = GetVar("ChestScavs_time_second").AsInt end
			if CHESTSCAVS_SEARCH_GLOBAL then CHESTSCAVS_SEARCH_GLOBAL = GetVar("ChestScavs_Search").AsInt end

			if GENERATOR_TIMER_HOUR_GLOBAL then GENERATOR_TIMER_HOUR_GLOBAL = GetVar("Generator_time_work_hour").AsInt end
			if GENERATOR_TIMER_MINUTE_GLOBAL then GENERATOR_TIMER_MINUTE_GLOBAL = GetVar("Generator_time_work_minute").AsInt end
			if GENERATOR_TIMER_SECOND_GLOBAL then GENERATOR_TIMER_SECOND_GLOBAL = GetVar("Generator_time_work_second").AsInt end
			if GENERATOR_ON_GLOBAL then GENERATOR_ON_GLOBAL = GetVar("Generator_on").AsInt end

			if GARAGE_CRAFTING_TIME_HOUR_GLOBAL then GARAGE_CRAFTING_TIME_HOUR_GLOBAL = GetVar("GarageCrafting_time_hour").AsInt end
			if GARAGE_CRAFTING_TIME_MINUTE_GLOBAL then GARAGE_CRAFTING_TIME_MINUTE_GLOBAL = GetVar("GarageCrafting_time_minute").AsInt end
			if GARAGE_CRAFTING_TIME_SECOND_GLOBAL then GARAGE_CRAFTING_TIME_SECOND_GLOBAL = GetVar("GarageCrafting_time_second").AsInt end
			if GARAGE_CRAFT_GLOBAL then GARAGE_CRAFT_GLOBAL = GetVar("GarageCraft").AsInt end
			if GARAGE_CRAFT_PAUSE_GLOBAL then GARAGE_CRAFT_PAUSE_GLOBAL = GetVar("GarageCraftPause").AsInt end

			TDeactivate("IfChargeCar")
			
			TDeactivate("ShowExits")
			TDeactivate("ShowExits_Activate")

			--квесты
			if IsQuestTaken("q_search_data") and not(IsQuestComplete("q_search_data")) then
				TActivate("q_search_data_RemoveDestrBug")
				TDeactivate("q_search_data_Enters_1")
				TDeactivate("q_search_data_Enters_2")
			end

			if IsQuestTaken("q_explore_r1m1") and not(IsQuestComplete("q_explore_r1m1")) then
				TDeactivate("q_explore_r1m1_Enters")
			end

			if IsQuestTaken("q_clearing_r1m1") and not(IsQuestComplete("q_clearing_r1m1")) then
				TDeactivate("q_clearing_r1m1_InLoc")
			end

			if IsQuestTaken("q_base_scavs") and not(IsQuestComplete("q_base_scavs")) then
				TDeactivate("q_base_scavs_EntersBase")
				TDeactivate("q_base_scavs_LeavesBase")
				TDeactivate("q_base_scavs_TimerStart")
				TDeactivate("q_base_scavs_Timer")
			end

			if IsQuestTaken("q_bitok3") and not(IsQuestComplete("q_bitok3")) then
				local chestboxvideocard = GetEntityByName("BoxVideocard")
				if chestboxvideocard then chestboxvideocard:Remove() end
				TDeactivate("q_bitok3_1")
			end

			println("MAP CLEAR")

			trigger:Deactivate()
		</script>
	</trigger>

<!--
**************************************************************************************************
** КВЕСТЫ
**************************************************************************************************
-->

	<trigger Name="KillsScavs" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("PlayerKillScavs", GetVar("PlayerKillScavs").AsInt+1)
			println("Scavs kill: "..GetVar("PlayerKillScavs").AsInt)

			if IsQuestTaken("q_testing_mission") and not(IsQuestComplete("q_testing_mission_1")) then
				TActivate("q_testing_mission_KillScavs")
			end

			if IsQuestTaken("q_clearing_r1m1") and not(IsQuestComplete("q_clearing_r1m1")) then
				TActivate("q_clearing_r1m1_KillScavs")
			end

			if IsQuestTaken("q_kill_scavs") and not(IsQuestComplete("q_kill_scavs_1")) then
				TActivate("q_kill_scavs_Kill")
			end

			if IsQuestTaken("q_test_drive1") and not(IsQuestComplete("q_test_drive1_1")) then
				TActivate("q_test_drive1_killscavs")
			end

			for i1 = 2,3 do
				if IsQuestTaken("q_test_drive"..i1) and not(IsQuestComplete("q_test_drive"..i1.."_2")) then
					TActivate("q_test_drive"..i1.."_killscavs")
				end
			end

			for i2 = 4,5 do
				if IsQuestTaken("q_test_drive"..i2) and not(IsQuestComplete("q_test_drive"..i2.."_3")) then
					TActivate("q_test_drive"..i2.."_killscavs")
				end
			end

			for i3 = 6,8 do
				if IsQuestTaken("q_test_drive"..i3) and not(IsQuestComplete("q_test_drive"..i3.."_2")) then
					TActivate("q_test_drive"..i3.."_killscavs")
				end
			end
			
			for i4 = 1,4 do
				if IsQuestTaken("q_naturalist"..i4) and not(IsQuestComplete("q_naturalist"..i4.."_2")) then
					TActivate("q_naturalist"..i4.."_killscavs")
				end
			end

			if IsQuestTaken("q_naturalist5") and not(IsQuestComplete("q_naturalist5_3")) then
				TActivate("q_naturalist5_killscavs")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="KillsPMC" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("PlayerKillPMC", GetVar("PlayerKillPMC").AsInt+1)
			println("PMC kill: "..GetVar("PlayerKillPMC").AsInt)

			for i1 = 2,3 do
				if IsQuestTaken("q_test_drive"..i1) and not(IsQuestComplete("q_test_drive"..i1.."_3")) then
					TActivate("q_test_drive"..i1.."_killPMC")
				end
			end

			for i2 = 4,5 do
				if IsQuestTaken("q_test_drive"..i2) and not(IsQuestComplete("q_test_drive"..i2.."_4")) then
					TActivate("q_test_drive"..i2.."_killPMC")
				end
			end

			for i3 = 6,8 do
				if IsQuestTaken("q_test_drive"..i3) and not(IsQuestComplete("q_test_drive"..i3.."_3")) then
					TActivate("q_test_drive"..i3.."_killPMC")
				end
			end

			for i4 = 1,4 do
				if IsQuestTaken("q_naturalist"..i4) and not(IsQuestComplete("q_naturalist"..i4.."_3")) then
					TActivate("q_naturalist"..i4.."_killPMC")
				end
			end

			if IsQuestTaken("q_naturalist5") and not(IsQuestComplete("q_naturalist5_4")) then
				TActivate("q_naturalist5_killPMC")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="QuestsActivate" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if IsQuestTaken("q_search_data") and not(IsQuestComplete("q_search_data")) then
				TActivate("q_search_data_CreateDestrBug")
			end

			if IsQuestTaken("q_explore_r1m1") and not(IsQuestComplete("q_explore_r1m1")) then
				TActivate("q_explore_r1m1_Enters")
			end

			if IsQuestTaken("q_clearing_r1m1") and not(IsQuestComplete("q_clearing_r1m1")) then
				TActivate("q_clearing_r1m1_InLoc")
			end

			if IsQuestTaken("q_base_scavs") and not(IsQuestComplete("q_base_scavs")) then
				TActivate("q_base_scavs_EntersBase")
			end

			if IsQuestTaken("q_bitok3") and not(IsQuestComplete("q_bitok3")) then
				TActivate("q_bitok3_SpawnBoxVideocard")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="IfExitForQuest" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if IsQuestTaken("q_search_data_3") and not(IsQuestComplete("q_search_data_3")) and HasPlayerAmountOfItems("item_quest_search_data", 1) then
				CompleteSubtask("q_search_data_3")
			end

			if IsQuestTaken("q_base_scavs_2") and not(IsQuestComplete("q_base_scavs_2")) then
				CompleteSubtask("q_base_scavs_2")
			end

			if IsQuestTaken("q_bitok3_22") and not(IsQuestComplete("q_bitok3_22")) and HasPlayerAmountOfItems("item_quest_box_videocard", 1) then
				CompleteSubtask("q_bitok3_22")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="IfPlayerDieForQuest" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if IsQuestTaken("q_search_data_2") and not(IsQuestComplete("q_search_data_2")) then
				TDeactivate("q_search_data_Enters_1")
				TDeactivate("q_search_data_Enters_2")
			end

			if IsQuestTaken("q_base_scavs_1") and not(IsQuestComplete("q_base_scavs_1")) then
				TDeactivate("q_base_scavs_EntersBase")
				TDeactivate("q_base_scavs_LeavesBase")
				TDeactivate("q_base_scavs_TimerStart")
				TDeactivate("q_base_scavs_Timer")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="IfRaidCountForQuest" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i1 = 4,5 do
				if IsQuestTaken("q_test_drive"..i1) and not(IsQuestComplete("q_test_drive"..i1.."_2")) then
					TActivate("q_test_drive"..i1.."_countraid")
				end
			end

			if IsQuestTaken("q_naturalist5") and not(IsQuestComplete("q_naturalist5_2")) then
				TActivate("q_naturalist5_countraid")
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Дебютная миссия

	<trigger Name="q_testing_mission_KillScavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if not(GetVar("q_testing_mission_DieScavs").AsInt == 5) then
				SetVar("q_testing_mission_DieScavs", GetVar("q_testing_mission_DieScavs").AsInt+1)
				if GetVar("q_testing_mission_DieScavs").AsInt >= 5 then
					CompleteSubtask("q_testing_mission_1")
					AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_testing_mission", GetVar("q_testing_mission_DieScavs").AsInt, 5)
					SoundFadingMsg()
				else
					AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_testing_mission", GetVar("q_testing_mission_DieScavs").AsInt, 5)
					SoundFadingMsg()
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Поисковая миссия

	<trigger Name="q_search_data_CreateDestrBug" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			CreateNewDummyObject("bugChassis", "destr_bug_1", -1, -1, CVector(2886.035, 287.405, 1908.789), Quaternion(-0.0329, -0.9542, -0.0806, 0.2863), 8)
			CreateNewDummyObject("bugCab03Fake", "destr_bug_2", -1, -1, CVector(2885.340, 289.098, 1907.710), Quaternion(-0.0160, -0.9580, -0.0587, 0.2802), 16)
			CreateNewDummyObject("bugCargo03", "destr_bug_3", -1, -1, CVector(2888.762, 288.899, 1910.161), Quaternion(-0.6680, -0.6851, 0.2058, 0.2051), 16)
			CreateNewDummyObject("bugWheel01", "destr_bug_4", -1, -1, CVector(2885.794, 287.933, 1906.645), Quaternion(0.0593, -0.9456, -0.0020, 0.3199), 16)
			CreateNewDummyObject("bugWheel01", "destr_bug_5", -1, -1, CVector(2884.045, 287.933, 1907.784), Quaternion(-0.0261, 0.2893, -0.1325, 0.9477), 16)
			CreateNewDummyObject("bugWheel02", "destr_bug_6", -1, -1, CVector(2886.662, 287.810, 1911.435), Quaternion(-0.2316, 0.2162, -0.7025, 0.6372), 16)
			CreateNewDummyObject("pkt01gun", "destr_bug_7", -1, -1, CVector(2885.572, 290.733, 1908.093), Quaternion(0.0618, -0.9421, 0.1952, 0.2656), 8)
			CreateNewDummyObject("pkt01", "destr_bug_8", -1, -1, CVector(2885.764, 290.300, 1908.444), Quaternion(0.0218, 0.2843, -0.0586, 0.9567), 8)
			CreateNewSgNodeObject("ET_PS_BOSS1_SMOKE", "destr_bug_9", -1, -1, CVector(2885.275, 287.547, 1907.911), Quaternion(0, 0, 0, 1), 0)
			CreateNewSgNodeObject("ET_PS_WHEEL_FIRE_MED_SMOKE1", "destr_bug_10", -1, -1, CVector(2886.755, 287.547, 1911.4001), Quaternion(0, 0, 0, 1), 0)
			CreateNewSgNodeObject("ET_PS_WHEEL_FIRE_BIG_SMOKE1", "destr_bug_11", -1, -1, CVector(2888.928,287.547, 1910.030), Quaternion(0, 0, 0, 1), 0)
	
			local anim = GetEntityByName("destr_bug_2")
			if anim then anim:SetNodeAction(AT_DEATH1) end

			local Chest = CreateNewObject{prototypeName = "opacityChest", objName = "destr_bug_12"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(2888, 288, 1910))
			
			local Item = CreateNewObject{prototypeName = "item_quest_search_data", objName = "ItemDataQuest", belong = 1100}
			local ItemId = GetEntityByID(Item)
			if ChestId and ItemId then
				ChestId:AddChild(ItemId)
			end

			TActivate("q_search_data_Enters_1")
			TActivate("q_search_data_Enters_2")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_search_data_RemoveDestrBug" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			for i=1,12 do
				local b = GetEntityByName("destr_bug_"..i)
				if b then b:Remove() end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_search_data_Enters_1" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_search_data_1_loc" />
		<script>
			if not(IsQuestComplete("q_search_data_1")) then
				CompleteSubtask("q_search_data_1")
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_search_data_Enters_2" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_search_data_2_loc" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_search_data_2_loc" />
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="q_search_data_2_loc" />
		<script>
			local chest = GetEntityByName("destr_bug_12")
			local pl = GetPlayerVehicle()
			if pl then
				if HasPlayerAmountOfItems("item_quest_search_data", 1) or not(chest) then
					if IsQuestTaken("q_search_data_2") and not(IsQuestComplete("q_search_data_2")) then
						CompleteSubtask("q_search_data_2")
					else
						AddImportantFadingMsgByStrIdFormatted("fm_complete_subtask", "q_search_data")
						CreateEffectInsertedInRemove("ET_S_SUBTASK_COMPLETE", pl:GetPosition(), Quaternion(0, 0, 0, 1), true)
					end
					trigger:Deactivate()
				end
			end
		</script>
	</trigger>

-- Разведка местности

	<trigger Name="q_explore_r1m1_Enters" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_1_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_2_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_3_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_4_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_5_loc" />
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="q_explore_r1m1_6_loc" />
		<script>
			local loc = trigger:GetCallObjName()
			local locnum = tonumber(strsub(loc,16,16))

			if loc == "q_explore_r1m1_"..locnum.."_loc" then 
				if IsQuestTaken("q_explore_r1m1") and not(IsQuestComplete("q_explore_r1m1_"..locnum)) then CompleteSubtask("q_explore_r1m1_"..locnum) end 
			end
	
			if IsQuestTaken("q_explore_r1m1_7") and not(IsQuestComplete("q_explore_r1m1_7")) then
				trigger:Deactivate()
			end
		</script>
	</trigger>

-- Зачистка местности

	<trigger Name="q_clearing_r1m1_InLoc" active="0">
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_clearing_r1m1_1_loc_0" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_clearing_r1m1_2_loc_0" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_clearing_r1m1_3_loc_0" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_clearing_r1m1_4_loc_0" />
		<event eventid="GE_OBJECT_IN_LOCATION" ObjName="q_clearing_r1m1_5_loc_0" />
		<script>
			local loc = trigger:GetCallObjName()
			local locnum = tonumber(strsub(loc,17,17))

			if loc == "q_clearing_r1m1_"..locnum.."_loc_0" then
				SetVar("q_clearing_r1m1_EnemyInLoc", locnum)
			end
		
		</script>
	</trigger>

	<trigger Name="q_clearing_r1m1_KillScavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			local kills = {5, 5, 5, 5, 5}
			for i=1,5 do
				if GetVar("q_clearing_r1m1_EnemyInLoc").AsInt == i then
					if not(GetVar("q_clearing_r1m1_DieScavs_loc_"..i).AsInt == kills[i]) then
						SetVar("q_clearing_r1m1_DieScavs_loc_"..i, GetVar("q_clearing_r1m1_DieScavs_loc_"..i).AsInt+1)
						if GetVar("q_clearing_r1m1_DieScavs_loc_"..i).AsInt >= kills[i] then
							CompleteSubtask("q_clearing_r1m1_"..i)
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_clearing_r1m1", GetVar("q_clearing_r1m1_DieScavs_loc_"..i).AsInt, kills[i])
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_clearing_r1m1", GetVar("q_clearing_r1m1_DieScavs_loc_"..i).AsInt, kills[i])
							SoundFadingMsg()
						end
						SetVar("q_clearing_r1m1_EnemyInLoc", 0)
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Огонь на поражение

	<trigger Name="q_kill_scavs_Kill" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if not(GetVar("q_kill_scavs_Die").AsInt == 15) then
				SetVar("q_kill_scavs_Die", GetVar("q_kill_scavs_Die").AsInt+1)
				if GetVar("q_kill_scavs_Die").AsInt >= 15 then
					CompleteSubtask("q_kill_scavs_1")
					AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_kill_scavs", GetVar("q_kill_scavs_Die").AsInt, 15)
					SoundFadingMsg()
				else
					AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_kill_scavs", GetVar("q_kill_scavs_Die").AsInt, 15)
					SoundFadingMsg()
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Это наша территория

	<trigger Name="q_base_scavs_EntersBase" active="0">
		<event eventid="GE_OBJECT_ENTERS_LOCATION" ObjName="BaseScavs_loc" />
		<script>
			if HasPlayerAmountOfItems("item_ms2000", 1) then
				AddImportantFadingMsgByStrIdFormatted("fm_marker_target")
				SoundFadingMsg()
				TActivate("q_base_scavs_TimerStart")
				TActivate("q_base_scavs_LeavesBase")
			end
		</script>
	</trigger>

	<trigger Name="q_base_scavs_LeavesBase" active="0">
		<event eventid="GE_OBJECT_LEAVES_LOCATION" ObjName="BaseScavs_loc" />
		<script>
			TDeactivate("q_base_scavs_TimerStart")
			AddImportantFadingMsgByStrIdFormatted("fm_marker_leaves_zone")
			SoundFadingMsg()
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_base_scavs_TimerStart" active="0">
		<event timeout="1.5" eventid="GE_TIME_PERIOD" />
		<script>
			SetVar("DefenceTargetTimer", 10)
			TActivate("q_base_scavs_Timer")
			TDeactivate("q_base_scavs_LeavesBase")
			RemoveItemsFromPlayerRepository("item_ms2000", 1)
			AddImportantFadingMsgByStrIdFormatted("fm_marker_install")
			SoundFadingMsg()
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_base_scavs_Timer" active="0">
		<event timeout="1" eventid="GE_TIME_PERIOD" />
		<script>
			local t = GetVar("DefenceTargetTimer").AsInt-1
			SetVar("DefenceTargetTimer", t)
		
			if 0 >= t then
				if IsQuestTaken("q_base_scavs") and not(IsQuestComplete("q_base_scavs_1")) then 
					CompleteSubtask("q_base_scavs_1") 
				end
				trigger:Deactivate()
			else
				AddFadingMsgByStrIdFormatted("fm_target_defence_timer", t)
			end
		</script>
	</trigger>

-- Тест драйв - Часть 1
	
	<trigger Name="q_test_drive1_killscavs" active="0">
	<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Bug" and GetVar("PlayerCabin").AsString == "bugCab01" and GetVar("PlayerBasket").AsString == "bugCargo03_5x7" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				if cab_small then cab_small = cab_small:GetProperty("Prototype").AsString end
				if cab_small == "pkt01" then
					if not(GetVar("q_test_drive1_killscavs").AsInt == 15) then
						SetVar("q_test_drive1_killscavs", GetVar("q_test_drive1_killscavs").AsInt+1)
						if GetVar("q_test_drive1_killscavs").AsInt >= 15 then
							CompleteSubtask("q_test_drive1_1")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive1", GetVar("q_test_drive1_killscavs").AsInt, 15)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive1", GetVar("q_test_drive1_killscavs").AsInt, 15)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 2
	
	<trigger Name="q_test_drive2_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab03" and GetVar("PlayerBasket").AsString == "molokovozCargo01_5x8" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				local bas_small_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")
				if cab_small and bas_small_0 then 
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_small_0 = bas_small_0:GetProperty("Prototype").AsString 
				end

				if cab_small == "specter01" and bas_small_0 == "pkt01" or cab_small == "pkt01" and bas_small_0 == "specter01" then
					if not(GetVar("q_test_drive2_killscavs").AsInt == 20) then
						SetVar("q_test_drive2_killscavs", GetVar("q_test_drive2_killscavs").AsInt+1)
						if GetVar("q_test_drive2_killscavs").AsInt >= 20 then
							CompleteSubtask("q_test_drive2_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive2", GetVar("q_test_drive2_killscavs").AsInt, 20)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive2", GetVar("q_test_drive2_killscavs").AsInt, 20)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive2_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab03" and GetVar("PlayerBasket").AsString == "molokovozCargo01_5x8" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				local bas_small_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")
				if cab_small and bas_small_0 then 
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_small_0 = bas_small_0:GetProperty("Prototype").AsString 
				end

				if cab_small == "specter01" and bas_small_0 == "pkt01" or cab_small == "pkt01" and bas_small_0 == "specter01" then
					if not(GetVar("q_test_drive2_killPMC").AsInt == 10) then
						SetVar("q_test_drive2_killPMC", GetVar("q_test_drive2_killPMC").AsInt+1)
						if GetVar("q_test_drive2_killPMC").AsInt >= 10 then
							CompleteSubtask("q_test_drive2_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive2", GetVar("q_test_drive2_killPMC").AsInt, 10)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive2", GetVar("q_test_drive2_killPMC").AsInt, 10)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 3
	
	<trigger Name="q_test_drive3_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Bug" and GetVar("PlayerCabin").AsString == "bugCab01" and GetVar("PlayerBasket").AsString == "bugCargo01_4x5" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				if cab_small then cab_small = cab_small:GetProperty("Prototype").AsString end

				if cab_small == "hornet01" or cab_small == "american_hornet01" then
					if not(GetVar("q_test_drive3_killscavs").AsInt == 5) then
						SetVar("q_test_drive3_killscavs", GetVar("q_test_drive3_killscavs").AsInt+1)
						if GetVar("q_test_drive3_killscavs").AsInt >= 5 then
							CompleteSubtask("q_test_drive3_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive3", GetVar("q_test_drive3_killscavs").AsInt, 5)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive3", GetVar("q_test_drive3_killscavs").AsInt, 5)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive3_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Bug" and GetVar("PlayerCabin").AsString == "bugCab01" and GetVar("PlayerBasket").AsString == "bugCargo01_4x5" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				if cab_small then cab_small = cab_small:GetProperty("Prototype").AsString end

				if cab_small == "hornet01" or cab_small == "american_hornet01" then
					if not(GetVar("q_test_drive3_killPMC").AsInt == 5) then
						SetVar("q_test_drive3_killPMC", GetVar("q_test_drive3_killPMC").AsInt+1)
						if GetVar("q_test_drive3_killPMC").AsInt >= 5 then
							CompleteSubtask("q_test_drive3_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive3", GetVar("q_test_drive3_killPMC").AsInt, 5)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive3", GetVar("q_test_drive3_killPMC").AsInt, 5)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 4
	
	<trigger Name="q_test_drive4_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab01" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 then bas_big_0 = bas_big_0:GetProperty("Prototype").AsString end

				if bas_big_0 == "kpvt01" then
					if not(GetVar("q_test_drive4_killscavs").AsInt == 30) then
						SetVar("q_test_drive4_killscavs", GetVar("q_test_drive4_killscavs").AsInt+1)
						if GetVar("q_test_drive4_killscavs").AsInt >= 30 then
							CompleteSubtask("q_test_drive4_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive4", GetVar("q_test_drive4_killscavs").AsInt, 30)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive4", GetVar("q_test_drive4_killscavs").AsInt, 30)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="q_test_drive4_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab01" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 then bas_big_0 = bas_big_0:GetProperty("Prototype").AsString end

				if bas_big_0 == "kpvt01" then
					if not(GetVar("q_test_drive4_killPMC").AsInt == 15) then
						SetVar("q_test_drive4_killPMC", GetVar("q_test_drive4_killPMC").AsInt+1)
						if GetVar("q_test_drive4_killPMC").AsInt >= 15 then
							CompleteSubtask("q_test_drive4_4")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive4", GetVar("q_test_drive4_killPMC").AsInt, 15)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive4", GetVar("q_test_drive4_killPMC").AsInt, 15)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive4_countraid" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab01" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 then bas_big_0 = bas_big_0:GetProperty("Prototype").AsString end

				if bas_big_0 == "kpvt01" then
					if not(GetVar("q_test_drive4_raidcount").AsInt == 3) then
						SetVar("q_test_drive4_raidcount", GetVar("q_test_drive4_raidcount").AsInt+1)
						if GetVar("q_test_drive4_raidcount").AsInt == 3 then 
							CompleteSubtask("q_test_drive4_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount_complete", "q_test_drive4", GetVar("q_test_drive4_raidcount").AsInt, 3)
							SoundFadingMsg() 
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount", "q_test_drive4", GetVar("q_test_drive4_raidcount").AsInt, 3)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 5
	
	<trigger Name="q_test_drive5_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab03" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 and cab_small then 
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_small == "storm01" and bas_big_0 == "rapier01" then
					if not(GetVar("q_test_drive5_killscavs").AsInt == 30) then
						SetVar("q_test_drive5_killscavs", GetVar("q_test_drive5_killscavs").AsInt+1)
						if GetVar("q_test_drive5_killscavs").AsInt >= 30 then
							CompleteSubtask("q_test_drive5_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive5", GetVar("q_test_drive5_killscavs").AsInt, 30)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive5", GetVar("q_test_drive5_killscavs").AsInt, 30)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive5_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab03" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 and cab_small then 
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_small == "storm01" and bas_big_0 == "rapier01" then
					if not(GetVar("q_test_drive5_killPMC").AsInt == 20) then
						SetVar("q_test_drive5_killPMC", GetVar("q_test_drive5_killPMC").AsInt+1)
						if GetVar("q_test_drive5_killPMC").AsInt >= 20 then
							CompleteSubtask("q_test_drive5_4")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive5", GetVar("q_test_drive5_killPMC").AsInt, 20)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive5", GetVar("q_test_drive5_killPMC").AsInt, 20)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive5_countraid" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab03" and GetVar("PlayerBasket").AsString == "molokovozCargo03_6x8" then
				local cab_small = GetPlayerVehicle():GetPartByName("CABIN_SMALL_GUN")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 and cab_small then 
					cab_small = cab_small:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_small == "storm01" and bas_big_0 == "rapier01" then
					if not(GetVar("q_test_drive5_raidcount").AsInt == 3) then
						SetVar("q_test_drive5_raidcount", GetVar("q_test_drive5_raidcount").AsInt+1)
						if GetVar("q_test_drive5_raidcount").AsInt == 3 then 
							CompleteSubtask("q_test_drive5_2") 
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount_complete", "q_test_drive5", GetVar("q_test_drive5_raidcount").AsInt, 3)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount", "q_test_drive5", GetVar("q_test_drive5_raidcount").AsInt, 3)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 6
	
	<trigger Name="q_test_drive6_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab02" and GetVar("PlayerBasket").AsString == "uralCargo01_6x9" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 and cab_big_1 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "vulcan01" and bas_big_0 == "vulcan01" then
					if not(GetVar("q_test_drive6_killscavs").AsInt == 30) then
						SetVar("q_test_drive6_killscavs", GetVar("q_test_drive6_killscavs").AsInt+1)
						if GetVar("q_test_drive6_killscavs").AsInt >= 30 then
							CompleteSubtask("q_test_drive6_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive6", GetVar("q_test_drive6_killscavs").AsInt, 30)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive6", GetVar("q_test_drive6_killscavs").AsInt, 30)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive6_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab02" and GetVar("PlayerBasket").AsString == "uralCargo01_6x9" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if bas_big_0 and cab_big_1 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "vulcan01" and bas_big_0 == "vulcan01" then
					if not(GetVar("q_test_drive6_killPMC").AsInt == 15) then
						SetVar("q_test_drive6_killPMC", GetVar("q_test_drive6_killPMC").AsInt+1)
						if GetVar("q_test_drive6_killPMC").AsInt >= 15 then
							CompleteSubtask("q_test_drive6_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive6", GetVar("q_test_drive6_killPMC").AsInt, 15)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive6", GetVar("q_test_drive6_killPMC").AsInt, 15)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 7
	
	<trigger Name="q_test_drive7_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab01" and GetVar("PlayerBasket").AsString == "molokovozCargo02_6x9" then
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")
				if bas_big_0 then 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if bas_big_0 == "kord01" then
					if not(GetVar("q_test_drive7_killscavs").AsInt == 10) then
						SetVar("q_test_drive7_killscavs", GetVar("q_test_drive7_killscavs").AsInt+1)
						if GetVar("q_test_drive7_killscavs").AsInt >= 10 then
							CompleteSubtask("q_test_drive7_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive7", GetVar("q_test_drive7_killscavs").AsInt, 10)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive7", GetVar("q_test_drive7_killscavs").AsInt, 10)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive7_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Molokovoz" and GetVar("PlayerCabin").AsString == "molokovozCab01" and GetVar("PlayerBasket").AsString == "molokovozCargo02_6x9" then
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_SMALL_GUN_0")
				if bas_big_0 then 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if bas_big_0 == "kord01" then
					if not(GetVar("q_test_drive7_killPMC").AsInt == 5) then
						SetVar("q_test_drive7_killPMC", GetVar("q_test_drive7_killPMC").AsInt+1)
						if GetVar("q_test_drive7_killPMC").AsInt >= 5 then
							CompleteSubtask("q_test_drive7_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive7", GetVar("q_test_drive7_killPMC").AsInt, 5)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive7", GetVar("q_test_drive7_killPMC").AsInt, 5)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Тест драйв - Часть 8
	
	<trigger Name="q_test_drive8_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab02" and GetVar("PlayerBasket").AsString == "uralCargo04_7x10" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "rapier01" and bas_big_0 == "rapier01" then
					if not(GetVar("q_test_drive8_killscavs").AsInt == 40) then
						SetVar("q_test_drive8_killscavs", GetVar("q_test_drive8_killscavs").AsInt+1)
						if GetVar("q_test_drive8_killscavs").AsInt >= 40 then
							CompleteSubtask("q_test_drive8_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_test_drive8", GetVar("q_test_drive8_killscavs").AsInt, 40)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_test_drive8", GetVar("q_test_drive8_killscavs").AsInt, 40)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_test_drive8_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab02" and GetVar("PlayerBasket").AsString == "uralCargo04_7x10" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "rapier01" and bas_big_0 == "rapier01" then
					if not(GetVar("q_test_drive8_killPMC").AsInt == 20) then
						SetVar("q_test_drive8_killPMC", GetVar("q_test_drive8_killPMC").AsInt+1)
						if GetVar("q_test_drive8_killPMC").AsInt >= 20 then
							CompleteSubtask("q_test_drive8_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_test_drive8", GetVar("q_test_drive8_killPMC").AsInt, 20)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_test_drive8", GetVar("q_test_drive8_killPMC").AsInt, 20)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

-- Натуралист - Часть 1
	
	<trigger Name="q_naturalist1_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab04" and GetVar("PlayerBasket").AsString == "uralCargo01_6x9" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "rainmetal01" and bas_big_0 == "kpvt01" or bas_big_0 == "rainmetal01" and cab_big_1 == "kpvt01" then
					if not(GetVar("q_naturalist1_killscavs").AsInt == 30) then
						SetVar("q_naturalist1_killscavs", GetVar("q_naturalist1_killscavs").AsInt+1)
						if GetVar("q_naturalist1_killscavs").AsInt >= 30 then
							CompleteSubtask("q_naturalist1_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_naturalist1", GetVar("q_naturalist1_killscavs").AsInt, 30)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_naturalist1", GetVar("q_naturalist1_killscavs").AsInt, 30)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_naturalist1_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab04" and GetVar("PlayerBasket").AsString == "uralCargo01_6x9" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "rainmetal01" and bas_big_0 == "kpvt01" or bas_big_0 == "rainmetal01" and cab_big_1 == "kpvt01" then
					if not(GetVar("q_naturalist1_killPMC").AsInt == 15) then
						SetVar("q_naturalist1_killPMC", GetVar("q_naturalist1_killPMC").AsInt+1)
						if GetVar("q_naturalist1_killPMC").AsInt >= 15 then
							CompleteSubtask("q_naturalist1_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_naturalist1", GetVar("q_naturalist1_killPMC").AsInt, 15)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_naturalist1", GetVar("q_naturalist1_killPMC").AsInt, 15)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

-- Натуралист - Часть 2
	
	<trigger Name="q_naturalist2_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "vector01" and bas_big_0 == "vector01" then
					if not(GetVar("q_naturalist2_killscavs").AsInt == 20) then
						SetVar("q_naturalist2_killscavs", GetVar("q_naturalist2_killscavs").AsInt+1)
						if GetVar("q_naturalist2_killscavs").AsInt >= 20 then
							CompleteSubtask("q_naturalist2_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_naturalist2", GetVar("q_naturalist2_killscavs").AsInt, 20)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_naturalist2", GetVar("q_naturalist2_killscavs").AsInt, 20)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_naturalist2_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				if cab_big_1 == "vector01" and bas_big_0 == "vector01" then
					if not(GetVar("q_naturalist2_killPMC").AsInt == 5) then
						SetVar("q_naturalist2_killPMC", GetVar("q_naturalist2_killPMC").AsInt+1)
						if GetVar("q_naturalist2_killPMC").AsInt >= 5 then
							CompleteSubtask("q_naturalist2_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_naturalist2", GetVar("q_naturalist2_killPMC").AsInt, 5)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_naturalist2", GetVar("q_naturalist2_killPMC").AsInt, 5)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

-- Натуралист - Часть 3
	
	<trigger Name="q_naturalist3_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab03" and GetVar("PlayerBasket").AsString == "uralCargo04_7x10" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local cab_big_2 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_2")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and cab_big_2 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					cab_big_2 = cab_big_2:GetProperty("Prototype").AsString
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				local l = 0
				if cab_big_1 == "rapier01" or cab_big_1 == "rainmetal01" then l = l + 1 end
				if cab_big_2 == "rapier01" or cab_big_2 == "rainmetal01" then l = l + 1 end
				if bas_big_0 == "rapier01" or bas_big_0 == "rainmetal01" then l = l + 1 end

				if l == 3 then
					if not(GetVar("q_naturalist3_killscavs").AsInt == 5) then
						SetVar("q_naturalist3_killscavs", GetVar("q_naturalist3_killscavs").AsInt+1)
						if GetVar("q_naturalist3_killscavs").AsInt >= 5 then
							CompleteSubtask("q_naturalist3_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_naturalist3", GetVar("q_naturalist3_killscavs").AsInt, 5)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_naturalist3", GetVar("q_naturalist3_killscavs").AsInt, 5)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_naturalist3_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab03" and GetVar("PlayerBasket").AsString == "uralCargo04_7x10" then
				local cab_big_1 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_1")
				local cab_big_2 = GetPlayerVehicle():GetPartByName("CABIN_BIG_GUN_2")
				local bas_big_0 = GetPlayerVehicle():GetPartByName("BASKET_BIG_GUN_0")
				if cab_big_1 and cab_big_2 and bas_big_0 then 
					cab_big_1 = cab_big_1:GetProperty("Prototype").AsString 
					cab_big_2 = cab_big_2:GetProperty("Prototype").AsString
					bas_big_0 = bas_big_0:GetProperty("Prototype").AsString 
				end

				local l = 0
				if cab_big_1 == "rapier01" or cab_big_1 == "rainmetal01" then l = l + 1 end
				if cab_big_2 == "rapier01" or cab_big_2 == "rainmetal01" then l = l + 1 end
				if bas_big_0 == "rapier01" or bas_big_0 == "rainmetal01" then l = l + 1 end

				if l == 3 then
					if not(GetVar("q_naturalist3_killPMC").AsInt == 15) then
						SetVar("q_naturalist3_killPMC", GetVar("q_naturalist3_killPMC").AsInt+1)
						if GetVar("q_naturalist3_killPMC").AsInt >= 15 then
							CompleteSubtask("q_naturalist3_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_naturalist3", GetVar("q_naturalist3_killPMC").AsInt, 15)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_naturalist3", GetVar("q_naturalist3_killPMC").AsInt, 15)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

-- Натуралист - Часть 4
	
	<trigger Name="q_naturalist4_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerBasket").AsString == "uralCargo03_9x10" then
				local bas_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
				local slots = {"CABIN_BIG_GUN_1", "CABIN_BIG_GUN_2", "BASKET_BIG_GUN_0"}

				local l = 0

				for i=1,3 do
					if GetPlayerVehicle():GetPartByName(slots[i]) then
						local protgun = GetPlayerVehicle():GetPartByName(slots[i]):GetProperty("Prototype").AsString
						if protgun == "rainmetal01" then l = l + 1 end
					end
				end

				if bas_giant then
					bas_giant = bas_giant:GetProperty("Prototype").AsString 
					if bas_giant == "cyclops01" then l = l + 1 end
				end
	
				if l == 2 then
					if not(GetVar("q_naturalist4_killscavs").AsInt == 10) then
						SetVar("q_naturalist4_killscavs", GetVar("q_naturalist4_killscavs").AsInt+1)
						if GetVar("q_naturalist4_killscavs").AsInt >= 10 then
							CompleteSubtask("q_naturalist4_2")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_naturalist4", GetVar("q_naturalist4_killscavs").AsInt, 10)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_naturalist4", GetVar("q_naturalist4_killscavs").AsInt, 10)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_naturalist4_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerBasket").AsString == "uralCargo03_9x10" then
				local bas_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
				local slots = {"CABIN_BIG_GUN_1", "CABIN_BIG_GUN_2", "BASKET_BIG_GUN_0"}

				local l = 0

				for i=1,3 do
					if GetPlayerVehicle():GetPartByName(slots[i]) then
						local protgun = GetPlayerVehicle():GetPartByName(slots[i]):GetProperty("Prototype").AsString
						if protgun == "rainmetal01" then l = l + 1 end
					end
				end

				if bas_giant then
					bas_giant = bas_giant:GetProperty("Prototype").AsString 
					if bas_giant == "cyclops01" then l = l + 1 end
				end

				if l == 2 then
					if not(GetVar("q_naturalist4_killPMC").AsInt == 20) then
						SetVar("q_naturalist4_killPMC", GetVar("q_naturalist4_killPMC").AsInt+1)
						if GetVar("q_naturalist4_killPMC").AsInt >= 20 then
							CompleteSubtask("q_naturalist4_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_naturalist4", GetVar("q_naturalist4_killPMC").AsInt, 20)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_naturalist4", GetVar("q_naturalist4_killPMC").AsInt, 20)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

-- Натуралист - Часть 5

	<trigger Name="q_naturalist5_countraid" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab05" and GetVar("PlayerBasket").AsString == "uralCargo03_9x10" then
				local bas_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
				local slots = {"CABIN_BIG_GUN_1", "CABIN_BIG_GUN_2", "BASKET_BIG_GUN_0"}

				local l = 0

				for i=1,3 do
					if GetPlayerVehicle():GetPartByName(slots[i]) then
						local protgun = GetPlayerVehicle():GetPartByName(slots[i]):GetProperty("Prototype").AsString
						if protgun == "rainmetal01" then l = l + 1 end
					end
				end

				if bas_giant then
					bas_giant = bas_giant:GetProperty("Prototype").AsString 
					if bas_giant == "octopus01" then l = l + 1 end
				end

				if l == 4 then
					if not(GetVar("q_naturalist5_raidcount").AsInt == 3) then
						SetVar("q_naturalist5_raidcount", GetVar("q_naturalist5_raidcount").AsInt+1)
						if GetVar("q_naturalist5_raidcount").AsInt == 3 then
							CompleteSubtask("q_naturalist5_2") 
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount_complete", "q_naturalist5", GetVar("q_naturalist5_raidcount").AsInt, 3)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_raidcount", "q_naturalist5", GetVar("q_naturalist5_raidcount").AsInt, 3)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>
	
	<trigger Name="q_naturalist5_killscavs" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab05" and GetVar("PlayerBasket").AsString == "uralCargo03_9x10" then
				local bas_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
				local slots = {"CABIN_BIG_GUN_1", "CABIN_BIG_GUN_2", "BASKET_BIG_GUN_0"}

				local l = 0

				for i=1,3 do
					if GetPlayerVehicle():GetPartByName(slots[i]) then
						local protgun = GetPlayerVehicle():GetPartByName(slots[i]):GetProperty("Prototype").AsString
						if protgun == "rainmetal01" then l = l + 1 end
					end
				end

				if bas_giant then
					bas_giant = bas_giant:GetProperty("Prototype").AsString 
					if bas_giant == "octopus01" then l = l + 1 end
				end

				if l == 4 then
					if not(GetVar("q_naturalist5_killscavs").AsInt == 25) then
						SetVar("q_naturalist5_killscavs", GetVar("q_naturalist5_killscavs").AsInt+1)
						if GetVar("q_naturalist5_killscavs").AsInt >= 25 then
							CompleteSubtask("q_naturalist5_3")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills_complete", "q_naturalist5", GetVar("q_naturalist5_killscavs").AsInt, 25)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_scavs_kills", "q_naturalist5", GetVar("q_naturalist5_killscavs").AsInt, 25)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

	<trigger Name="q_naturalist5_killPMC" active="0">
		<event timeout="0" eventid="GE_TIME_PERIOD" />
		<script>
			if GetVar("PlayerCar").AsString == "Ural" and GetVar("PlayerCabin").AsString == "uralCab05" and GetVar("PlayerBasket").AsString == "uralCargo03_9x10" then
				local bas_giant = GetPlayerVehicle():GetPartByName("BASKET_GIANT_GUN")
				local slots = {"CABIN_BIG_GUN_1", "CABIN_BIG_GUN_2", "BASKET_BIG_GUN_0"}

				local l = 0

				for i=1,3 do
					if GetPlayerVehicle():GetPartByName(slots[i]) then
						local protgun = GetPlayerVehicle():GetPartByName(slots[i]):GetProperty("Prototype").AsString
						if protgun == "rainmetal01" then l = l + 1 end
					end
				end

				if bas_giant then
					bas_giant = bas_giant:GetProperty("Prototype").AsString 
					if bas_giant == "octopus01" then l = l + 1 end
				end

				if l == 4 then
					if not(GetVar("q_naturalist5_killPMC").AsInt == 30) then
						SetVar("q_naturalist5_killPMC", GetVar("q_naturalist5_killPMC").AsInt+1)
						if GetVar("q_naturalist5_killPMC").AsInt >= 30 then
							CompleteSubtask("q_naturalist5_4")
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills_complete", "q_naturalist5", GetVar("q_naturalist5_killPMC").AsInt, 30)
							SoundFadingMsg()
						else
							AddFadingMsgByStrIdFormatted("fm_progress_quest_pmc_kills", "q_naturalist5", GetVar("q_naturalist5_killPMC").AsInt, 30)
							SoundFadingMsg()
						end
					end
				end
			end
			trigger:Deactivate()
		</script>
	</trigger>	

-- Биток - Часть 3
	
	<trigger Name="q_bitok3_SpawnBoxVideocard" active="0">
		<event timeout="0.1" eventid="GE_TIME_PERIOD" />
		<script>
			local Chest = CreateNewObject{prototypeName = "boxvideocardChest", objName = "BoxVideocard"}	
			local ChestId = GetEntityByID(Chest)
			ChestId:SetPosition(CVector(getPos("SpawnBoxVideocard_"..random(1,3).."_loc")))

			local ChestPos = ChestId:GetPosition()
			ChestPos.y = ChestPos.y + 1
			ChestId:SetPosition(ChestPos)

			local Item = CreateNewObject{prototypeName = "item_quest_box_videocard", objName = "ItemQuestBoxVideocard", belong = 1100}
			local ItemId = GetEntityByID(Item)
			if ChestId and ItemId then
				ChestId:AddChild(ItemId)
			end
			TActivate("q_bitok3_1")
			trigger:Deactivate()
		</script>
	</trigger>

	<trigger Name="q_bitok3_1" active="0">
		<event eventid="GE_OBJECT_DIE" ObjName="BoxVideocard" />
		<script>
			if IsQuestTaken("q_bitok3_1") and not(IsQuestComplete("q_bitok3_1")) then
				CompleteSubtask("q_bitok3_1")
			else
				AddImportantFadingMsgByStrIdFormatted("fm_complete_subtask", "q_bitok3")
				CreateEffectInsertedInRemove("ET_S_SUBTASK_COMPLETE", GetPlayerVehicle():GetPosition(), Quaternion(0, 0, 0, 1), true)
			end
			trigger:Deactivate()
		</script>
	</trigger>
</triggers>